CREATE TABLE `brand_refund_items` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `brand_refund_id` INT(10) UNSIGNED NULL, `purchase_item_id` INT(10) UNSIGNED NULL, `amount` DECIMAL(10,2) NULL, `is_deleted` INT(1) UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `brand_purchases` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `number` VARCHAR(40) NOT NULL, `brand_id` INT(10) UNSIGNED NULL, `purchase_id` INT(10) UNSIGNED NULL, `is_frozen` INT(1) UNSIGNED NOT NULL, `is_deleted` INT(1) UNSIGNED NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `brand_refunds` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `brand_purchase_id` INT(10) UNSIGNED NULL, `created_at` DATETIME, `raw_response` TEXT, `reason` TEXT, `is_deleted` INT(1) UNSIGNED NOT NULL, `status` VARCHAR(20) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `purchases` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `creator_id` INT(11) UNSIGNED NOT NULL, `promo_code_id` INT(11) UNSIGNED DEFAULT NULL, `number` VARCHAR(40) NOT NULL, `promo_code_text` VARCHAR(40) NOT NULL, `currency` VARCHAR(3) NOT NULL, `monetary` TEXT, `is_frozen` INT(1) UNSIGNED NOT NULL DEFAULT 0, `is_deleted` INT(1) UNSIGNED NOT NULL DEFAULT 0, `created_at` DATETIME, `updated_at` DATETIME, PRIMARY KEY (`id`), KEY `fk_user_id` (`creator_id`))
CREATE TABLE `brands` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(254) NOT NULL, `currency` VARCHAR(3) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `users` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `email` VARCHAR(254) NOT NULL, `password` VARCHAR(64) NOT NULL, `logins` INT(10) UNSIGNED NOT NULL DEFAULT '0', `last_login` INT(10) UNSIGNED, `facebook_uid` VARCHAR(100), `twitter_uid` VARCHAR(100), `last_login_ip` VARCHAR(40), PRIMARY KEY (`id`), UNIQUE KEY `uniq_email` (`email`))
CREATE TABLE `variations` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(254) NOT NULL, `price` DECIMAL(10,2) NOT NULL, `product_id` INT(10) UNSIGNED NULL, PRIMARY KEY (`id`))
CREATE TABLE `purchase_items` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `brand_purchase_id` INT(10) UNSIGNED NULL, `reference_id` INT(10) UNSIGNED NULL, `reference_model` VARCHAR(40) NULL, `price` DECIMAL(10,2) NULL, `quantity` INT(11) NULL, `model` VARCHAR(255) NULL, `is_payable` INT(1) UNSIGNED NOT NULL, `is_discount` INT(1) UNSIGNED NOT NULL, `is_frozen` INT(1) UNSIGNED NOT NULL, `is_deleted` INT(1) UNSIGNED NOT NULL, `created_at` DATETIME, `updated_at` DATETIME, PRIMARY KEY (`id`))
CREATE TABLE `promo_codes` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code` varchar(255) DEFAULT NULL, `promotion_id` int(11) DEFAULT NULL, `origin` varchar(255) DEFAULT NULL, `allow_multiple` INT(1) DEFAULT 0 NOT NULL, `created_at` datetime DEFAULT NULL, `expires_at` datetime DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `products` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `name` VARCHAR(254) NOT NULL, `price` DECIMAL(10,2) NOT NULL, `currency` VARCHAR(3) NOT NULL, `brand_id` INT(10) UNSIGNED NULL, PRIMARY KEY (`id`))
CREATE TABLE `promotions` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) DEFAULT NULL, `identifier` varchar(255) DEFAULT NULL, `priority` int(11) DEFAULT 0, `model` varchar(100) DEFAULT NULL, `requirement` varchar(255) DEFAULT NULL, `amount` int(11) DEFAULT NULL, `currency` varchar(3) DEFAULT NULL, `description` mediumtext, `created_at` datetime DEFAULT NULL, `expires_at` datetime DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `payments` ( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT, `purchase_id` INT(10) UNSIGNED NULL, `payment_id` VARCHAR(255) NOT NULL, `model` VARCHAR(20) NOT NULL, `status` VARCHAR(20) NOT NULL, `raw_response` TEXT, `is_deleted` INT(1) UNSIGNED NOT NULL, `created_at` DATETIME, `updated_at` DATETIME, PRIMARY KEY (`id`))
