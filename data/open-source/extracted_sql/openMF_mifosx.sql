CREATE TABLE IF NOT EXISTS `m_loan_arrears_aging` ( `loan_id` bigint(20) NOT NULL AUTO_INCREMENT, `principal_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `interest_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `fee_charges_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `penalty_charges_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `total_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `overdue_since_date_derived` date DEFAULT NULL, PRIMARY KEY (`loan_id`), CONSTRAINT `m_loan_arrears_aging_ibfk_1` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_password_validation_policy` ( `id` int(11) NOT NULL AUTO_INCREMENT, `regex` text NOT NULL, `description` text NOT NULL, `active` tinyint(4) NOT NULL DEFAULT '0', `key` varchar(255) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_group` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `office_id` bigint(20) NOT NULL, `staff_id` BIGINT(20) DEFAULT NULL, `parent_id` BIGINT(20) NULL DEFAULT NULL, `level_Id` INT(11) NOT NULL, `hierarchy` VARCHAR(100) NULL DEFAULT NULL, `name` varchar(100) NOT NULL, `external_id` varchar(100) DEFAULT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`, `level_id`), UNIQUE KEY `external_id` (`external_id`, `level_Id`), KEY `office_id` (`office_id`), KEY `staff_id` (`staff_id`), CONSTRAINT `m_group_ibfk_1` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`), CONSTRAINT `Parent_Id_reference` FOREIGN KEY (`parent_id`) REFERENCES `m_group` (`id`), CONSTRAINT `FK_m_group_level` FOREIGN KEY (`level_Id`) REFERENCES `m_group_level` (`id`), CONSTRAINT `FK_m_group_m_staff` FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE IF NOT EXISTS `m_deposit_product_term_and_preclosure` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_product_id` bigint(20) NOT NULL DEFAULT '0', `min_deposit_term` int(11) DEFAULT NULL, `max_deposit_term` int(11) DEFAULT NULL, `min_deposit_term_type_enum` smallint(5) DEFAULT NULL, `max_deposit_term_type_enum` smallint(5) DEFAULT NULL, `in_multiples_of_deposit_term` int(11) DEFAULT NULL, `in_multiples_of_deposit_term_type_enum` smallint(5) DEFAULT NULL, `pre_closure_penal_applicable` smallint(5) DEFAULT NULL, `pre_closure_penal_interest` decimal(19,6) DEFAULT NULL, `pre_closure_penal_interest_on_enum` smallint(5) DEFAULT NULL, `min_deposit_amount` decimal(19,6) DEFAULT NULL, `max_deposit_amount` decimal(19,6) DEFAULT NULL, `deposit_amount` decimal(19,6) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKDPTP00000000000001` (`savings_product_id`), CONSTRAINT `FKDPTP00000000000001` FOREIGN KEY (`savings_product_id`) REFERENCES `m_savings_product` (`id`))
CREATE TABLE IF NOT EXISTS `m_deposit_account_on_hold_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_id` bigint(20) NOT NULL, `amount` decimal(19,6) NOT NULL, `transaction_type_enum` smallint(1) NOT NULL, `transaction_date` date NOT NULL, `is_reversed` tinyint(1) NOT NULL DEFAULT '0', `created_date` datetime NOT NULL, PRIMARY KEY (`id`), KEY `FK_deposit_on_hold_transaction_m_savings_account` (`savings_account_id`), CONSTRAINT `FK_deposit_on_hold_transaction_m_savings_account` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE IF NOT EXISTS `m_appuser_role` ( `appuser_id` bigint(20) NOT NULL, `role_id` bigint(20) NOT NULL, PRIMARY KEY (`appuser_id`,`role_id`), KEY `FK7662CE59B4100309` (`appuser_id`), KEY `FK7662CE5915CEC7AB` (`role_id`), CONSTRAINT `FK7662CE5915CEC7AB` FOREIGN KEY (`role_id`) REFERENCES `m_role` (`id`), CONSTRAINT `FK7662CE59B4100309` FOREIGN KEY (`appuser_id`) REFERENCES `m_appuser` (`id`))
CREATE TABLE `m_group_level` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parent_id` int(11) DEFAULT NULL, `super_parent` tinyint(1) NOT NULL, `level_name` varchar(100) NOT NULL, `recursable` tinyint(1) NOT NULL, `can_have_clients` tinyint(1) NOT NULL, PRIMARY KEY (`id`), KEY `Parent_levelId_reference` (`parent_id`), CONSTRAINT `Parent_levelId_reference` FOREIGN KEY (`parent_id`) REFERENCES `m_group_level` (`id`))
CREATE TABLE IF NOT EXISTS `m_entity_relation` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `from_entity_type` int(10) NOT NULL, `to_entity_type` int(10) NOT NULL, `code_name` varchar(50) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `from_entity_type_to_entity_type_code_name` (`from_entity_type`,`to_entity_type`,`code_name`))
CREATE TABLE IF NOT EXISTS `oauth_client_details` ( `client_id` varchar(128) NOT NULL, `resource_ids` varchar(256) DEFAULT NULL, `client_secret` varchar(256) DEFAULT NULL, `scope` varchar(256) DEFAULT NULL, `authorized_grant_types` varchar(256) DEFAULT NULL, `web_server_redirect_uri` varchar(256) DEFAULT NULL, `authorities` varchar(256) DEFAULT NULL, `access_token_validity` int(11) DEFAULT NULL, `refresh_token_validity` int(11) DEFAULT NULL, `additional_information` varchar(4096) DEFAULT NULL, `autoapprove` bit(1) DEFAULT NULL, PRIMARY KEY (`client_id`))
CREATE TABLE `m_product_loan_charge` ( `product_loan_id` bigint(20) NOT NULL, `charge_id` bigint(20) NOT NULL, PRIMARY KEY (`product_loan_id`,`charge_id`), KEY `charge_id` (`charge_id`), CONSTRAINT `m_product_loan_charge_ibfk_1` FOREIGN KEY (`charge_id`) REFERENCES `m_charge` (`id`), CONSTRAINT `m_product_loan_charge_ibfk_2` FOREIGN KEY (`product_loan_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE `m_code_value` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_id` int(11) NOT NULL, `code_value` varchar(100) DEFAULT NULL, `order_position` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_value` (`code_id`,`code_value`), KEY `FKCFCEA42640BE071Z` (`code_id`), CONSTRAINT `FKCFCEA42640BE071Z` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
CREATE TABLE `m_loan_recalculation_details` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_id` BIGINT(20) NOT NULL,	`compound_type_enum` SMALLINT(5) NOT NULL,	`reschedule_strategy_enum` SMALLINT(5) NOT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_m_loan_m_loan_recalculation_details` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_fund` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(255) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `fund_name_org` (`name`), UNIQUE KEY `fund_externalid_org` (`external_id`))
update m_loan_transaction set interest_portion_derived=amount  where transaction_type_enum=11
CREATE TABLE IF NOT EXISTS `m_hook_schema` ( `id` smallint(6) NOT NULL AUTO_INCREMENT, `hook_template_id` smallint(6) NOT NULL, `field_type` varchar(45) NOT NULL, `field_name` varchar(100) NOT NULL, `placeholder` varchar(100) DEFAULT NULL, `optional` tinyint(3) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `fk_hook_template_id_idx` (`hook_template_id`), CONSTRAINT `fk_hook_template_id` FOREIGN KEY (`hook_template_id`) REFERENCES `m_hook_templates` (`id`))
CREATE TABLE IF NOT EXISTS `m_provision_category` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `category_name` varchar(100) NOT NULL, `description` varchar(300) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `category_name` (`category_name`))
CREATE TABLE IF NOT EXISTS `m_tellers` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `office_id` bigint(20) NOT NULL, `debit_account_id` bigint(20) DEFAULT NULL, `credit_account_id` bigint(20) DEFAULT NULL, `name` varchar(50) NOT NULL, `description` varchar(100) DEFAULT NULL, `valid_from` date DEFAULT NULL, `valid_to` date DEFAULT NULL, `state` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `m_tellers_name_unq` (`name`), KEY `IK_m_tellers_m_office` (`office_id`), KEY `FK_m_tellers_gl_account_debit_account_id` (`debit_account_id`), KEY `FK_m_tellers_gl_account_credit_account_id` (`credit_account_id`), CONSTRAINT `FK_m_tellers_gl_account_credit_account_id` FOREIGN KEY (`credit_account_id`) REFERENCES `acc_gl_account` (`id`), CONSTRAINT `FK_m_tellers_gl_account_debit_account_id` FOREIGN KEY (`debit_account_id`) REFERENCES `acc_gl_account` (`id`), CONSTRAINT `FK_m_tellers_m_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_client_non_person` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`client_id` BIGINT(20) NOT NULL UNIQUE,	`constitution_cv_id` INT(11) NOT NULL,	`incorp_no` varchar(50),	`incorp_validity_till` DATETIME,	`main_business_line_cv_id` INT(11),	`remarks` varchar(150),	PRIMARY KEY (`id`),	INDEX `FK_client_id` (`client_id`),		CONSTRAINT `FK_client_id` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE IF NOT EXISTS `m_entity_to_entity_access` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `entity_type` varchar(50) NOT NULL, `entity_id` bigint(20) NOT NULL, `access_type_code_value_id` int(11) NOT NULL, `second_entity_type` varchar(50) NOT NULL, `second_entity_id` bigint(20) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `id_uniq_m_entity_to_entity_access` (`entity_type`,`entity_id`,`access_type_code_value_id`,`second_entity_type`,`second_entity_id`), KEY `IDX_OFFICE` (`entity_type`,`entity_id`), KEY `FK_access_type_code_m_code_value` (`access_type_code_value_id`), CONSTRAINT `FK_access_type_code_m_code_value` FOREIGN KEY (`access_type_code_value_id`) REFERENCES `m_code_value` (`id`))
select id from c_external_service where name = 'SMTP_Email_Account');
update m_loan_transaction set transaction_type_enum=10  where transaction_type_enum=11
CREATE TABLE IF NOT EXISTS `m_product_loan_variations_borrower_cycle` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_product_id` bigint(20) NOT NULL DEFAULT '0', `borrower_cycle_number` int(3) NOT NULL DEFAULT '0', `value_condition` int(1) NOT NULL DEFAULT '0', `param_type` int(1) NOT NULL DEFAULT '0', `default_value` decimal(19,6) NOT NULL DEFAULT '0.000000', `max_value` decimal(19,6) DEFAULT NULL, `min_value` decimal(19,6) DEFAULT NULL, PRIMARY KEY (`id`), KEY `borrower_cycle_loan_product_FK` (`loan_product_id`), CONSTRAINT `borrower_cycle_loan_product_FK` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE IF NOT EXISTS `stretchy_parameter` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parameter_name` varchar(45) NOT NULL, `parameter_variable` varchar(45) DEFAULT NULL, `parameter_label` varchar(45) NOT NULL, `parameter_displayType` varchar(45) NOT NULL, `parameter_FormatType` varchar(10) NOT NULL, `parameter_default` varchar(45) NOT NULL, `special` varchar(1) DEFAULT NULL, `selectOne` varchar(1) DEFAULT NULL, `selectAll` varchar(1) DEFAULT NULL, `parameter_sql` text, `parent_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_UNIQUE` (`parameter_name`), KEY `fk_stretchy_parameter_001_idx` (`parent_id`), CONSTRAINT `fk_stretchy_parameter_001` FOREIGN KEY (`parent_id`) REFERENCES `stretchy_parameter` (`id`))
CREATE TABLE IF NOT EXISTS `m_savings_account_interest_rate_chart` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_id` bigint(20) NOT NULL, `name` varchar(100) DEFAULT NULL, `description` varchar(200) DEFAULT NULL, `from_date` date NOT NULL, `end_date` date DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKSAIRC00000000000001` (`savings_account_id`), CONSTRAINT `FKSAIRC00000000000001` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
update m_savings_product set short_name=concat where short_name is null
CREATE TABLE `x_registered_table` ( `registered_table_name` varchar(50) NOT NULL, `application_table_name` varchar(50) NOT NULL, PRIMARY KEY (`registered_table_name`))
CREATE TABLE IF NOT EXISTS `m_payment_detail` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `payment_type_id` int(11) DEFAULT NULL, `account_number` varchar(100) DEFAULT NULL, `check_number` varchar(100) DEFAULT NULL, `receipt_number` varchar(100) DEFAULT NULL, `bank_number` varchar(100) DEFAULT NULL, `routing_code` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_payment_detail_m_payment_type` (`payment_type_id`), CONSTRAINT `FK_m_payment_detail_m_payment_type` FOREIGN KEY (`payment_type_id`) REFERENCES `m_payment_type` (`id`))
CREATE TABLE `acc_gl_closure` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `office_id` bigint(20) NOT NULL, `closing_date` date NOT NULL, `is_deleted` int(20) NOT NULL DEFAULT '0', `createdby_id` bigint(20) DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `comments` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `office_id_closing_date` (`office_id`,`closing_date`), KEY `FK_acc_gl_closure_m_office` (`office_id`), KEY `FK_acc_gl_closure_m_appuser` (`createdby_id`), KEY `FK_acc_gl_closure_m_appuser_2` (`lastmodifiedby_id`), CONSTRAINT `FK_acc_gl_closure_m_appuser` FOREIGN KEY (`createdby_id`) REFERENCES `m_appuser` (`id`), CONSTRAINT `FK_acc_gl_closure_m_appuser_2` FOREIGN KEY (`lastmodifiedby_id`) REFERENCES `m_appuser` (`id`), CONSTRAINT `FK_acc_gl_closure_m_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `oauth_access_token` ( `token_id` varchar(256) DEFAULT NULL, `token` blob, `authentication_id` varchar(256) DEFAULT NULL, `user_name` varchar(256) DEFAULT NULL, `client_id` varchar(256) DEFAULT NULL, `authentication` blob, `refresh_token` varchar(256) DEFAULT NULL)
CREATE TABLE `stretchy_report` ( `report_id` int(11) NOT NULL AUTO_INCREMENT, `report_name` varchar(100) NOT NULL, `report_type` varchar(20) NOT NULL, `report_subtype` varchar(20) DEFAULT NULL, `report_category` varchar(45) DEFAULT NULL, `report_sql` text, `description` text, `core_report` tinyint(1) DEFAULT '0', `use_report` tinyint(1) DEFAULT '0', PRIMARY KEY (`report_id`), UNIQUE KEY `report_name_UNIQUE` (`report_name`))
CREATE TABLE `m_organisation_currency` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(3) NOT NULL, `decimal_places` smallint(5) NOT NULL, `name` varchar(50) NOT NULL, `display_symbol` varchar(10) DEFAULT NULL, `internationalized_name_code` varchar(50) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_interest_incentives` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`interest_rate_slab_id` BIGINT(20) NOT NULL,	`entiry_type` SMALLINT(2) NOT NULL,	`attribute_name` SMALLINT(2) NOT NULL,	`condition_type` SMALLINT(2) NOT NULL,	`attribute_value` VARCHAR(50) NOT NULL,	`incentive_type` SMALLINT(2) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_interest_incentives_m_interest_rate_slab` (`interest_rate_slab_id`),	CONSTRAINT `FK_m_interest_incentives_m_interest_rate_slab` FOREIGN KEY (`interest_rate_slab_id`) REFERENCES `m_interest_rate_slab` (`id`))
CREATE TABLE `m_group_client` ( `group_id` bigint(20) NOT NULL, `client_id` bigint(20) NOT NULL, PRIMARY KEY (`group_id`,`client_id`), KEY `client_id` (`client_id`), CONSTRAINT `m_group_client_ibfk_1` FOREIGN KEY (`group_id`) REFERENCES `m_group` (`id`), CONSTRAINT `m_group_client_ibfk_2` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
update m_product_loan set short_name=concat where short_name is null
SELECT journalEntry FROM JournalEntry journalEntry where journalEntry.glAccount.id= :glAccountId
CREATE TABLE `m_code_value` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_id` int(11) NOT NULL, `code_value` varchar(100) DEFAULT NULL, `order_position` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_value` (`code_id`,`code_value`), KEY `FKCFCEA42640BE071Z` (`code_id`), CONSTRAINT `FKCFCEA42640BE071Z` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
CREATE TABLE IF NOT EXISTS `job_run_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `job_id` bigint(20) NOT NULL, `version` bigint(20) NOT NULL, `start_time` datetime NOT NULL, `end_time` datetime NOT NULL, `status` varchar(10) CHARACTER SET latin1 NOT NULL, `error_message` text, `trigger_type` varchar(25) NOT NULL, `error_log` text, PRIMARY KEY (`id`), KEY `scheduledjobsFK` (`job_id`), CONSTRAINT `scheduledjobsFK` FOREIGN KEY (`job_id`) REFERENCES `job` (`id`))
select id from m_loan_transaction where loan_id = ?)");
CREATE TABLE `ref_loan_transaction_processing_strategy` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(100) DEFAULT NULL, `name` varchar(255) DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `ltp_strategy_code` (`code`))
CREATE TABLE IF NOT EXISTS `m_staff_assignment_history` (`id` bigint(20) NOT NULL AUTO_INCREMENT,`centre_id` bigint(20) DEFAULT NULL,`staff_id` bigint(20) NOT NULL,`start_date` date NOT NULL,`end_date` date DEFAULT NULL,`createdby_id` bigint(20) DEFAULT NULL,`created_date` datetime DEFAULT NULL,`lastmodified_date` datetime DEFAULT NULL,`lastmodifiedby_id` bigint(20) DEFAULT NULL,PRIMARY KEY (`id`),KEY `FK_m_staff_assignment_history_centre_id_m_group` (`centre_id`),KEY `FK_m_staff_assignment_history_m_staff` (`staff_id`),CONSTRAINT `FK_m_staff_assignment_history_centre_id_m_group` FOREIGN KEY (`centre_id`) REFERENCES `m_group` (`id`),CONSTRAINT `FK_m_staff_assignment_history_m_staff` FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE IF NOT EXISTS `m_interest_incentives` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `interest_rate_slab_id` bigint(20) NOT NULL, `entiry_type` smallint(2) NOT NULL, `attribute_name` smallint(2) NOT NULL, `condition_type` smallint(2) NOT NULL, `attribute_value` varchar(50) NOT NULL, `incentive_type` smallint(2) NOT NULL, `amount` decimal(19,6) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_interest_incentives_m_interest_rate_slab` (`interest_rate_slab_id`), CONSTRAINT `FK_m_interest_incentives_m_interest_rate_slab` FOREIGN KEY (`interest_rate_slab_id`) REFERENCES `m_interest_rate_slab` (`id`))
CREATE TABLE IF NOT EXISTS `m_hook_registered_events` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `hook_id` bigint(20) NOT NULL, `entity_name` varchar(45) NOT NULL, `action_name` varchar(45) NOT NULL, PRIMARY KEY (`id`), KEY `fk_hook_id_idx` (`hook_id`), CONSTRAINT `fk_hook_idc` FOREIGN KEY (`hook_id`) REFERENCES `m_hook` (`id`))
CREATE TABLE `stretchy_report_parameter_tmp` ( `id` int(11) NOT NULL AUTO_INCREMENT, `report_id` int(11) NOT NULL, `parameter_id` int(11) NOT NULL, `report_parameter_name` varchar(45) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `report_id_name_UNIQUE` (`report_id`,`report_parameter_name`))
CREATE TABLE IF NOT EXISTS `m_template_m_templatemappers` ( `m_template_id` bigint(20) NOT NULL, `mappers_id` bigint(20) NOT NULL, UNIQUE KEY `mappers_id` (`mappers_id`), KEY `mappers_id_2` (`mappers_id`), KEY `m_template_id` (`m_template_id`))
select id from stretchy_report where report_name = 'Client Savings Summary'), (select id from stretchy_parameter where parameter_name='OfficeIdSelectOne'), 'selectOffice');
CREATE TABLE `m_group_level` (`id` INT(11) NOT NULL AUTO_INCREMENT,`parent_id` INT(11) NULL DEFAULT NULL,`super_parent` TINYINT(1) NOT NULL,`level_name` VARCHAR(100) NOT NULL,`recursable` TINYINT(1) NOT NULL,`can_have_clients` TINYINT(1) NOT NULL,PRIMARY KEY (`id`),INDEX `Parent_levelId_reference` (`parent_id`),CONSTRAINT `Parent_levelId_reference` FOREIGN KEY (`parent_id`) REFERENCES `m_group_level` (`id`))
CREATE TABLE IF NOT EXISTS `m_account_transfer_standing_instructions` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(250) NOT NULL, `account_transfer_details_id` bigint(20) NOT NULL, `priority` tinyint(2) NOT NULL, `status` tinyint(2) NOT NULL, `instruction_type` tinyint(2) NOT NULL, `amount` decimal(19,6) DEFAULT NULL, `valid_from` date NOT NULL, `valid_till` date DEFAULT NULL, `recurrence_type` tinyint(1) NOT NULL, `recurrence_frequency` smallint(5) DEFAULT NULL, `recurrence_interval` smallint(5) DEFAULT NULL, `recurrence_on_day` smallint(2) DEFAULT NULL, `recurrence_on_month` smallint(2) DEFAULT NULL, `last_run_date` date DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`), KEY `FK_m_standing_instructions_account_transfer_details` (`account_transfer_details_id`), CONSTRAINT `FK_m_standing_instructions_account_transfer_details` FOREIGN KEY (`account_transfer_details_id`) REFERENCES `m_account_transfer_details` (`id`))
select * from `" + dataTableName + "` where " + getFKField(appTable) + " = 
update m_permission set grouping = configuration  where entity_name = report
CREATE TABLE IF NOT EXISTS `m_payment_detail` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `payment_type_id` int(11) DEFAULT NULL, `account_number` varchar(100) DEFAULT NULL, `check_number` varchar(100) DEFAULT NULL, `receipt_number` varchar(100) DEFAULT NULL, `bank_number` varchar(100) DEFAULT NULL, `routing_code` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_payment_detail_m_code_value` (`payment_type_id`), CONSTRAINT `FK_m_payment_detail_m_payment_type` FOREIGN KEY (`payment_type_id`) REFERENCES `m_payment_type` (`id`))
CREATE TABLE IF NOT EXISTS `m_hook_templates` ( `id` smallint(6) NOT NULL AUTO_INCREMENT, `name` varchar(45) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_calendar_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `calendar_id` bigint(20) NOT NULL, `title` varchar(70) NOT NULL, `description` varchar(100) DEFAULT NULL, `location` varchar(50) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `duration` smallint(6) DEFAULT NULL, `calendar_type_enum` smallint(5) NOT NULL, `repeating` tinyint(1) NOT NULL DEFAULT '0', `recurrence` varchar(100) DEFAULT NULL, `remind_by_enum` smallint(5) DEFAULT NULL, `first_reminder` smallint(11) DEFAULT NULL, `second_reminder` smallint(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_calendar_m_calendar_history` (`calendar_id`), CONSTRAINT `FK_m_calendar_m_calendar_history` FOREIGN KEY (`calendar_id`) REFERENCES `m_calendar` (`id`))
CREATE TABLE `m_office` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `parent_id` bigint(20) DEFAULT NULL, `hierarchy` varchar(100) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, `name` varchar(50) NOT NULL, `opening_date` date NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_org` (`name`), UNIQUE KEY `externalid_org` (`external_id`), KEY `FK2291C477E2551DCC` (`parent_id`), CONSTRAINT `FK2291C477E2551DCC` FOREIGN KEY (`parent_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `stretchy_parameter` ( `parameter_id` int(11) NOT NULL AUTO_INCREMENT, `parameter_name` varchar(45) NOT NULL, `parameter_variable` varchar(45) DEFAULT NULL, `parameter_label` varchar(45) NOT NULL, `parameter_displayType` varchar(45) NOT NULL, `parameter_FormatType` varchar(10) NOT NULL, `parameter_default` varchar(45) NOT NULL, `special` varchar(1) DEFAULT NULL, `selectOne` varchar(1) DEFAULT NULL, `selectAll` varchar(1) DEFAULT NULL, `parameter_sql` text, `parent_parameter_id` int(11) DEFAULT NULL, PRIMARY KEY (`parameter_id`), UNIQUE KEY `name_UNIQUE` (`parameter_name`), KEY `fk_stretchy_parameter_0001_idx` (`parent_parameter_id`), CONSTRAINT `fk_stretchy_parameter_0001` FOREIGN KEY (`parent_parameter_id`) REFERENCES `stretchy_parameter` (`parameter_id`))
CREATE TABLE IF NOT EXISTS `acc_gl_account` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(200) NOT NULL, `parent_id` bigint(20) DEFAULT NULL, `hierarchy` varchar(50) DEFAULT NULL, `gl_code` varchar(45) NOT NULL, `disabled` tinyint(1) NOT NULL DEFAULT '0', `manual_journal_entries_allowed` tinyint(1) NOT NULL DEFAULT '1', `account_usage` tinyint(1) NOT NULL DEFAULT '2', `classification_enum` smallint(5) NOT NULL, `tag_id` int(11) DEFAULT NULL, `description` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `acc_gl_code` (`gl_code`), KEY `FK_ACC_0000000001` (`parent_id`), KEY `FKGLACC000000002` (`tag_id`), CONSTRAINT `FKGLACC000000002` FOREIGN KEY (`tag_id`) REFERENCES `m_code_value` (`id`), CONSTRAINT `FK_ACC_0000000001` FOREIGN KEY (`parent_id`) REFERENCES `acc_gl_account` (`id`))
CREATE TABLE `stretchy_parameter_tmp` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parameter_name` varchar(45) NOT NULL, `parameter_variable` varchar(45) DEFAULT NULL, `parameter_label` varchar(45) NOT NULL, `parameter_displayType` varchar(45) NOT NULL, `parameter_FormatType` varchar(10) NOT NULL, `parameter_default` varchar(45) NOT NULL, `special` varchar(1) DEFAULT NULL, `selectOne` varchar(1) DEFAULT NULL, `selectAll` varchar(1) DEFAULT NULL, `parameter_sql` text, `parent_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_UNIQUE` (`parameter_name`))
CREATE TABLE `acc_product_mapping` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `gl_account_id` bigint(20) DEFAULT NULL, `product_id` bigint(20) DEFAULT NULL, `product_type` smallint(5) DEFAULT NULL, `financial_account_type` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_group_roles` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`client_id` BIGINT(20) NULL DEFAULT NULL,	`group_id` BIGINT(20) NULL DEFAULT NULL,	`role_cv_id` INT(11) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	INDEX `FKGroupRoleClientId` (`client_id`),	INDEX `FKGroupRoleGroupId` (`group_id`),	INDEX `FK_grouprole_m_codevalue` (`role_cv_id`),	UNIQUE INDEX `UNIQUE_GROUP_ROLES` (`client_id`, `group_id`, `role_cv_id`),	CONSTRAINT `FKGroupRoleClientId` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`),	CONSTRAINT `FKGroupRoleGroupId` FOREIGN KEY (`group_id`) REFERENCES `m_group` (`id`),	CONSTRAINT `FK_grouprole_m_codevalue` FOREIGN KEY (`role_cv_id`) REFERENCES `m_code_value` (`id`))
CREATE TABLE IF NOT EXISTS `m_floating_rates_periods` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `floating_rates_id` bigint(20) NOT NULL, `from_date` datetime NOT NULL, `interest_rate` decimal(19,6) NOT NULL, `is_differential_to_base_lending_rate` bit(1) NOT NULL DEFAULT b'0', `is_active` bit(1) NOT NULL DEFAULT b'1', `createdby_id` bigint(20) NOT NULL, `created_date` datetime NOT NULL, `lastmodifiedby_id` bigint(20) NOT NULL, `lastmodified_date` datetime NOT NULL, PRIMARY KEY (`id`), KEY `FK_mappings_m_floating_rates` (`floating_rates_id`), CONSTRAINT `FK_mappings_m_floating_rates` FOREIGN KEY (`floating_rates_id`) REFERENCES `m_floating_rates` (`id`))
CREATE TABLE `m_appuser` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', `office_id` bigint(20) DEFAULT NULL, `username` varchar(100) NOT NULL, `firstname` varchar(100) NOT NULL, `lastname` varchar(100) NOT NULL, `password` varchar(255) NOT NULL, `email` varchar(100) NOT NULL, `firsttime_login_remaining` bit(1) NOT NULL, `nonexpired` bit(1) NOT NULL, `nonlocked` bit(1) NOT NULL, `nonexpired_credentials` bit(1) NOT NULL, `enabled` bit(1) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `username_org` (`username`), KEY `FKB3D587CE0DD567A` (`office_id`), CONSTRAINT `FKB3D587CE0DD567A` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE IF NOT EXISTS `m_guarantor_funding_details` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `guarantor_id` bigint(20) NOT NULL, `account_associations_id` bigint(20) NOT NULL, `amount` decimal(19,6) NOT NULL, `amount_released_derived` decimal(19,6) DEFAULT NULL, `amount_remaining_derived` decimal(19,6) DEFAULT NULL, `amount_transfered_derived` decimal(19,6) DEFAULT NULL, `status_enum` smallint(3) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_guarantor_fund_details_m_guarantor` (`guarantor_id`), KEY `FK_m_guarantor_fund_details_account_associations_id` (`account_associations_id`), CONSTRAINT `FK_m_guarantor_fund_details_account_associations_id` FOREIGN KEY (`account_associations_id`) REFERENCES `m_portfolio_account_associations` (`id`), CONSTRAINT `FK_m_guarantor_fund_details_m_guarantor` FOREIGN KEY (`guarantor_id`) REFERENCES `m_guarantor` (`id`))
CREATE TABLE `extra_client_details` ( `client_id` bigint(20) NOT NULL, `Business Description` varchar(100) DEFAULT NULL, `Years in Business` int(11) DEFAULT NULL, `Gender_cd` int(11) DEFAULT NULL, `Education_cv` varchar(60) DEFAULT NULL, `Next Visit` date DEFAULT NULL, `Highest Rate Paid` decimal(19,6) DEFAULT NULL, `Comment` text, PRIMARY KEY (`client_id`), CONSTRAINT `FK_latam_extra_client_details` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE `m_deposit_account_on_hold_transaction` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`savings_account_id` BIGINT(20) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	`transaction_type_enum` SMALLINT(1) NOT NULL,	`transaction_date` DATE NOT NULL,	`is_reversed` TINYINT(1) NOT NULL DEFAULT '0',	PRIMARY KEY (`id`),	CONSTRAINT `FK_deposit_on_hold_transaction_m_savings_account` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE IF NOT EXISTS `m_survey_lookup_tables` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `survey_id` bigint(20) NOT NULL, `a_key` varchar(255) NOT NULL, `description` int(4) DEFAULT NULL, `value_from` int(4) NOT NULL, `value_to` int(4) NOT NULL, `score` decimal(5,2) NOT NULL, PRIMARY KEY (`id`), KEY `survey_id` (`survey_id`), CONSTRAINT `m_survey_lookup_tables_ibfk_1` FOREIGN KEY (`survey_id`) REFERENCES `m_surveys` (`id`))
CREATE TABLE `c_external_service` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`name` VARCHAR(100) NULL DEFAULT NULL,		PRIMARY KEY (`id`),	UNIQUE KEY `name_UNIQUE` (`name`))
CREATE TABLE `m_role_permission` ( `role_id` bigint(20) NOT NULL, `permission_id` bigint(20) NOT NULL, PRIMARY KEY (`role_id`,`permission_id`), KEY `FK8DEDB04815CEC7AB` (`role_id`), KEY `FK8DEDB048103B544B` (`permission_id`), CONSTRAINT `FK8DEDB048103B544B` FOREIGN KEY (`permission_id`) REFERENCES `m_permission` (`id`), CONSTRAINT `FK8DEDB04815CEC7AB` FOREIGN KEY (`role_id`) REFERENCES `m_role` (`id`))
select id from stretchy_report where report_name = 'Client Savings Summary'), (select id from stretchy_parameter where parameter_name='endDateSelect'), 'toDate');
CREATE TABLE `m_savings_account_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_id` bigint(20) NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `transaction_date` date NOT NULL, `amount` decimal(19,6) NOT NULL, `is_reversed` tinyint(1) NOT NULL, `running_balance_derived` decimal(19,6) DEFAULT NULL, `balance_number_of_days_derived` int(11) DEFAULT NULL, `balance_end_date_derived` date DEFAULT NULL, `cumulative_balance_derived` decimal(19,6) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKSAT0000000001` (`savings_account_id`), CONSTRAINT `FKSAT0000000001` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE `m_code` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_name` varchar(100) DEFAULT NULL, `is_system_defined` TINYINT(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_name` (`code_name`))
CREATE TABLE IF NOT EXISTS `m_loan_overdue_installment_charge` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_charge_id` bigint(20) NOT NULL, `loan_schedule_id` bigint(20) NOT NULL, `frequency_number` int(10) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_loan_overdue_installment_charge_m_loan_charge` (`loan_charge_id`), KEY `FK_m_loan_overdue_installment_charge_m_loan_repayment_schedule` (`loan_schedule_id`), CONSTRAINT `FK_m_loan_overdue_installment_charge_m_loan_charge` FOREIGN KEY (`loan_charge_id`) REFERENCES `m_loan_charge` (`id`), CONSTRAINT `FK_m_loan_overdue_installment_charge_m_loan_repayment_schedule` FOREIGN KEY (`loan_schedule_id`) REFERENCES `m_loan_repayment_schedule` (`id`))
CREATE TABLE IF NOT EXISTS `m_office_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `from_office_id` bigint(20) DEFAULT NULL, `to_office_id` bigint(20) DEFAULT NULL, `currency_code` varchar(3) NOT NULL, `currency_digits` int(11) NOT NULL, `transaction_amount` decimal(19,6) NOT NULL, `transaction_date` date NOT NULL, `description` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK1E37728B93C6C1B6` (`to_office_id`), KEY `FK1E37728B783C5C25` (`from_office_id`), CONSTRAINT `FK1E37728B783C5C25` FOREIGN KEY (`from_office_id`) REFERENCES `m_office` (`id`), CONSTRAINT `FK1E37728B93C6C1B6` FOREIGN KEY (`to_office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_staff` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `is_loan_officer` tinyint(1) NOT NULL DEFAULT '0', `office_id` bigint(20) DEFAULT NULL, `firstname` varchar(50) DEFAULT NULL, `lastname` varchar(50) DEFAULT NULL, `display_name` varchar(100) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `display_name` (`display_name`), KEY `FK_m_staff_m_office` (`office_id`), CONSTRAINT `FK_m_staff_m_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
select id from stretchy_report where report_name = 'Collection Report'),(select id from stretchy_parameter where parameter_name='OfficeIdSelectOne'),'branch');
CREATE TABLE `m_savings_account_charge_paid_by` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`savings_account_transaction_id` BIGINT(20) NOT NULL,	`savings_account_charge_id` BIGINT(20) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	PRIMARY KEY (`id`),	INDEX `FK__m_savings_account_transaction` (`savings_account_transaction_id`),	INDEX `FK__m_savings_account_charge` (`savings_account_charge_id`),	CONSTRAINT `FK__m_savings_account_charge` FOREIGN KEY (`savings_account_charge_id`) REFERENCES `m_savings_account_charge` (`id`),	CONSTRAINT `FK__m_savings_account_transaction` FOREIGN KEY (`savings_account_transaction_id`) REFERENCES `m_savings_account_transaction` (`id`))
select id from stretchy_report where report_name = 'Client Saving Transactions'), (select id from stretchy_parameter where parameter_name='endDateSelect'), 'endDate');
CREATE TABLE IF NOT EXISTS `m_interest_rate_slab` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `interest_rate_chart_id` bigint(20) NOT NULL, `description` varchar(200) DEFAULT NULL, `period_type_enum` smallint(5) NOT NULL DEFAULT '1', `from_period` int(11) NOT NULL DEFAULT '0', `to_period` int(11) DEFAULT NULL, `amount_range_from` decimal(19,6) DEFAULT NULL, `amount_range_to` decimal(19,6) DEFAULT NULL, `annual_interest_rate` decimal(19,6) NOT NULL, `currency_code` varchar(3) NOT NULL, PRIMARY KEY (`id`), KEY `FKIRS00000000000001` (`interest_rate_chart_id`), CONSTRAINT `FKIRS00000000000001` FOREIGN KEY (`interest_rate_chart_id`) REFERENCES `m_interest_rate_chart` (`id`))
CREATE TABLE IF NOT EXISTS `c_cache` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `cache_type_enum` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `c_external_service_properties` ( `name` varchar(150) NOT NULL, `value` varchar(250) DEFAULT NULL, `external_service_id` bigint(20) NOT NULL, KEY `FK_c_external_service_properties_c_external_service` (`external_service_id`), CONSTRAINT `FK_c_external_service_properties_c_external_service` FOREIGN KEY (`external_service_id`) REFERENCES `c_external_service` (`id`))
select id from stretchy_report where report_name = 'Disbursal Report'),(select id from stretchy_parameter where parameter_name='endDateSelect'),'toDate');
CREATE TABLE `m_role` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` varchar(500) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unq_name` (`name`))
CREATE TABLE IF NOT EXISTS `job_run_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `job_id` bigint(20) NOT NULL, `version` bigint(20) NOT NULL, `start_time` datetime NOT NULL, `end_time` datetime NOT NULL, `status` varchar(10) CHARACTER SET latin1 NOT NULL, `error_message` text, `trigger_type` varchar(25) NOT NULL, `error_log` text, PRIMARY KEY (`id`), KEY `scheduledjobsFK` (`job_id`), CONSTRAINT `scheduledjobsFK` FOREIGN KEY (`job_id`) REFERENCES `job` (`id`))
CREATE TABLE IF NOT EXISTS `m_hook` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `template_id` SMALLINT(6) NOT NULL, `is_active` SMALLINT(3) NOT NULL DEFAULT 1, `name` VARCHAR(45) NOT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`), INDEX `fk_template_id_idx` (`template_id` ASC), CONSTRAINT `fk_template_id` FOREIGN KEY (`template_id`) REFERENCES `m_hook_templates` (`id`))
CREATE TABLE `m_group` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `office_id` bigint(20) NOT NULL, `name` varchar(100) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`), UNIQUE KEY `external_id` (`external_id`), KEY `office_id` (`office_id`), CONSTRAINT `m_group_ibfk_1` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `extra_loan_details` ( `loan_id` bigint(20) NOT NULL, `Business Description` varchar(100) DEFAULT NULL, `Years in Business` int(11) DEFAULT NULL, `Gender_cd` int(11) DEFAULT NULL, `Education_cv` varchar(60) DEFAULT NULL, `Next Visit` date DEFAULT NULL, `Highest Rate Paid` decimal(19,6) DEFAULT NULL, `Comment` text, PRIMARY KEY (`loan_id`), CONSTRAINT `FK_latam_extra_loan_details` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_role_permission` ( `role_id` bigint(20) NOT NULL, `permission_id` bigint(20) NOT NULL, PRIMARY KEY (`role_id`,`permission_id`), KEY `FK8DEDB04815CEC7AB` (`role_id`), KEY `FK8DEDB048103B544B` (`permission_id`), CONSTRAINT `FK8DEDB048103B544B` FOREIGN KEY (`permission_id`) REFERENCES `m_permission` (`id`), CONSTRAINT `FK8DEDB04815CEC7AB` FOREIGN KEY (`role_id`) REFERENCES `m_role` (`id`))
CREATE TABLE `acc_accounting_rule` (	`id` BIGINT(20) NOT NULL,	`name` VARCHAR(100) NULL DEFAULT NULL,	`office_id` BIGINT(20) NULL DEFAULT NULL,	`debit_account_id` BIGINT(20) NOT NULL,	`credit_account_id` BIGINT(20) NOT NULL,	`description` VARCHAR(500) NULL DEFAULT NULL,	`system_defined` TINYINT(1) NOT NULL DEFAULT '0',	PRIMARY KEY (`id`),	UNIQUE INDEX `accounting_rule_name_unique` (`name`),	INDEX `FK_acc_accounting_rule_acc_gl_account_debit` (`debit_account_id`),	INDEX `FK_acc_accounting_rule_acc_gl_account_credit` (`credit_account_id`),	INDEX `FK_acc_accounting_rule_m_office` (`office_id`),	CONSTRAINT `FK_acc_accounting_rule_acc_gl_account_credit` FOREIGN KEY (`credit_account_id`) REFERENCES `acc_gl_account` (`id`),	CONSTRAINT `FK_acc_accounting_rule_acc_gl_account_debit` FOREIGN KEY (`debit_account_id`) REFERENCES `acc_gl_account` (`id`),	CONSTRAINT `FK_acc_accounting_rule_m_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_product_loan_guarantee_details` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_product_id` BIGINT(20) NOT NULL,	`mandatory_guarantee` DECIMAL(19,5) NOT NULL,	`minimum_guarantee_from_own_funds` DECIMAL(19,5) NULL,	`minimum_guarantee_from_guarantor_funds` DECIMAL(19,5) NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_guarantee_details_loan_product` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_loan_transaction_repayment_schedule_mapping` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_transaction_id` bigint(20) NOT NULL, `loan_repayment_schedule_id` bigint(20) NOT NULL, `amount` decimal(19,6) NOT NULL, `principal_portion_derived` decimal(19,6) DEFAULT NULL, `interest_portion_derived` decimal(19,6) DEFAULT NULL, `fee_charges_portion_derived` decimal(19,6) DEFAULT NULL, `penalty_charges_portion_derived` decimal(19,6) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_mappings_m_loan_transaction` (`loan_transaction_id`), KEY `FK_mappings_m_loan_repayment_schedule` (`loan_repayment_schedule_id`), CONSTRAINT `FK_mappings_m_loan_repayment_schedule` FOREIGN KEY (`loan_repayment_schedule_id`) REFERENCES `m_loan_repayment_schedule` (`id`), CONSTRAINT `FK_mappings_m_loan_transaction` FOREIGN KEY (`loan_transaction_id`) REFERENCES `m_loan_transaction` (`id`))
CREATE TABLE `m_savings_product` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` varchar(500) NOT NULL, `currency_code` varchar(3) NOT NULL, `currency_digits` smallint(5) NOT NULL, `nominal_interest_rate_per_period` decimal(19,6) NOT NULL, `nominal_interest_rate_period_frequency_enum` smallint(5) NOT NULL, `min_required_opening_balance` decimal(19,6) DEFAULT NULL, `lockin_period_frequency` decimal(19,6) DEFAULT NULL, `lockin_period_frequency_enum` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `sp_unq_name` (`name`))
CREATE TABLE `m_tellers` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`office_id` BIGINT(20) NOT NULL,	`debit_account_id` BIGINT(20),	`credit_account_id` BIGINT(20),	`name` VARCHAR(50) NOT NULL,	`description` VARCHAR(100),	`valid_from` DATE,	`valid_to` DATE,	`state` SMALLINT(5),	PRIMARY KEY (`id`),	UNIQUE INDEX `m_tellers_name_unq` (`name`),	INDEX `IK_m_tellers_m_office` (`office_id`),	CONSTRAINT `FK_m_tellers_m_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`),	CONSTRAINT `FK_m_tellers_gl_account_debit_account_id` FOREIGN KEY (`debit_account_id`) REFERENCES `acc_gl_account` (`id`),	CONSTRAINT `FK_m_tellers_gl_account_credit_account_id` FOREIGN KEY (`credit_account_id`) REFERENCES `acc_gl_account` (`id`)	)
CREATE TABLE `m_product_loan_floating_rates` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_product_id` BIGINT(20) NOT NULL,	`floating_rates_id` BIGINT(20) NOT NULL,	`interest_rate_differential` DECIMAL(19,6) NOT NULL DEFAULT 0,	`min_differential_lending_rate` DECIMAL(19,6) NOT NULL DEFAULT 0,	`default_differential_lending_rate` DECIMAL(19,6) NOT NULL DEFAULT 0,	`max_differential_lending_rate` DECIMAL(19,6) NOT NULL DEFAULT 0,	`is_floating_interest_rate_calculation_allowed` BIT(1) NOT NULL DEFAULT 0,	PRIMARY KEY (`id`),	CONSTRAINT `FK_mappings_m_product_loan_id` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`),	CONSTRAINT `FK_mappings_m_floating_rates_id` FOREIGN KEY (`floating_rates_id`) REFERENCES `m_floating_rates` (`id`))
CREATE TABLE IF NOT EXISTS `ref_loan_transaction_processing_strategy` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(100) DEFAULT NULL, `name` varchar(255) DEFAULT NULL, `sort_order` int(4) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `ltp_strategy_code` (`code`))
CREATE TABLE `stretchy_report` ( `report_id` int(11) NOT NULL AUTO_INCREMENT, `report_name` varchar(100) NOT NULL, `report_type` varchar(20) NOT NULL, `report_subtype` varchar(20) DEFAULT NULL, `report_category` varchar(45) DEFAULT NULL, `report_sql` text, `description` text, `core_report` tinyint(1) DEFAULT '0', `use_report` tinyint(1) DEFAULT '0', PRIMARY KEY (`report_id`), UNIQUE KEY `report_name_UNIQUE` (`report_name`))
CREATE TABLE IF NOT EXISTS `x_table_column_code_mappings` ( `column_alias_name` varchar(50) NOT NULL, `code_id` int(10) NOT NULL, PRIMARY KEY (`column_alias_name`), KEY `FK_x_code_id` (`code_id`), CONSTRAINT `FK_x_code_id` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
CREATE TABLE IF NOT EXISTS `m_hook_configuration` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `hook_id` BIGINT(20) NULL, `field_type` VARCHAR(45) NOT NULL, `field_name` VARCHAR(100) NOT NULL, `field_value` VARCHAR(100) NOT NULL, PRIMARY KEY (`id`), INDEX `fk_hook_id_idx` (`hook_id` ASC), CONSTRAINT `fk_hook_id_cfg` FOREIGN KEY (`hook_id`) REFERENCES `m_hook` (`id`))
select id from stretchy_report where report_name = 'Client Loan Account Schedule'), (select id from stretchy_parameter where parameter_name='endDateSelect'), 'endDate');
CREATE TABLE IF NOT EXISTS `m_document` ( `id` int(20) NOT NULL AUTO_INCREMENT, `parent_entity_type` varchar(50) NOT NULL, `parent_entity_id` int(20) NOT NULL DEFAULT '0', `name` varchar(250) NOT NULL, `file_name` varchar(250) NOT NULL, `size` int(20) DEFAULT '0', `type` varchar(500) DEFAULT NULL, `description` varchar(1000) DEFAULT NULL, `location` varchar(500) NOT NULL DEFAULT '0', `storage_type_enum` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_loan_disbursement_detail` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_id` BIGINT(20) NOT NULL,	`expected_disburse_date` DATETIME NOT NULL,	`disbursedon_date` DATETIME NULL,	`principal` DECIMAL(19,6) NOT NULL,	`approved_principal` DECIMAL(19,6) NOT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_loan_disbursement_detail_loan_id` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_calendar_history` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`calendar_id` BIGINT(20) NOT NULL,	`title` VARCHAR(50) NOT NULL,	`description` VARCHAR(100) NULL DEFAULT NULL,	`location` VARCHAR(50) NULL DEFAULT NULL,	`start_date` DATE NOT NULL,	`end_date` DATE NULL DEFAULT NULL,	`duration` SMALLINT(6) NULL DEFAULT NULL,	`calendar_type_enum` SMALLINT(5) NOT NULL,	`repeating` TINYINT(1) NOT NULL DEFAULT '0',	`recurrence` VARCHAR(100) NULL DEFAULT NULL,	`remind_by_enum` SMALLINT(5) NULL DEFAULT NULL,	`first_reminder` SMALLINT(11) NULL DEFAULT NULL,	`second_reminder` SMALLINT(11) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_calendar_m_calendar_history` (`calendar_id`),	CONSTRAINT `FK_m_calendar_m_calendar_history` FOREIGN KEY (`calendar_id`) REFERENCES `m_calendar` (`id`))
CREATE TABLE `m_currency` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(3) NOT NULL, `decimal_places` smallint(5) NOT NULL, `display_symbol` varchar(10) DEFAULT NULL, `name` varchar(50) NOT NULL, `internationalized_name_code` varchar(50) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
CREATE TABLE IF NOT EXISTS `m_meeting` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `calendar_instance_id` bigint(20) NOT NULL, `meeting_date` date NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unique_calendar_instance_id_meeting_date` (`calendar_instance_id`,`meeting_date`), CONSTRAINT `FK_m_calendar_instance_m_meeting` FOREIGN KEY (`calendar_instance_id`) REFERENCES `m_calendar_instance` (`id`))
select s from Survey s where s.key = :key and :pointInTime between s.validFrom and s.validTo
CREATE TABLE `" + datatableName + "` (")
CREATE TABLE `r_enum_value` ( `enum_name` varchar(100) NOT NULL, `enum_id` int(11) NOT NULL, `enum_message_property` varchar(100) NOT NULL, `enum_value` varchar(100) NOT NULL, PRIMARY KEY (`enum_name`,`enum_id`), UNIQUE KEY `enum_message_property` (`enum_name`,`enum_message_property`), UNIQUE KEY `enum_value` (`enum_name`,`enum_value`))
CREATE TABLE `c_configuration` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(50) DEFAULT NULL, `enabled` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`))
Select appUser from AppUser appUser where appUser.username = :username
CREATE TABLE IF NOT EXISTS `r_enum_value` ( `enum_name` varchar(100) NOT NULL, `enum_id` int(11) NOT NULL, `enum_message_property` varchar(100) NOT NULL, `enum_value` varchar(100) NOT NULL, `enum_type` tinyint(1) NOT NULL, PRIMARY KEY (`enum_name`,`enum_id`), UNIQUE KEY `enum_message_property` (`enum_name`,`enum_message_property`), UNIQUE KEY `enum_value` (`enum_name`,`enum_value`))
CREATE TABLE `m_entity_relation` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`from_entity_type` INT(10) NOT NULL,	`to_entity_type` INT(10) NOT NULL,	`code_name` VARCHAR(50) NOT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `from_entity_type_to_entity_type_code_name` (`from_entity_type`, `to_entity_type`, `code_name`))
select id from stretchy_report where report_name = 'Savings Transactions'), (select id from stretchy_parameter where parameter_name='startDateSelect'), 'fromDate');
CREATE TABLE IF NOT EXISTS `m_cashiers` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `staff_id` bigint(20) DEFAULT NULL, `teller_id` bigint(20) DEFAULT NULL, `description` varchar(100) DEFAULT NULL, `start_date` date DEFAULT NULL, `end_date` date DEFAULT NULL, `start_time` varchar(10) DEFAULT NULL, `end_time` varchar(10) DEFAULT NULL, `full_day` tinyint(4) DEFAULT NULL, PRIMARY KEY (`id`), KEY `IK_m_cashiers_m_staff` (`staff_id`), KEY `IK_m_cashiers_m_teller` (`teller_id`), CONSTRAINT `FK_m_cashiers_m_staff` FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`), CONSTRAINT `FK_m_cashiers_m_teller` FOREIGN KEY (`teller_id`) REFERENCES `m_tellers` (`id`))
CREATE TABLE IF NOT EXISTS `x_registered_table` ( `registered_table_name` varchar(50) NOT NULL, `application_table_name` varchar(50) NOT NULL, `category` int(11) NOT NULL DEFAULT '100', PRIMARY KEY (`registered_table_name`))
CREATE TABLE IF NOT EXISTS `m_product_mix` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `product_id` bigint(20) NOT NULL, `restricted_product_id` bigint(20) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_product_mix_product_id_to_m_product_loan` (`product_id`), KEY `FK_m_product_mix_restricted_product_id_to_m_product_loan` (`restricted_product_id`), CONSTRAINT `FK_m_product_mix_product_id_to_m_product_loan` FOREIGN KEY (`product_id`) REFERENCES `m_product_loan` (`id`), CONSTRAINT `FK_m_product_mix_restricted_product_id_to_m_product_loan` FOREIGN KEY (`restricted_product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE IF NOT EXISTS `mix_xbrl_namespace` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `prefix` varchar(20) NOT NULL DEFAULT '', `url` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `UNQUE` (`prefix`))
CREATE TABLE IF NOT EXISTS `m_fund` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(255) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `fund_name_org` (`name`), UNIQUE KEY `fund_externalid_org` (`external_id`))
CREATE TABLE IF NOT EXISTS `m_client_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) NOT NULL, `office_id` bigint(20) NOT NULL, `currency_code` varchar(3) NOT NULL, `payment_detail_id` bigint(20) DEFAULT NULL, `is_reversed` tinyint(1) NOT NULL, `external_id` varchar(50) DEFAULT NULL, `transaction_date` date NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `amount` decimal(19,6) NOT NULL, `created_date` datetime NOT NULL, `appuser_id` bigint(20) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `external_id` (`external_id`), KEY `FK_m_client_transaction_m_client` (`client_id`), KEY `FK_m_client_transaction_m_appuser` (`appuser_id`), CONSTRAINT `FK_m_client_transaction_m_appuser` FOREIGN KEY (`appuser_id`) REFERENCES `m_appuser` (`id`), CONSTRAINT `FK_m_client_transaction_m_client` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE `m_holiday_office` (	`holiday_id` BIGINT(20) NOT NULL,	`office_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`holiday_id`, `office_id`),	INDEX `m_holiday_id_ibfk_1` (`holiday_id`),	INDEX `m_office_id_ibfk_2` (`office_id`),	CONSTRAINT `m_holiday_id_ibfk_1` FOREIGN KEY (`holiday_id`) REFERENCES `m_holiday` (`id`),	CONSTRAINT `m_office_id_ibfk_2` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `scheduled_jobs` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`job_name` VARCHAR(50) NOT NULL COLLATE 'latin1_swedish_ci',	`job_display_name` VARCHAR(50) NOT NULL COLLATE 'latin1_swedish_ci',	`cron_expression` VARCHAR(20) NOT NULL COLLATE 'latin1_swedish_ci',	`create_time` DATETIME NOT NULL,	`task_priority` SMALLINT(6) NOT NULL DEFAULT '5',	`group_name` VARCHAR(50) NULL DEFAULT NULL COLLATE 'latin1_swedish_ci',	`previous_run_start_time` DATETIME NULL DEFAULT NULL,	`next_run_time` DATETIME NULL DEFAULT NULL,	`trigger_key` VARCHAR(500) NULL DEFAULT NULL COLLATE 'latin1_swedish_ci',	`job_initializing_errorlog` TEXT NULL COLLATE 'latin1_swedish_ci',	`is_active` TINYINT(1) NOT NULL DEFAULT '1',	PRIMARY KEY (`id`))
select id from m_savings_account_charge sac where sac.savings_account_id=v_account_id and sac.charge_id=t_charge_id and sac.charge_time_enum=5);
UPDATE stretchy_report SET core_report=1, use_report=0  WHERE report_name in (ClientTrendsByDay,ClientTrendsByWeek,ClientTrendsByMonth,LoanTrendsByDay,LoanTrendsByWeek,LoanTrendsByMonth,Demand_Vs_Collection,Disbursal_Vs_Awaitingdisbursal)
CREATE TABLE IF NOT EXISTS `m_deposit_product_recurring_detail` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_product_id` bigint(20) NOT NULL DEFAULT '0', `recurring_deposit_type_enum` smallint(5) DEFAULT NULL, `recurring_deposit_frequency` int(11) DEFAULT NULL, `recurring_deposit_frequency_type_enum` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKDPRD00000000000001` (`savings_product_id`), CONSTRAINT `FKDPRD00000000000001` FOREIGN KEY (`savings_product_id`) REFERENCES `m_savings_product` (`id`))
CREATE TABLE IF NOT EXISTS `m_loan_recalculation_details` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `compound_type_enum` smallint(5) NOT NULL, `reschedule_strategy_enum` smallint(5) NOT NULL, `rest_frequency_type_enum` smallint(1) NOT NULL, `rest_frequency_interval` smallint(3) NOT NULL DEFAULT '0', `rest_freqency_date` date DEFAULT NULL, `compounding_frequency_type_enum` smallint(1) DEFAULT NULL, `compounding_frequency_interval` smallint(3) DEFAULT NULL, `compounding_freqency_date` date DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_loan_m_loan_recalculation_details` (`loan_id`), CONSTRAINT `FK_m_loan_m_loan_recalculation_details` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_code_value` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_id` int(11) NOT NULL, `code_value` varchar(100) DEFAULT NULL, `order_position` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_value` (`code_id`,`code_value`), KEY `FKCFCEA42640BE071Z` (`code_id`), CONSTRAINT `FKCFCEA42640BE071Z` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
select id from stretchy_report where report_name = 'Savings Transactions'), (select id from stretchy_parameter where parameter_name='selectAccount'), 'accountNo');
CREATE TABLE IF NOT EXISTS `oauth_access_token` ( `token_id` varchar(256) DEFAULT NULL, `token` blob, `authentication_id` varchar(256) DEFAULT NULL, `user_name` varchar(256) DEFAULT NULL, `client_id` varchar(256) DEFAULT NULL, `authentication` blob, `refresh_token` varchar(256) DEFAULT NULL)
CREATE TABLE `m_loan_collateral` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `type_cv_id` int(11) NOT NULL, `value` decimal(19,6) DEFAULT NULL, `description` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_collateral_m_loan` (`loan_id`), KEY `FK_collateral_code_value` (`type_cv_id`), CONSTRAINT `FK_collateral_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`), CONSTRAINT `FK_collateral_code_value` FOREIGN KEY (`type_cv_id`) REFERENCES `m_code_value` (`id`))
select id from stretchy_report where report_name = 'Client Savings Summary'), (select id from stretchy_parameter where parameter_name='startDateSelect'), 'fromDate');
CREATE TABLE IF NOT EXISTS `m_calendar` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `title` varchar(70) NOT NULL, `description` varchar(100) DEFAULT NULL, `location` varchar(50) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `duration` smallint(6) DEFAULT NULL, `calendar_type_enum` smallint(5) NOT NULL, `repeating` tinyint(1) NOT NULL DEFAULT '0', `recurrence` varchar(100) DEFAULT NULL, `remind_by_enum` smallint(5) DEFAULT NULL, `first_reminder` smallint(11) DEFAULT NULL, `second_reminder` smallint(11) DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_mandatory_savings_schedule` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_id` bigint(20) NOT NULL, `fromdate` date DEFAULT NULL, `duedate` date NOT NULL, `installment` smallint(5) NOT NULL, `deposit_amount` decimal(19,6) DEFAULT NULL, `deposit_amount_completed_derived` decimal(19,6) DEFAULT NULL, `total_paid_in_advance_derived` decimal(19,6) DEFAULT NULL, `total_paid_late_derived` decimal(19,6) DEFAULT NULL, `completed_derived` bit(1) NOT NULL, `obligations_met_on_date` date DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKMSS0000000001` (`savings_account_id`), CONSTRAINT `FKMSS0000000001` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
select 1 from x_registered_table where registered_table_name = ?)) = 1, 'true', 'false')
CREATE TABLE IF NOT EXISTS `m_entity_to_entity_mapping` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `rel_id` bigint(20) NOT NULL DEFAULT '0', `from_id` bigint(20) NOT NULL DEFAULT '0', `to_id` bigint(20) unsigned NOT NULL, `start_date` date DEFAULT NULL, `end_date` date DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `rel_id_from_id_to_id` (`rel_id`,`from_id`,`to_id`), CONSTRAINT `FK__rel_id_m_entity_relation_id` FOREIGN KEY (`rel_id`) REFERENCES `m_entity_relation` (`id`))
select * from `" + dataTableName + "` where id = 
CREATE TABLE IF NOT EXISTS `m_password_validation_policy` ( `id` int(11) NOT NULL AUTO_INCREMENT, `regex` text NOT NULL, `description` text NOT NULL, `active` tinyint(4) NOT NULL DEFAULT '0', PRIMARY KEY (`id`))
CREATE TABLE `m_permission` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `grouping` varchar(45) DEFAULT NULL, `code` varchar(100) NOT NULL, `entity_name` varchar(100) DEFAULT NULL, `action_name` varchar(100) DEFAULT NULL, `can_maker_checker` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
select s from Staff s where s.id = :id AND s.office.id = :officeId
CREATE TABLE IF NOT EXISTS `m_deposit_account_recurring_detail` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_id` bigint(20) NOT NULL DEFAULT '0', `recurring_deposit_amount` decimal(19,6) DEFAULT NULL, `recurring_deposit_type_enum` smallint(5) DEFAULT NULL, `recurring_deposit_frequency` int(11) DEFAULT NULL, `recurring_deposit_frequency_type_enum` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKDARD00000000000001` (`savings_account_id`), CONSTRAINT `FKDARD00000000000001` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE `c_account_number_format` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`account_type_enum` SMALLINT(1) NOT NULL,	`prefix_type_enum` SMALLINT(2) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `account_type_enum` (`account_type_enum`))
CREATE TABLE `m_organisation_currency` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(3) NOT NULL, `decimal_places` smallint(5) NOT NULL, `name` varchar(50) NOT NULL, `display_symbol` varchar(10) DEFAULT NULL, `internationalized_name_code` varchar(50) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_organisation_currency` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(3) NOT NULL, `decimal_places` smallint(5) NOT NULL, `name` varchar(50) NOT NULL, `display_symbol` varchar(10) DEFAULT NULL, `internationalized_name_code` varchar(50) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `c_cache` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `cache_type_enum` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`))
UPDATE m_loan_repayment_schedule SET accrual_interest_derived=?, accrual_fee_charges_derived=? WHERE id=?
CREATE TABLE `extra_client_details` ( `client_id` bigint(20) NOT NULL, `Business Description` varchar(100) DEFAULT NULL, `Years in Business` int(11) DEFAULT NULL, `Gender_cd` int(11) DEFAULT NULL, `Education_cv` varchar(60) DEFAULT NULL, `Next Visit` date DEFAULT NULL, `Highest Rate Paid` decimal(19,6) DEFAULT NULL, `Comment` text, PRIMARY KEY (`client_id`), CONSTRAINT `FK_extra_client_details` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE `m_template` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `text` longtext COLLATE utf8_unicode_ci NOT NULL, `entity` int(11) DEFAULT NULL, `type` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unq_name` (`name`))
CREATE TABLE `m_permission` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `grouping` varchar(45) DEFAULT NULL, `code` varchar(100) NOT NULL, `entity_name` varchar(100) DEFAULT NULL, `action_name` varchar(100) DEFAULT NULL, `can_maker_checker` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
CREATE TABLE IF NOT EXISTS `ppi_likelihoods_ppi` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `likelihood_id` bigint(20) NOT NULL, `ppi_name` varchar(250) NOT NULL, `enabled` int(11) NOT NULL DEFAULT '100', PRIMARY KEY (`id`))
CREATE TABLE `latam_extra_loan_details` ( `loan_id` bigint(20) NOT NULL, `Business Description` varchar(100) DEFAULT NULL, `Years in Business` int(11) DEFAULT NULL, `Gender_cd` int(11) DEFAULT NULL, `Education_cv` varchar(60) DEFAULT NULL, `Next Visit` date DEFAULT NULL, `Highest Rate Paid` decimal(19,6) DEFAULT NULL, `Comment` text, PRIMARY KEY (`loan_id`), CONSTRAINT `FK_latam_extra_loan_details` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_savings_officer_assignment_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `account_id` bigint(20) NOT NULL, `savings_officer_id` bigint(20) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `fk_m_savings_officer_assignment_history_0001` (`account_id`), KEY `fk_m_savings_officer_assignment_history_0002` (`savings_officer_id`), CONSTRAINT `fk_m_savings_officer_assignment_history_0001` FOREIGN KEY (`account_id`) REFERENCES `m_savings_account` (`id`), CONSTRAINT `fk_m_savings_officer_assignment_history_0002` FOREIGN KEY (`savings_officer_id`) REFERENCES `m_staff` (`id`))
select id from stretchy_report where report_name = 'Balance Outstanding'),(select id from stretchy_parameter where parameter_name='asOnDate'),'ondate');
CREATE TABLE IF NOT EXISTS `acc_gl_financial_activity_account` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `gl_account_id` bigint(20) NOT NULL DEFAULT '0', `financial_activity_type` smallint(5) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `financial_activity_type` (`financial_activity_type`), KEY `FK_office_mapping_acc_gl_account` (`gl_account_id`), CONSTRAINT `FK_office_mapping_acc_gl_account` FOREIGN KEY (`gl_account_id`) REFERENCES `acc_gl_account` (`id`))
CREATE TABLE IF NOT EXISTS `m_product_loan_variable_installment_config` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_product_id` bigint(20) NOT NULL, `minimum_gap` int(4) NOT NULL, `maximum_gap` int(4) NOT NULL, PRIMARY KEY (`id`), KEY `FK_mappings_m_variable_product_loan_id` (`loan_product_id`), CONSTRAINT `FK_mappings_m_variable_product_loan_id` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE `m_survey_scorecards` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `survey_id` BIGINT(20) NOT NULL, `question_id` BIGINT(20) NOT NULL, `response_id` BIGINT(20) NOT NULL, `user_id` BIGINT(20) NOT NULL, `client_id` BIGINT(20) NOT NULL, `created_on` DATETIME NULL DEFAULT NULL, `a_value` INT(4) NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`survey_id`) REFERENCES `m_surveys` (`id`), FOREIGN KEY (`question_id`) REFERENCES `m_survey_questions` (`id`), FOREIGN KEY (`response_id`) REFERENCES `m_survey_responses` (`id`), FOREIGN KEY (`user_id`) REFERENCES `m_appusers` (`id`), FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE `m_appuser` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', `office_id` bigint(20) DEFAULT NULL, `username` varchar(100) NOT NULL, `firstname` varchar(100) NOT NULL, `lastname` varchar(100) NOT NULL, `password` varchar(255) NOT NULL, `email` varchar(100) NOT NULL, `firsttime_login_remaining` bit(1) NOT NULL, `nonexpired` bit(1) NOT NULL, `nonlocked` bit(1) NOT NULL, `nonexpired_credentials` bit(1) NOT NULL, `enabled` bit(1) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `username_org` (`username`), KEY `FKB3D587CE0DD567A` (`office_id`), CONSTRAINT `FKB3D587CE0DD567A` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_deposit_account_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `deposit_account_id` bigint(20) NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `contra_id` bigint(20) DEFAULT NULL, `transaction_date` date NOT NULL, `amount` decimal(19,6) NOT NULL, `interest` decimal(19,6) NOT NULL, `total` decimal(19,6) NOT NULL, PRIMARY KEY (`id`), KEY `FKKW00000000000005` (`deposit_account_id`), KEY `FKKW00000000000006` (`contra_id`), CONSTRAINT `FKKW00000000000005` FOREIGN KEY (`deposit_account_id`) REFERENCES `m_deposit_account` (`id`), CONSTRAINT `FKKW00000000000006` FOREIGN KEY (`contra_id`) REFERENCES `m_deposit_account_transaction` (`id`))
select count(*) from job job where job.id=
CREATE TABLE `m_templatemappers` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `mapperkey` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `mapperorder` int(11) DEFAULT NULL, `mappervalue` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `impact measurement` ( `loan_id` bigint(20) NOT NULL, `YesNo_cd_RepaidOnSchedule` int(11) NOT NULL, `ReasonNotRepaidOnSchedule` text DEFAULT NULL, `How was Loan Amount Invested` text NOT NULL, `Additional Income Generated` decimal(19,6) NOT NULL, `Additional Income Used For` text NOT NULL, `YesNo_cd_NewJobsCreated` int(11) NOT NULL, `Number of Jobs Created` bigint(20) DEFAULT NULL, PRIMARY KEY (`loan_id`), CONSTRAINT `FK_impact measurement` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_loan_officer_assignment_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `loan_officer_id` bigint(20) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `fk_m_loan_officer_assignment_history_0001` (`loan_id`), KEY `fk_m_loan_officer_assignment_history_0002` (`loan_officer_id`), CONSTRAINT `fk_m_loan_officer_assignment_history_0001` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`), CONSTRAINT `fk_m_loan_officer_assignment_history_0002` FOREIGN KEY (`loan_officer_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE IF NOT EXISTS `m_group_roles` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) DEFAULT NULL, `group_id` bigint(20) DEFAULT NULL, `role_cv_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `UNIQUE_GROUP_ROLES` (`client_id`,`group_id`,`role_cv_id`), KEY `FKGroupRoleClientId` (`client_id`), KEY `FKGroupRoleGroupId` (`group_id`), KEY `FK_grouprole_m_codevalue` (`role_cv_id`), CONSTRAINT `FKGroupRoleClientId` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`), CONSTRAINT `FKGroupRoleGroupId` FOREIGN KEY (`group_id`) REFERENCES `m_group` (`id`), CONSTRAINT `FK_grouprole_m_codevalue` FOREIGN KEY (`role_cv_id`) REFERENCES `m_code_value` (`id`))
CREATE TABLE `m_floating_rates_periods` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`floating_rates_id` BIGINT(20) NOT NULL,	`from_date` DATETIME NOT NULL,	`interest_rate` DECIMAL(19,6) NOT NULL,	`is_differential_to_base_lending_rate` BIT(1) NOT NULL DEFAULT 0,	`is_active` BIT(1) NOT NULL DEFAULT 1,	`createdby_id` BIGINT(20) NOT NULL,	`created_date` DATETIME NOT NULL,	`lastmodifiedby_id` BIGINT(20) NOT NULL,	`lastmodified_date` DATETIME NOT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_mappings_m_floating_rates` FOREIGN KEY (`floating_rates_id`) REFERENCES `m_floating_rates` (`id`))
CREATE TABLE `m_savings_officer_assignment_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `account_id` bigint(20) NOT NULL, `savings_officer_id` bigint(20) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `fk_m_savings_officer_assignment_history_0001` (`account_id`), KEY `fk_m_savings_officer_assignment_history_0002` (`savings_officer_id`), CONSTRAINT `fk_m_savings_officer_assignment_history_0001` FOREIGN KEY (`account_id`) REFERENCES `m_savings_account` (`id`), CONSTRAINT `fk_m_savings_officer_assignment_history_0002` FOREIGN KEY (`savings_officer_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE `mix_taxonomy_mapping` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `identifier` varchar(50) NOT NULL DEFAULT '', `config` varchar(200) DEFAULT NULL, `last_update_date` datetime DEFAULT NULL, `currency` varchar(11) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `acc_gl_account` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(45) NOT NULL, `parent_id` bigint(20) DEFAULT NULL, `gl_code` varchar(45) NOT NULL, `disabled` tinyint(1) NOT NULL DEFAULT '0', `manual_journal_entries_allowed` tinyint(1) NOT NULL DEFAULT '1', `account_usage` tinyint(1) NOT NULL DEFAULT '2', `classification_enum` smallint(5) NOT NULL, `description` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `acc_gl_code` (`gl_code`), KEY `FK_ACC_0000000001` (`parent_id`), CONSTRAINT `FK_ACC_0000000001` FOREIGN KEY (`parent_id`) REFERENCES `acc_gl_account` (`id`))
CREATE TABLE `ref_loan_transaction_processing_strategy` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(100) DEFAULT NULL, `name` varchar(255) DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `ltp_strategy_code` (`code`))
CREATE TABLE `m_provisioning_history` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`journal_entry_created` BIT(1) DEFAULT 0,	`createdby_id` BIGINT(20) NULL DEFAULT NULL,	`created_date` DATE NULL DEFAULT NULL,	`lastmodifiedby_id` BIGINT(20) NULL DEFAULT NULL,	`lastmodified_date` DATE NULL DEFAULT NULL,	PRIMARY KEY (`id`),	FOREIGN KEY (`createdby_id`) REFERENCES `m_appuser` (`id`),	FOREIGN KEY (`lastmodifiedby_id`) REFERENCES `m_appuser` (`id`))
CREATE TABLE `m_provisioning_criteria_definition` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`criteria_id` BIGINT(20) NOT NULL,	`category_id` BIGINT(20) NOT NULL,	`min_age` BIGINT(20) NOT NULL,	`max_age` BIGINT(20) NOT NULL,	`provision_percentage` DECIMAL(5,2) NOT NULL,	`liability_account` BIGINT(20),	`expense_account` BIGINT(20),	PRIMARY KEY (`id`),	FOREIGN KEY (`criteria_id`) REFERENCES `m_provisioning_criteria` (`id`),	FOREIGN KEY (`category_id`) REFERENCES `m_provision_category` (`id`),	FOREIGN KEY (`liability_account`) REFERENCES `acc_gl_account` (`id`),	FOREIGN KEY (`expense_account`) REFERENCES `acc_gl_account` (`id`))
CREATE TABLE IF NOT EXISTS `acc_gl_account` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(200) NOT NULL, `parent_id` bigint(20) DEFAULT NULL, `hierarchy` varchar(50) DEFAULT NULL, `gl_code` varchar(45) NOT NULL, `disabled` tinyint(1) NOT NULL DEFAULT '0', `manual_journal_entries_allowed` tinyint(1) NOT NULL DEFAULT '1', `account_usage` tinyint(1) NOT NULL DEFAULT '2', `classification_enum` smallint(5) NOT NULL, `tag_id` int(11) DEFAULT NULL, `description` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `acc_gl_code` (`gl_code`), KEY `FK_ACC_0000000001` (`parent_id`), KEY `FKGLACC000000002` (`tag_id`), CONSTRAINT `FKGLACC000000002` FOREIGN KEY (`tag_id`) REFERENCES `m_code_value` (`id`), CONSTRAINT `FK_ACC_0000000001` FOREIGN KEY (`parent_id`) REFERENCES `acc_gl_account` (`id`))
CREATE TABLE IF NOT EXISTS `m_deposit_account_recurring_detail` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_id` bigint(20) NOT NULL DEFAULT '0', `mandatory_recommended_deposit_amount` decimal(19,6) DEFAULT NULL, `is_mandatory` tinyint(4) NOT NULL DEFAULT '0', `allow_withdrawal` tinyint(4) NOT NULL DEFAULT '0', `adjust_advance_towards_future_payments` tinyint(4) NOT NULL DEFAULT '1', `is_calendar_inherited` tinyint(4) NOT NULL DEFAULT '0', `total_overdue_amount` decimal(19,6) DEFAULT NULL, `no_of_overdue_installments` int(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKDARD00000000000001` (`savings_account_id`), CONSTRAINT `FKDARD00000000000001` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE IF NOT EXISTS `oauth_refresh_token` ( `token_id` varchar(256) DEFAULT NULL, `token` blob, `authentication` blob)
CREATE TABLE `m_product_loan_configurable_attributes` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `loan_product_id` BIGINT NOT NULL, `amortization_method_enum` TINYINT NOT NULL DEFAULT '1', `interest_method_enum` TINYINT NOT NULL DEFAULT '1', `loan_transaction_strategy_id` TINYINT NOT NULL DEFAULT '1', `interest_calculated_in_period_enum` TINYINT NOT NULL DEFAULT '1', `arrearstolerance_amount` TINYINT NOT NULL DEFAULT '1', `repay_every` TINYINT NOT NULL DEFAULT '1', `moratorium` TINYINT NOT NULL DEFAULT '1', `grace_on_arrears_ageing` TINYINT NOT NULL DEFAULT '1', PRIMARY KEY (`id`), KEY `fk_m_product_loan_configurable_attributes_0001` (`loan_product_id`), CONSTRAINT `fk_m_product_loan_configurable_attributes_0001` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
update c_external_service_properties set value = support81  where name = password
CREATE TABLE `m_calendar_instance` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `calendar_id` bigint(20) NOT NULL, `entity_id` bigint(20) NOT NULL, `entity_type_enum` smallint(5) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_calendar_m_calendar_instance` (`calendar_id`), CONSTRAINT `FK_m_calendar_m_calendar_instance` FOREIGN KEY (`calendar_id`) REFERENCES `m_calendar` (`id`))
CREATE TABLE `m_loan_officer_assignment_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `loan_officer_id` bigint(20) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `fk_m_loan_officer_assignment_history_0001` (`loan_id`), KEY `fk_m_loan_officer_assignment_history_0002` (`loan_officer_id`), CONSTRAINT `fk_m_loan_officer_assignment_history_0001` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`), CONSTRAINT `fk_m_loan_officer_assignment_history_0002` FOREIGN KEY (`loan_officer_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE `m_savings_interest_incentives` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`deposit_account_interest_rate_slab_id` BIGINT(20) NOT NULL,	`entiry_type` SMALLINT(2) NOT NULL,	`attribute_name` SMALLINT(2) NOT NULL,	`condition_type` SMALLINT(2) NOT NULL,	`attribute_value` VARCHAR(50) NOT NULL,	`incentive_type` SMALLINT(2) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_savings_interest_incentives_m_savings_interest_rate_slab` (`deposit_account_interest_rate_slab_id`),	CONSTRAINT `FK_m_savings_interest_incentives_m_savings_interest_rate_slab` FOREIGN KEY (`deposit_account_interest_rate_slab_id`) REFERENCES `m_savings_account_interest_rate_slab` (`id`))
CREATE TABLE `m_portfolio_account_associations` (	`id` BIGINT NOT NULL AUTO_INCREMENT,	`loan_account_id` BIGINT NULL DEFAULT NULL,	`savings_account_id` BIGINT NULL DEFAULT NULL,	`linked_loan_account_id` BIGINT NULL DEFAULT NULL,	`linked_savings_account_id` BIGINT NULL DEFAULT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `account_association_loan_fk` FOREIGN KEY (`loan_account_id`) REFERENCES `m_loan` (`id`),	CONSTRAINT `account_association_savings_fk` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`),	CONSTRAINT `linked_loan_fk` FOREIGN KEY (`linked_loan_account_id`) REFERENCES `m_loan` (`id`),	CONSTRAINT `linked_savings_fk` FOREIGN KEY (`linked_savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE `m_cashier_transactions` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`cashier_id` BIGINT(20) NOT NULL,	`txn_type` SMALLINT(5) NOT NULL,	`txn_amount` DECIMAL (19,6) NOT NULL,	`txn_date` DATE NOT NULL,	`created_date` DATETIME NOT NULL,	`entity_type` VARCHAR(50),	`entity_id` BIGINT(20),	`txn_note` VARCHAR(200),	PRIMARY KEY (`id`),	INDEX `IK_m_teller_transactions_m_cashier` (`cashier_id`),	CONSTRAINT `FK_m_teller_transactions_m_cashiers` FOREIGN KEY (`cashier_id`) REFERENCES `m_cashiers` (`id`)	)
CREATE TABLE `m_appuser_role` ( `appuser_id` bigint(20) NOT NULL, `role_id` bigint(20) NOT NULL, PRIMARY KEY (`appuser_id`,`role_id`), KEY `FK7662CE59B4100309` (`appuser_id`), KEY `FK7662CE5915CEC7AB` (`role_id`), CONSTRAINT `FK7662CE5915CEC7AB` FOREIGN KEY (`role_id`) REFERENCES `m_role` (`id`), CONSTRAINT `FK7662CE59B4100309` FOREIGN KEY (`appuser_id`) REFERENCES `m_appuser` (`id`))
CREATE TABLE IF NOT EXISTS `m_product_loan_guarantee_details` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_product_id` bigint(20) NOT NULL, `mandatory_guarantee` decimal(19,5) NOT NULL, `minimum_guarantee_from_own_funds` decimal(19,5) DEFAULT NULL, `minimum_guarantee_from_guarantor_funds` decimal(19,5) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_guarantee_details_loan_product` (`loan_product_id`), CONSTRAINT `FK_guarantee_details_loan_product` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE `c_configuration` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(50) DEFAULT NULL, `enabled` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `schema_version` ( `version_rank` int(11) NOT NULL, `installed_rank` int(11) NOT NULL, `version` varchar(50) NOT NULL, `description` varchar(200) NOT NULL, `type` varchar(20) NOT NULL, `script` varchar(1000) NOT NULL, `checksum` int(11) DEFAULT NULL, `installed_by` varchar(100) NOT NULL, `installed_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `execution_time` int(11) NOT NULL, `success` tinyint(1) NOT NULL, PRIMARY KEY (`version`), KEY `schema_version_vr_idx` (`version_rank`), KEY `schema_version_ir_idx` (`installed_rank`), KEY `schema_version_s_idx` (`success`))
CREATE TABLE IF NOT EXISTS `m_fund` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(255) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `fund_name_org` (`name`), UNIQUE KEY `fund_externalid_org` (`external_id`))
select 1 from m_savings_account_charge sc where sc.charge_id = ?)) = 1, 'true', 'false')
CREATE TABLE IF NOT EXISTS `m_loan_tranche_disbursement_charge` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_charge_id` bigint(20) NOT NULL, `disbursement_detail_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_loan_tranche_disbursement_charge_m_loan_charge` (`loan_charge_id`), KEY `FK_m_loan_tranche_disbursement_charge_m_loan_disbursement_detail` (`disbursement_detail_id`), CONSTRAINT `FK_m_loan_tranche_disbursement_charge_m_loan_charge` FOREIGN KEY (`loan_charge_id`) REFERENCES `m_loan_charge` (`id`), CONSTRAINT `FK_m_loan_tranche_disbursement_charge_m_loan_disbursement_detail` FOREIGN KEY (`disbursement_detail_id`) REFERENCES `m_loan_disbursement_detail` (`id`))
CREATE TABLE `extra_loan_details` ( `loan_id` bigint(20) NOT NULL, `Business Description` varchar(100) DEFAULT NULL, `Years in Business` int(11) DEFAULT NULL, `Gender_cd` int(11) DEFAULT NULL, `Education_cv` varchar(60) DEFAULT NULL, `Next Visit` date DEFAULT NULL, `Highest Rate Paid` decimal(19,6) DEFAULT NULL, `Comment` text, PRIMARY KEY (`loan_id`), CONSTRAINT `FK_extra_loan_details` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_currency` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(3) NOT NULL, `decimal_places` smallint(5) NOT NULL, `display_symbol` varchar(10) DEFAULT NULL, `name` varchar(50) NOT NULL, `internationalized_name_code` varchar(50) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
select 1 from m_loan_charge lc where lc.charge_id = ?)) = 1, 'true', 'false')
CREATE TABLE IF NOT EXISTS `m_product_loan_charge` ( `product_loan_id` bigint(20) NOT NULL, `charge_id` bigint(20) NOT NULL, PRIMARY KEY (`product_loan_id`,`charge_id`), KEY `charge_id` (`charge_id`), CONSTRAINT `m_product_loan_charge_ibfk_1` FOREIGN KEY (`charge_id`) REFERENCES `m_charge` (`id`), CONSTRAINT `m_product_loan_charge_ibfk_2` FOREIGN KEY (`product_loan_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_calendar_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `calendar_id` bigint(20) NOT NULL, `title` varchar(70) NOT NULL, `description` varchar(100) DEFAULT NULL, `location` varchar(50) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `duration` smallint(6) DEFAULT NULL, `calendar_type_enum` smallint(5) NOT NULL, `repeating` tinyint(1) NOT NULL DEFAULT '0', `recurrence` varchar(100) DEFAULT NULL, `remind_by_enum` smallint(5) DEFAULT NULL, `first_reminder` smallint(11) DEFAULT NULL, `second_reminder` smallint(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_calendar_m_calendar_history` (`calendar_id`), CONSTRAINT `FK_m_calendar_m_calendar_history` FOREIGN KEY (`calendar_id`) REFERENCES `m_calendar` (`id`))
CREATE TABLE `m_loanproduct_provisioning_entry` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`history_id` BIGINT(20) NOT NULL,	`criteria_id` BIGINT(20) NOT NULL,	`currency_code` VARCHAR(3) NOT NULL,	`office_id` BIGINT(20) NOT NULL,	`product_id` BIGINT(20) NOT NULL,	`category_id` BIGINT(20) NOT NULL,	`overdue_in_days` BIGINT(20) DEFAULT 0,	`reseve_amount` DECIMAL(20,6) DEFAULT 0,	`liability_account` BIGINT(20) NULL DEFAULT NULL,	`expense_account` BIGINT(20) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	FOREIGN KEY (`history_id`) REFERENCES `m_provisioning_history` (`id`),	FOREIGN KEY (`criteria_id`) REFERENCES `m_provisioning_criteria` (`id`),	FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`),	FOREIGN KEY (`product_id`) REFERENCES `m_product_loan` (`id`),	FOREIGN KEY (`category_id`) REFERENCES `m_provision_category` (`id`),	FOREIGN KEY (`liability_account`) REFERENCES `acc_gl_account` (`id`),	FOREIGN KEY (`expense_account`) REFERENCES `acc_gl_account` (`id`))
CREATE TABLE IF NOT EXISTS `acc_gl_financial_activity_account` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `gl_account_id` bigint(20) NOT NULL DEFAULT '0', `financial_activity_type` smallint(5) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `financial_activity_type` (`financial_activity_type`), KEY `FK_office_mapping_acc_gl_account` (`gl_account_id`), CONSTRAINT `FK_office_mapping_acc_gl_account` FOREIGN KEY (`gl_account_id`) REFERENCES `acc_gl_account` (`id`))
CREATE TABLE IF NOT EXISTS `m_survey_responses` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `question_id` bigint(20) NOT NULL, `a_text` varchar(255) NOT NULL, `a_value` int(4) NOT NULL, `sequence_no` int(4) NOT NULL, PRIMARY KEY (`id`), KEY `question_id` (`question_id`), CONSTRAINT `m_survey_responses_ibfk_1` FOREIGN KEY (`question_id`) REFERENCES `m_survey_questions` (`id`))
CREATE TABLE `acc_gl_account` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(45) NOT NULL, `parent_id` bigint(20) DEFAULT NULL, `gl_code` varchar(45) NOT NULL, `disabled` tinyint(1) NOT NULL DEFAULT '0', `manual_journal_entries_allowed` tinyint(1) NOT NULL DEFAULT '1', `account_usage` tinyint(1) NOT NULL DEFAULT '2', `classification_enum` smallint(5) NOT NULL, `description` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `acc_gl_code` (`gl_code`), KEY `FK_ACC_0000000001` (`parent_id`), CONSTRAINT `FK_ACC_0000000001` FOREIGN KEY (`parent_id`) REFERENCES `acc_gl_account` (`id`))
CREATE TABLE IF NOT EXISTS `ppi_likelihoods_ppi` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `likelihood_id` bigint(20) NOT NULL, `ppi_name` varchar(250) NOT NULL, `enabled` int(11) NOT NULL DEFAULT '100', PRIMARY KEY (`id`))
CREATE TABLE `m_survey_scorecards` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `survey_id` BIGINT(20) NOT NULL, `question_id` BIGINT(20) NOT NULL, `response_id` BIGINT(20) NOT NULL, `staff_id` BIGINT(20) NOT NULL, `client_id` BIGINT(20) NOT NULL, `created_on` DATETIME NULL DEFAULT NULL, `a_value` INT(4) NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`survey_id`) REFERENCES `m_surveys` (`id`), FOREIGN KEY (`question_id`) REFERENCES `m_survey_questions` (`id`), FOREIGN KEY (`response_id`) REFERENCES `m_survey_responses` (`id`), FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`), FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
select 1 from m_loanproduct_provisioning_details lpd where lpd.category_id = ?)) = 1, 'true', 'false')
CREATE TABLE IF NOT EXISTS `ppi_likelihoods` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(100) NOT NULL, `name` varchar(250) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `stretchy_report_parameter` ( `id` int(11) NOT NULL AUTO_INCREMENT, `report_id` int(11) NOT NULL, `parameter_id` int(11) NOT NULL, `report_parameter_name` varchar(45) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `report_parameter_unique` (`report_id`,`parameter_id`), KEY `fk_report_parameter_001_idx` (`report_id`), KEY `fk_report_parameter_002_idx` (`parameter_id`), CONSTRAINT `fk_report_parameter_001` FOREIGN KEY (`report_id`) REFERENCES `stretchy_report` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `fk_report_parameter_002` FOREIGN KEY (`parameter_id`) REFERENCES `stretchy_parameter` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION)
CREATE TABLE `m_loan_tranche_charges` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_id` BIGINT(20) NOT NULL,	`charge_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_currency` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(3) NOT NULL, `decimal_places` smallint(5) NOT NULL, `currency_multiplesof` smallint(5) DEFAULT NULL, `display_symbol` varchar(10) DEFAULT NULL, `name` varchar(50) NOT NULL, `internationalized_name_code` varchar(50) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
CREATE TABLE `m_appuser` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', `office_id` bigint(20) DEFAULT NULL, `username` varchar(100) NOT NULL, `firstname` varchar(100) NOT NULL, `lastname` varchar(100) NOT NULL, `password` varchar(255) NOT NULL, `email` varchar(100) NOT NULL, `firsttime_login_remaining` bit(1) NOT NULL, `nonexpired` bit(1) NOT NULL, `nonlocked` bit(1) NOT NULL, `nonexpired_credentials` bit(1) NOT NULL, `enabled` bit(1) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `username_org` (`username`), KEY `FKB3D587CE0DD567A` (`office_id`), CONSTRAINT `FKB3D587CE0DD567A` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE IF NOT EXISTS `m_product_loan_recalculation_details` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `product_id` bigint(20) NOT NULL, `compound_type_enum` smallint(5) NOT NULL, `reschedule_strategy_enum` smallint(5) NOT NULL, `rest_frequency_type_enum` smallint(1) NOT NULL, `rest_frequency_interval` smallint(3) NOT NULL DEFAULT '0', `rest_freqency_date` date DEFAULT NULL, `arrears_based_on_original_schedule` tinyint(1) NOT NULL DEFAULT '0', `pre_close_interest_calculation_strategy` smallint(3) NOT NULL DEFAULT '1', `compounding_frequency_type_enum` smallint(1) DEFAULT NULL, `compounding_frequency_interval` smallint(3) DEFAULT NULL, `compounding_freqency_date` date DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_product_loan_m_product_loan_recalculation_details` (`product_id`), CONSTRAINT `FK_m_product_loan_m_product_loan_recalculation_details` FOREIGN KEY (`product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE `m_code_value` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_id` int(11) NOT NULL, `code_value` varchar(100) DEFAULT NULL, `order_position` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_value` (`code_id`,`code_value`), KEY `FKCFCEA42640BE071Z` (`code_id`), CONSTRAINT `FKCFCEA42640BE071Z` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
CREATE TABLE IF NOT EXISTS `m_calendar` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `title` varchar(50) NOT NULL, `description` varchar(100) DEFAULT NULL, `location` varchar(50) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `duration` smallint(6) DEFAULT NULL, `calendar_type_enum` smallint(5) NOT NULL, `repeating` tinyint(1) NOT NULL DEFAULT '0', `recurrence` varchar(100) DEFAULT NULL, `remind_by_enum` smallint(5) DEFAULT NULL, `first_reminder` smallint(11) DEFAULT NULL, `second_reminder` smallint(11) DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_loan_charge_paid_by` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_transaction_id` bigint(20) NOT NULL, `loan_charge_id` bigint(20) NOT NULL, `amount` decimal(19,6) NOT NULL, `installment_number` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK__m_loan_transaction` (`loan_transaction_id`), KEY `FK__m_loan_charge` (`loan_charge_id`), CONSTRAINT `FK__m_loan_charge` FOREIGN KEY (`loan_charge_id`) REFERENCES `m_loan_charge` (`id`), CONSTRAINT `FK__m_loan_transaction` FOREIGN KEY (`loan_transaction_id`) REFERENCES `m_loan_transaction` (`id`))
CREATE TABLE IF NOT EXISTS `m_client_charge_paid_by` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_transaction_id` bigint(20) NOT NULL, `client_charge_id` bigint(20) NOT NULL, `amount` decimal(19,6) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_client_charge_paid_by_m_client_transaction` (`client_transaction_id`), KEY `FK_m_client_charge_paid_by_m_client_charge` (`client_charge_id`), CONSTRAINT `FK_m_client_charge_paid_by_m_client_charge` FOREIGN KEY (`client_charge_id`) REFERENCES `m_client_charge` (`id`), CONSTRAINT `FK_m_client_charge_paid_by_m_client_transaction` FOREIGN KEY (`client_transaction_id`) REFERENCES `m_client_transaction` (`id`))
CREATE TABLE `m_mandatory_savings_schedule` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`savings_account_id` BIGINT(20) NOT NULL,	`fromdate` DATE NULL DEFAULT NULL,	`duedate` DATE NOT NULL,	`installment` SMALLINT(5) NOT NULL,	`deposit_amount` DECIMAL(19,6) NULL DEFAULT NULL,	`deposit_amount_completed_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`total_paid_in_advance_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`total_paid_late_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`completed_derived` BIT(1) NOT NULL,	`obligations_met_on_date` DATE NULL DEFAULT NULL,	`createdby_id` BIGINT(20) NULL DEFAULT NULL,	`created_date` DATETIME NULL DEFAULT NULL,	`lastmodified_date` DATETIME NULL DEFAULT NULL,	`lastmodifiedby_id` BIGINT(20) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	INDEX `FKMSS0000000001` (`savings_account_id`),	CONSTRAINT `FKMSS0000000001` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE `m_calendar` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `title` varchar(50) NOT NULL, `description` varchar(100) DEFAULT NULL, `location` varchar(50) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `duration` smallint(6) DEFAULT NULL, `calendar_type_enum` smallint(5) NOT NULL, `repeating` tinyint(1) NOT NULL DEFAULT '0', `recurrence` varchar(100) DEFAULT NULL, `remind_by_enum` smallint(5) DEFAULT NULL, `first_reminder` smallint(11) DEFAULT NULL, `second_reminder` smallint(11) DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_deposit_product_interest_rate_chart` ( `deposit_product_id` bigint(20) NOT NULL, `interest_rate_chart_id` bigint(20) NOT NULL, UNIQUE KEY `deposit_product_id_interest_rate_chart_id` (`deposit_product_id`,`interest_rate_chart_id`), KEY `FKDPIRC00000000000002` (`interest_rate_chart_id`), CONSTRAINT `FKDPIRC00000000000001` FOREIGN KEY (`deposit_product_id`) REFERENCES `m_savings_product` (`id`), CONSTRAINT `FKDPIRC00000000000002` FOREIGN KEY (`interest_rate_chart_id`) REFERENCES `m_interest_rate_chart` (`id`))
create table `acc_rule_tags` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`acc_rule_id` BIGINT(20) NOT NULL,	`tag_id` INT(11) NOT NULL,	`acc_type_enum` SMALLINT(5) NOT NULL,	primary key(`id`),	INDEX `FK_acc_accounting_rule_id` (`acc_rule_id`),	INDEX `FK_m_code_value_id` (`tag_id`),	CONSTRAINT `FK_acc_accounting_rule_id` FOREIGN KEY (`acc_rule_id`) REFERENCES `acc_accounting_rule` (`id`),	CONSTRAINT `FK_m_code_value_id` FOREIGN KEY (`tag_id`) REFERENCES `m_code_value` (`id`))
CREATE TABLE `m_savings_product` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` varchar(500) NOT NULL, `currency_code` varchar(3) NOT NULL, `currency_digits` smallint(5) NOT NULL, `nominal_annual_interest_rate` decimal(19,6) NOT NULL, `interest_compounding_period_enum` smallint(5) NOT NULL, `interest_calculation_type_enum` smallint(5) NOT NULL, `interest_calculation_days_in_year_type_enum` smallint(5) NOT NULL, `min_required_opening_balance` decimal(19,6) DEFAULT NULL, `lockin_period_frequency` decimal(19,6) DEFAULT NULL, `lockin_period_frequency_enum` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `sp_unq_name` (`name`))
CREATE TABLE IF NOT EXISTS `m_savings_account_charge_paid_by` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_transaction_id` bigint(20) NOT NULL, `savings_account_charge_id` bigint(20) NOT NULL, `amount` decimal(19,6) NOT NULL, PRIMARY KEY (`id`), KEY `FK__m_savings_account_transaction` (`savings_account_transaction_id`), KEY `FK__m_savings_account_charge` (`savings_account_charge_id`), CONSTRAINT `FK__m_savings_account_charge` FOREIGN KEY (`savings_account_charge_id`) REFERENCES `m_savings_account_charge` (`id`), CONSTRAINT `FK__m_savings_account_transaction` FOREIGN KEY (`savings_account_transaction_id`) REFERENCES `m_savings_account_transaction` (`id`))
CREATE TABLE IF NOT EXISTS `m_loanproduct_provisioning_mapping` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `product_id` bigint(20) NOT NULL, `criteria_id` bigint(20) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `product_id` (`product_id`), KEY `criteria_id` (`criteria_id`), CONSTRAINT `m_loanproduct_provisioning_mapping_ibfk_1` FOREIGN KEY (`product_id`) REFERENCES `m_product_loan` (`id`), CONSTRAINT `m_loanproduct_provisioning_mapping_ibfk_2` FOREIGN KEY (`criteria_id`) REFERENCES `m_provisioning_criteria` (`id`))
CREATE TABLE IF NOT EXISTS `schema_version` ( `version_rank` int(11) NOT NULL, `installed_rank` int(11) NOT NULL, `version` varchar(50) NOT NULL, `description` varchar(200) NOT NULL, `type` varchar(20) NOT NULL, `script` varchar(1000) NOT NULL, `checksum` int(11) DEFAULT NULL, `installed_by` varchar(100) NOT NULL, `installed_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `execution_time` int(11) NOT NULL, `success` tinyint(1) NOT NULL, PRIMARY KEY (`version`), KEY `schema_version_vr_idx` (`version_rank`), KEY `schema_version_ir_idx` (`installed_rank`), KEY `schema_version_s_idx` (`success`))
select id from stretchy_report where report_name = 'Client Savings Summary'), (select id from stretchy_parameter where parameter_name='savingsProductIdSelectAll'), 'selectProduct');
CREATE TABLE IF NOT EXISTS `m_cashier_transactions` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `cashier_id` bigint(20) NOT NULL, `txn_type` smallint(5) NOT NULL, `txn_amount` decimal(19,6) NOT NULL, `txn_date` date NOT NULL, `created_date` datetime NOT NULL, `entity_type` varchar(50) DEFAULT NULL, `entity_id` bigint(20) DEFAULT NULL, `txn_note` varchar(200) DEFAULT NULL, `currency_code` varchar(3) DEFAULT NULL, PRIMARY KEY (`id`), KEY `IK_m_teller_transactions_m_cashier` (`cashier_id`), CONSTRAINT `FK_m_teller_transactions_m_cashiers` FOREIGN KEY (`cashier_id`) REFERENCES `m_cashiers` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE IF NOT EXISTS `m_interest_rate_chart` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) DEFAULT NULL, `description` varchar(200) DEFAULT NULL, `from_date` date NOT NULL, `end_date` date DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `oauth_refresh_token` ( `token_id` varchar(256) DEFAULT NULL, `token` blob, `authentication` blob)
CREATE TABLE `m_template_m_templatemappers` ( `m_template_id` bigint(20) NOT NULL, `mappers_id` bigint(20) NOT NULL, UNIQUE KEY `mappers_id` (`mappers_id`), KEY (`mappers_id`), KEY (`m_template_id`))
CREATE TABLE IF NOT EXISTS `m_template` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL, `text` longtext CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL, `entity` int(11) DEFAULT NULL, `type` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unq_name` (`name`))
CREATE TABLE `impact measurement` ( `loan_id` bigint(20) NOT NULL, `YesNo_cd_RepaidOnSchedule` int(11) NOT NULL, `ReasonNotRepaidOnSchedule` text, `How was Loan Amount Invested` text NOT NULL, `Additional Income Generated` decimal(19,6) NOT NULL, `Additional Income Used For` text NOT NULL, `YesNo_cd_NewJobsCreated` int(11) NOT NULL, `Number of Jobs Created` bigint(20) DEFAULT NULL, PRIMARY KEY (`loan_id`), CONSTRAINT `FK_impact measurement` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_staff` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `is_loan_officer` tinyint(1) NOT NULL DEFAULT '0', `office_id` bigint(20) DEFAULT NULL, `firstname` varchar(50) DEFAULT NULL, `lastname` varchar(50) DEFAULT NULL, `display_name` varchar(100) NOT NULL, `joining_date` date, PRIMARY KEY (`id`), UNIQUE KEY `display_name` (`display_name`), KEY `FK_m_staff_m_office` (`office_id`), CONSTRAINT `FK_m_staff_m_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_guarantor` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `type_enum` smallint(5) NOT NULL, `entity_id` bigint(20) DEFAULT NULL, `firstname` varchar(50) DEFAULT NULL, `lastname` varchar(50) DEFAULT NULL, `dob` date DEFAULT NULL, `address_line_1` varchar(500) DEFAULT NULL, `address_line_2` varchar(500) DEFAULT NULL, `city` varchar(50) DEFAULT NULL, `state` varchar(50) DEFAULT NULL, `country` varchar(50) DEFAULT NULL, `zip` varchar(20) DEFAULT NULL, `house_phone_number` varchar(20) DEFAULT NULL, `mobile_number` varchar(20) DEFAULT NULL, `comment` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_guarantor_m_loan` (`loan_id`), CONSTRAINT `FK_m_guarantor_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_staff_assignment_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `centre_id` bigint(20) DEFAULT NULL, `staff_id` bigint(20) NOT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_staff_assignment_history_centre_id_m_group` (`centre_id`), KEY `FK_m_staff_assignment_history_m_staff` (`staff_id`), CONSTRAINT `FK_m_staff_assignment_history_centre_id_m_group` FOREIGN KEY (`centre_id`) REFERENCES `m_group` (`id`), CONSTRAINT `FK_m_staff_assignment_history_m_staff` FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE `m_selfservice_user_client_mapping` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`appuser_id` BIGINT(20) NOT NULL,	`client_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `appuser_id_client_id` (`appuser_id`, `client_id`),	CONSTRAINT `m_selfservice_appuser_id` FOREIGN KEY (`appuser_id`) REFERENCES `m_appuser` (`id`),	CONSTRAINT `m_selfservice_client_id` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE `m_loan_paid_in_advance` ( `loan_id` bigint(20) NOT NULL, `principal_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `interest_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `fee_charges_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `penalty_charges_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `total_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', PRIMARY KEY (`loan_id`), CONSTRAINT `m_loan_paid_in_advance_ibfk_1` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_holiday_office` ( `holiday_id` bigint(20) NOT NULL, `office_id` bigint(20) NOT NULL, PRIMARY KEY (`holiday_id`,`office_id`), KEY `m_holiday_id_ibfk_1` (`holiday_id`), KEY `m_office_id_ibfk_2` (`office_id`), CONSTRAINT `m_holiday_id_ibfk_1` FOREIGN KEY (`holiday_id`) REFERENCES `m_holiday` (`id`), CONSTRAINT `m_office_id_ibfk_2` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `schema_version` ( `version_rank` int(11) NOT NULL, `installed_rank` int(11) NOT NULL, `version` varchar(50) NOT NULL, `description` varchar(200) NOT NULL, `type` varchar(20) NOT NULL, `script` varchar(1000) NOT NULL, `checksum` int(11) DEFAULT NULL, `installed_by` varchar(100) NOT NULL, `installed_on` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `execution_time` int(11) NOT NULL, `success` tinyint(1) NOT NULL, PRIMARY KEY (`version`), KEY `schema_version_vr_idx` (`version_rank`), KEY `schema_version_ir_idx` (`installed_rank`), KEY `schema_version_s_idx` (`success`))
CREATE TABLE `latam_family_details` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) NOT NULL, `Name` varchar(40) DEFAULT NULL, `Date of Birth` date DEFAULT NULL, `Points Score` int(11) DEFAULT NULL, `Education_cd_Highest` int(11) DEFAULT NULL, `Other Notes` text, PRIMARY KEY (`id`), KEY `FK_Extra Family Details Data_1` (`client_id`), CONSTRAINT `FK_latam_family_details` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE IF NOT EXISTS `m_working_days` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `recurrence` varchar(100) DEFAULT NULL, `repayment_rescheduling_enum` smallint(5) DEFAULT NULL, `extend_term_daily_repayments` tinyint(1) DEFAULT '0', PRIMARY KEY (`id`))
select id from stretchy_report where report_name = 'Savings Transactions'), (select id from stretchy_parameter where parameter_name='endDateSelect'), 'toDate');
CREATE TABLE IF NOT EXISTS `m_survey_components` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `survey_id` bigint(20) NOT NULL, `a_key` varchar(32) NOT NULL, `a_text` varchar(255) NOT NULL, `description` varchar(4000) DEFAULT NULL, `sequence_no` int(4) NOT NULL, PRIMARY KEY (`id`), KEY `survey_id` (`survey_id`), CONSTRAINT `m_survey_components_ibfk_1` FOREIGN KEY (`survey_id`) REFERENCES `m_surveys` (`id`))
CREATE TABLE `m_entity_to_entity_mapping` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`rel_id` BIGINT(20) NOT NULL DEFAULT '0',	`from_id` BIGINT(20) NOT NULL DEFAULT '0',	`to_id` BIGINT(20) UNSIGNED NOT NULL,	`start_date` DATE NULL DEFAULT NULL,	`end_date` DATE NULL DEFAULT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `rel_id_from_id_to_id` (`rel_id`, `from_id`, `to_id`),	CONSTRAINT `FK__rel_id_m_entity_relation_id` FOREIGN KEY (`rel_id`) REFERENCES `m_entity_relation` (`id`))
CREATE TABLE IF NOT EXISTS `m_group_client` ( `group_id` bigint(20) NOT NULL, `client_id` bigint(20) NOT NULL, PRIMARY KEY (`group_id`,`client_id`), KEY `client_id` (`client_id`), CONSTRAINT `m_group_client_ibfk_1` FOREIGN KEY (`group_id`) REFERENCES `m_group` (`id`), CONSTRAINT `m_group_client_ibfk_2` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE `rpt_sequence` ( `id` int(11) NOT NULL AUTO_INCREMENT, PRIMARY KEY (`id`))
CREATE TABLE `scheduled_job_runhistory` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`job_id` BIGINT(20) NOT NULL,	`version` BIGINT(20) NOT NULL,	`start_time` DATETIME NOT NULL,	`end_time` DATETIME NOT NULL,	`status` VARCHAR(10) NOT NULL COLLATE 'latin1_swedish_ci',	`errormessage` VARCHAR(500) NULL DEFAULT NULL COLLATE 'latin1_swedish_ci',	`triggertype` VARCHAR(25) NOT NULL COLLATE 'latin1_swedish_ci',	`errorlog` TEXT NULL COLLATE 'latin1_swedish_ci',	PRIMARY KEY (`id`),	INDEX `scheduledjobsFK` (`job_id`),	CONSTRAINT `scheduledjobsFK` FOREIGN KEY (`job_id`) REFERENCES `scheduled_jobs` (`id`))
CREATE TABLE `m_savings_product_charge` (	`savings_product_id` BIGINT(20) NOT NULL,	`charge_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`savings_product_id`, `charge_id`),	INDEX `charge_id` (`charge_id`),	CONSTRAINT `m_savings_product_charge_ibfk_1` FOREIGN KEY (`charge_id`) REFERENCES `m_charge` (`id`),	CONSTRAINT `m_savings_product_charge_ibfk_2` FOREIGN KEY (`savings_product_id`) REFERENCES `m_savings_product` (`id`))
select id from stretchy_report where report_name = 'Client Loan Account Schedule'), (select id from stretchy_parameter where parameter_name='startDateSelect'), 'startDate');
CREATE TABLE `m_loan_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `contra_id` bigint(20) DEFAULT NULL, `transaction_date` date NOT NULL, `amount` decimal(19,6) NOT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `principal_portion_derived` decimal(19,6) DEFAULT NULL, `interest_portion_derived` decimal(19,6) DEFAULT NULL, `fee_charges_portion_derived` decimal(19,6) DEFAULT NULL, `penalty_charges_portion_derived` decimal(19,6) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKCFCEA42640BE0710` (`loan_id`), KEY `FKCFCEA426FC69F3F1` (`contra_id`), CONSTRAINT `FKCFCEA42640BE0710` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`), CONSTRAINT `FKCFCEA426FC69F3F1` FOREIGN KEY (`contra_id`) REFERENCES `m_loan_transaction` (`id`))
CREATE TABLE `stretchy_parameter` ( `parameter_id` int(11) NOT NULL AUTO_INCREMENT, `parameter_name` varchar(45) NOT NULL, `parameter_variable` varchar(45) DEFAULT NULL, `parameter_label` varchar(45) NOT NULL, `parameter_displayType` varchar(45) NOT NULL, `parameter_FormatType` varchar(10) NOT NULL, `parameter_default` varchar(45) NOT NULL, `special` varchar(1) DEFAULT NULL, `selectOne` varchar(1) DEFAULT NULL, `selectAll` varchar(1) DEFAULT NULL, `parameter_sql` text, `parent_parameter_id` int(11) NULL DEFAULT NULL, PRIMARY KEY (`parameter_id`), UNIQUE KEY `name_UNIQUE` (`parameter_name`), INDEX `fk_stretchy_parameter_0001_idx` (`parent_parameter_id`), CONSTRAINT `fk_stretchy_parameter_0001` FOREIGN KEY (`parent_parameter_id`) REFERENCES `stretchy_parameter` (`parameter_id`))
CREATE TABLE `m_client` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `account_no` varchar(20) NOT NULL, `office_id` bigint(20) NOT NULL, `external_id` varchar(100) DEFAULT NULL, `firstname` varchar(50) DEFAULT NULL, `middlename` varchar(50) DEFAULT NULL, `lastname` varchar(50) DEFAULT NULL, `fullname` varchar(100) DEFAULT NULL, `display_name` varchar(100) NOT NULL, `image_key` varchar(500) DEFAULT NULL, `joined_date` date DEFAULT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `account_no_UNIQUE` (`account_no`), UNIQUE KEY `external_id` (`external_id`), KEY `FKCE00CAB3E0DD567A` (`office_id`), CONSTRAINT `FKCE00CAB3E0DD567A` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `stretchy_parameter` ( `parameter_id` int(11) NOT NULL AUTO_INCREMENT, `parameter_name` varchar(45) NOT NULL, `parameter_variable` varchar(45) DEFAULT NULL, `parameter_label` varchar(45) NOT NULL, `parameter_displayType` varchar(45) NOT NULL, `parameter_FormatType` varchar(10) NOT NULL, `parameter_default` varchar(45) NOT NULL, `special` varchar(1) DEFAULT NULL, `selectOne` varchar(1) DEFAULT NULL, `selectAll` varchar(1) DEFAULT NULL, `parameter_sql` text, PRIMARY KEY (`parameter_id`), UNIQUE KEY `name_UNIQUE` (`parameter_name`))
CREATE TABLE `m_loan_tranche_disbursement_charge` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_charge_id` BIGINT(20) NOT NULL,	`disbursement_detail_id` BIGINT(20) NULL,	PRIMARY KEY (`id`))
CREATE TABLE `x_table_cloumn_code_mappings` (	`column_alias_name` VARCHAR(50) NOT NULL,	`code_id` INT(10) NOT NULL,	PRIMARY KEY (`column_alias_name`),	INDEX `FK_x_code_id` (`code_id`),	CONSTRAINT `FK_x_code_id` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
CREATE TABLE IF NOT EXISTS `m_hook_configuration` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `hook_id` bigint(20) DEFAULT NULL, `field_type` varchar(45) NOT NULL, `field_name` varchar(100) NOT NULL, `field_value` varchar(100) NOT NULL, PRIMARY KEY (`id`), KEY `fk_hook_id_idx` (`hook_id`), CONSTRAINT `fk_hook_id_cfg` FOREIGN KEY (`hook_id`) REFERENCES `m_hook` (`id`))
CREATE TABLE tenants(	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`identifier` VARCHAR(100) NOT NULL,	`name` VARCHAR(100) NOT NULL,	`timezone_id` VARCHAR(100) NOT NULL,	`country_id` INT(11) NULL DEFAULT NULL,	`joined_date` DATE NULL DEFAULT NULL,	`created_date` DATETIME NULL DEFAULT NULL,	`lastmodified_date` DATETIME NULL DEFAULT NULL,	`oltp_id` BIGINT(20) NOT NULL,	`report_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`id`),	INDEX `fk_oltp_id` (`oltp_id`),	INDEX `fk_report_id` (`report_id`),	CONSTRAINT `fk_oltp_id` FOREIGN KEY (`oltp_id`) REFERENCES `tenant_server_connections` (`id`),	CONSTRAINT `fk_report_id` FOREIGN KEY (`report_id`) REFERENCES `tenant_server_connections` (`id`))
CREATE TABLE `m_document` ( `id` int(20) NOT NULL AUTO_INCREMENT, `parent_entity_type` varchar(50) NOT NULL, `parent_entity_id` int(20) NOT NULL DEFAULT '0', `name` varchar(250) NOT NULL, `file_name` varchar(250) NOT NULL, `size` int(20) DEFAULT '0', `type` varchar(50) DEFAULT NULL, `description` varchar(1000) DEFAULT NULL, `location` varchar(500) NOT NULL DEFAULT '0', PRIMARY KEY (`id`))
CREATE TABLE `loan additional data` ( `loan_id` bigint(20) NOT NULL, `PurposeOfLoan_cd` int(11) NOT NULL, `CollateralType_cd` int(11) NOT NULL, `Collateral notes` text NOT NULL, `YesNo_cd_Guarantor` int(11) NOT NULL, `Guarantor name` varchar(100) DEFAULT NULL, `Guarantor relation` varchar(100) DEFAULT NULL, `Guarantor address` varchar(100) DEFAULT NULL, `Guarantor telephone number` varchar(20) DEFAULT NULL, PRIMARY KEY (`loan_id`), CONSTRAINT `FK_loan_additional_data` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_account_transfer_standing_instructions` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`name` VARCHAR(250) NOT NULL,	`account_transfer_details_id` BIGINT(20) NOT NULL,	`priority` TINYINT(2) NOT NULL,	`status` TINYINT(2) NOT NULL,	`instruction_type` TINYINT(2) NOT NULL,	`amount` DECIMAL(19,6) NULL DEFAULT NULL,	`valid_from` DATE NOT NULL,	`valid_till` DATE NULL DEFAULT NULL,	`recurrence_type` TINYINT(1) NOT NULL,	`recurrence_frequency` SMALLINT(5) NULL DEFAULT NULL,	`recurrence_interval` SMALLINT(5) NULL DEFAULT NULL,	`recurrence_on_day` SMALLINT(2) NULL DEFAULT NULL,	`recurrence_on_month` SMALLINT(2) NULL DEFAULT NULL,	`last_run_date` DATE NULL DEFAULT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `name` (`name`),	INDEX `FK_m_standing_instructions_account_transfer_details` (`account_transfer_details_id`),	CONSTRAINT `FK_m_standing_instructions_account_transfer_details` FOREIGN KEY (`account_transfer_details_id`) REFERENCES `m_account_transfer_details` (`id`))
CREATE TABLE `m_office` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `parent_id` bigint(20) DEFAULT NULL, `hierarchy` varchar(100) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, `name` varchar(50) NOT NULL, `opening_date` date NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_org` (`name`), UNIQUE KEY `externalid_org` (`external_id`), KEY `FK2291C477E2551DCC` (`parent_id`), CONSTRAINT `FK2291C477E2551DCC` FOREIGN KEY (`parent_id`) REFERENCES `m_office` (`id`))
select * from (select 
CREATE TABLE IF NOT EXISTS `m_savings_account_interest_rate_slab` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_interest_rate_chart_id` bigint(20) NOT NULL, `description` varchar(200) DEFAULT NULL, `period_type_enum` smallint(5) NOT NULL DEFAULT '1', `from_period` int(11) NOT NULL DEFAULT '0', `to_period` int(11) DEFAULT NULL, `amount_range_from` decimal(19,6) DEFAULT NULL, `amount_range_to` decimal(19,6) DEFAULT NULL, `annual_interest_rate` decimal(19,6) NOT NULL, `currency_code` varchar(3) NOT NULL, PRIMARY KEY (`id`), KEY `FKSAIRS00000000000001` (`savings_account_interest_rate_chart_id`), CONSTRAINT `FKSAIRS00000000000001` FOREIGN KEY (`savings_account_interest_rate_chart_id`) REFERENCES `m_savings_account_interest_rate_chart` (`id`))
CREATE TABLE `m_guarantor_transaction` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`guarantor_fund_detail_id` BIGINT(20) NOT NULL,	`loan_transaction_id` BIGINT(20) NOT NULL,	`deposit_on_hold_transaction_id` BIGINT(20) NOT NULL,	`is_reversed` TINYINT(1) NOT NULL DEFAULT '0',	PRIMARY KEY (`id`),	CONSTRAINT `FK_guarantor_transaction_m_deposit_account_on_hold_transaction` FOREIGN KEY (`deposit_on_hold_transaction_id`) REFERENCES `m_deposit_account_on_hold_transaction` (`id`),	CONSTRAINT `FK_guarantor_transaction_guarantor_fund_detail` FOREIGN KEY (`guarantor_fund_detail_id`) REFERENCES `m_guarantor_funding_details` (`id`),	CONSTRAINT `FK_guarantor_transaction_m_loan_transaction` FOREIGN KEY (`loan_transaction_id`) REFERENCES `m_loan_transaction` (`id`))
CREATE TABLE IF NOT EXISTS `job` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(50) NOT NULL, `display_name` varchar(50) NOT NULL, `cron_expression` varchar(20) CHARACTER SET latin1 NOT NULL, `create_time` datetime NOT NULL, `task_priority` smallint(6) NOT NULL DEFAULT '5', `group_name` varchar(50) CHARACTER SET latin1 DEFAULT NULL, `previous_run_start_time` datetime DEFAULT NULL, `next_run_time` datetime DEFAULT NULL, `job_key` varchar(500) DEFAULT NULL, `initializing_errorlog` text, `is_active` tinyint(1) NOT NULL DEFAULT '1', `currently_running` tinyint(1) NOT NULL DEFAULT '0', `updates_allowed` tinyint(1) NOT NULL DEFAULT '1', `scheduler_group` smallint(2) NOT NULL DEFAULT '0', `is_misfired` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_calendar_instance` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `calendar_id` bigint(20) NOT NULL, `entity_id` bigint(20) NOT NULL, `entity_type_enum` smallint(5) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_calendar_m_calendar_instance` (`calendar_id`), CONSTRAINT `FK_m_calendar_m_calendar_instance` FOREIGN KEY (`calendar_id`) REFERENCES `m_calendar` (`id`))
CREATE TABLE `m_loan_officer_assignment_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `loan_officer_id` bigint(20) DEFAULT NULL, `start_date` date NOT NULL, `end_date` date DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `fk_m_loan_officer_assignment_history_0001` (`loan_id`), KEY `fk_m_loan_officer_assignment_history_0002` (`loan_officer_id`), CONSTRAINT `fk_m_loan_officer_assignment_history_0001` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`), CONSTRAINT `fk_m_loan_officer_assignment_history_0002` FOREIGN KEY (`loan_officer_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE IF NOT EXISTS `m_selfservice_user_client_mapping` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `appuser_id` bigint(20) NOT NULL, `client_id` bigint(20) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `appuser_id_client_id` (`appuser_id`,`client_id`), KEY `m_selfservice_client_id` (`client_id`), CONSTRAINT `m_selfservice_appuser_id` FOREIGN KEY (`appuser_id`) REFERENCES `m_appuser` (`id`), CONSTRAINT `m_selfservice_client_id` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
select id from m_charge where name = t_annual_fee_name);
CREATE TABLE IF NOT EXISTS `m_savings_interest_incentives` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `deposit_account_interest_rate_slab_id` bigint(20) NOT NULL, `entiry_type` smallint(2) NOT NULL, `attribute_name` smallint(2) NOT NULL, `condition_type` smallint(2) NOT NULL, `attribute_value` varchar(50) NOT NULL, `incentive_type` smallint(2) NOT NULL, `amount` decimal(19,6) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_savings_interest_incentives_m_savings_interest_rate_slab` (`deposit_account_interest_rate_slab_id`), CONSTRAINT `FK_m_savings_interest_incentives_m_savings_interest_rate_slab` FOREIGN KEY (`deposit_account_interest_rate_slab_id`) REFERENCES `m_savings_account_interest_rate_slab` (`id`))
CREATE TABLE `m_client_attendance` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`client_id` BIGINT(20) NOT NULL DEFAULT '0',	`meeting_id` BIGINT(20) NOT NULL,	`attendance_type_enum` SMALLINT(5) NOT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `unique_client_meeting_attendance` (`client_id`, `meeting_id`),	INDEX `FK_m_meeting_m_client_attendance` (`meeting_id`),	CONSTRAINT `FK_m_client_m_client_attendance` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`),	CONSTRAINT `FK_m_meeting_m_client_attendance` FOREIGN KEY (`meeting_id`) REFERENCES `m_meeting` (`id`))
CREATE TABLE IF NOT EXISTS `m_survey_questions` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `survey_id` bigint(20) NOT NULL, `component_key` varchar(32) DEFAULT NULL, `a_key` varchar(32) NOT NULL, `a_text` varchar(255) NOT NULL, `description` varchar(4000) DEFAULT NULL, `sequence_no` int(4) NOT NULL, PRIMARY KEY (`id`), KEY `survey_id` (`survey_id`), CONSTRAINT `m_survey_questions_ibfk_1` FOREIGN KEY (`survey_id`) REFERENCES `m_surveys` (`id`))
select id from c_external_service where name = 'SMTP_Email_Account'));
CREATE TABLE `m_working_days` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`recurrence` VARCHAR(100) NULL DEFAULT NULL,	`repayment_rescheduling_enum` SMALLINT(5) NULL DEFAULT NULL,	PRIMARY KEY (`id`))
select id from stretchy_report where report_name = 'Disbursal Report'),(select id from stretchy_parameter where parameter_name='OfficeIdSelectOne'),'branch');
select loanProduct from LoanProduct loanProduct, IN(loanProduct.charges) charge where charge.id = :chargeId
CREATE TABLE `m_savings_product` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` varchar(500) NOT NULL, `currency_code` varchar(3) NOT NULL, `currency_digits` smallint(5) NOT NULL, `nominal_interest_rate_per_period` decimal(19,6) NOT NULL, `nominal_interest_rate_period_frequency_enum` smallint(5) NOT NULL, `interest_period_enum` SMALLINT(5) NOT NULL, `interest_calculation_type_enum` SMALLINT(5) NOT NULL, `interest_calculation_days_in_year_type_enum` SMALLINT(5) NOT NULL, `min_required_opening_balance` decimal(19,6) DEFAULT NULL, `lockin_period_frequency` decimal(19,6) DEFAULT NULL, `lockin_period_frequency_enum` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `sp_unq_name` (`name`))
select client_id from m_group_client) ";
select id from m_savings_account_transaction where savings_account_id = ?)");
CREATE TABLE IF NOT EXISTS `ppi_scores` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `score_from` int(11) NOT NULL, `score_to` int(11) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_code` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_name` varchar(100) DEFAULT NULL, `is_system_defined` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_name` (`code_name`))
select id from stretchy_report where report_name = 'Client Saving Transactions'), (select id from stretchy_parameter where parameter_name='startDateSelect'), 'startDate');
CREATE TABLE IF NOT EXISTS `m_payment_type` ( `id` int(11) NOT NULL AUTO_INCREMENT, `value` varchar(100) DEFAULT NULL, `description` varchar(500) DEFAULT NULL, `is_cash_payment` tinyint(1) DEFAULT '0', `order_position` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`id`))
CREATE TABLE `acc_product_mapping` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `gl_account_id` bigint(20) DEFAULT NULL, `product_id` bigint(20) DEFAULT NULL, `product_type` smallint(5) DEFAULT NULL, `financial_account_type` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `c_external_service` (	`name` VARCHAR(150) NOT NULL,	`value` VARCHAR(250) NULL DEFAULT NULL,	UNIQUE INDEX `name` (`name`))
CREATE TABLE `stretchy_report` ( `report_id` int(11) NOT NULL AUTO_INCREMENT, `report_name` varchar(100) NOT NULL, `report_type` varchar(20) NOT NULL, `report_subtype` varchar(20) DEFAULT NULL, `report_category` varchar(45) DEFAULT NULL, `report_sql` text, `description` text, `core_report` tinyint(1) DEFAULT '0', `use_report` tinyint(1) DEFAULT '0', PRIMARY KEY (`report_id`), UNIQUE KEY `report_name_UNIQUE` (`report_name`))
CREATE TABLE IF NOT EXISTS `m_provisioning_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `journal_entry_created` bit(1) DEFAULT b'0', `createdby_id` bigint(20) DEFAULT NULL, `created_date` date DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `lastmodified_date` date DEFAULT NULL, PRIMARY KEY (`id`), KEY `createdby_id` (`createdby_id`), KEY `lastmodifiedby_id` (`lastmodifiedby_id`), CONSTRAINT `m_provisioning_history_ibfk_1` FOREIGN KEY (`createdby_id`) REFERENCES `m_appuser` (`id`), CONSTRAINT `m_provisioning_history_ibfk_2` FOREIGN KEY (`lastmodifiedby_id`) REFERENCES `m_appuser` (`id`))
CREATE TABLE IF NOT EXISTS `m_appuser_previous_password` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `user_id` bigint(20) NOT NULL, `password` varchar(255) NOT NULL, `removal_date` date NOT NULL, PRIMARY KEY (`id`), KEY `user_id` (`user_id`), CONSTRAINT `m_appuser_previous_password_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `m_appuser` (`id`))
select s from Survey s where :pointInTime between s.validFrom and s.validTo
CREATE TABLE `m_client_identifier` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) NOT NULL, `document_type_id` int(11) NOT NULL, `document_key` varchar(50) NOT NULL, `description` varchar(500) DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unique_identifier_key` (`document_type_id`,`document_key`), UNIQUE KEY `unique_client_identifier` (`client_id`,`document_type_id`), KEY `FK_m_client_document_m_client` (`client_id`), KEY `FK_m_client_document_m_code_value` (`document_type_id`), CONSTRAINT `FK_m_client_document_m_client` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`), CONSTRAINT `FK_m_client_document_m_code_value` FOREIGN KEY (`document_type_id`) REFERENCES `m_code_value` (`id`))
create table `m_holiday`(`id` BIGINT(20) NOT NULL AUTO_INCREMENT,`name` varchar(100) NOT NULL,`from_date` DATETIME NOT NULL,`to_date` DATETIME NOT NULL,`description` varchar(100) NULL DEFAULT NULL,PRIMARY KEY (`id`),UNIQUE INDEX `holiday_name` (`name`))
CREATE TABLE `sms_messages_outbound` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `group_id` bigint(20) DEFAULT NULL, `client_id` bigint(20) DEFAULT NULL, `staff_id` bigint(20) DEFAULT NULL, `status_enum` int(5) NOT NULL DEFAULT '100', `mobile_no` varchar(50) NOT NULL, `message` varchar(1000) NOT NULL, PRIMARY KEY (`id`), KEY `FKGROUP000000001` (`group_id`), KEY `FKCLIENT00000001` (`client_id`), CONSTRAINT `FKGROUP000000001` FOREIGN KEY (`group_id`) REFERENCES `m_group` (`id`), CONSTRAINT `FKCLIENT00000001` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`), CONSTRAINT `FKSTAFF000000001` FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE `acc_gl_office_mapping` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`gl_account_id` BIGINT(20) NOT NULL DEFAULT '0',	`office_id` BIGINT(20) NOT NULL,	`financial_account_type` SMALLINT(5) NOT NULL,	PRIMARY KEY (`id`),	INDEX `FK_office_mapping_acc_gl_account` (`gl_account_id`),	INDEX `FK_office_mapping_office` (`office_id`),	CONSTRAINT `FK_office_mapping_acc_gl_account` FOREIGN KEY (`gl_account_id`) REFERENCES `acc_gl_account` (`id`),	CONSTRAINT `FK_office_mapping_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE IF NOT EXISTS `m_deposit_product_recurring_detail` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_product_id` bigint(20) NOT NULL DEFAULT '0', `is_mandatory` tinyint(1) NOT NULL DEFAULT '1', `allow_withdrawal` tinyint(1) NOT NULL DEFAULT '0', `adjust_advance_towards_future_payments` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), KEY `FKDPRD00000000000001` (`savings_product_id`), CONSTRAINT `FKDPRD00000000000001` FOREIGN KEY (`savings_product_id`) REFERENCES `m_savings_product` (`id`))
select entry from ProvisioningEntry entry where entry.createdDate = :createdDate
select id from stretchy_report where report_name = 'Balance Outstanding'),(select id from stretchy_parameter where parameter_name='OfficeIdSelectOne'),'branch');
select * from ");
CREATE TABLE IF NOT EXISTS `stretchy_report` ( `id` int(11) NOT NULL AUTO_INCREMENT, `report_name` varchar(100) NOT NULL, `report_type` varchar(20) NOT NULL, `report_subtype` varchar(20) DEFAULT NULL, `report_category` varchar(45) DEFAULT NULL, `report_sql` text, `description` text, `core_report` tinyint(1) DEFAULT '0', `use_report` tinyint(1) DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `report_name_UNIQUE` (`report_name`))
CREATE TABLE IF NOT EXISTS `m_product_loan_configurable_attributes` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_product_id` bigint(20) NOT NULL, `amortization_method_enum` tinyint(4) NOT NULL DEFAULT '1', `interest_method_enum` tinyint(4) NOT NULL DEFAULT '1', `loan_transaction_strategy_id` tinyint(4) NOT NULL DEFAULT '1', `interest_calculated_in_period_enum` tinyint(4) NOT NULL DEFAULT '1', `arrearstolerance_amount` tinyint(4) NOT NULL DEFAULT '1', `repay_every` tinyint(4) NOT NULL DEFAULT '1', `moratorium` tinyint(4) NOT NULL DEFAULT '1', `grace_on_arrears_ageing` tinyint(4) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), KEY `fk_m_product_loan_configurable_attributes_0001` (`loan_product_id`), CONSTRAINT `fk_m_product_loan_configurable_attributes_0001` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE `extra_family_details` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) NOT NULL, `Name` varchar(40) DEFAULT NULL, `Date of Birth` date DEFAULT NULL, `Points Score` int(11) DEFAULT NULL, `Education_cd_Highest` int(11) DEFAULT NULL, `Other Notes` text, PRIMARY KEY (`id`), KEY `FK_Extra Family Details Data_1` (`client_id`), CONSTRAINT `FK_family_details` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE IF NOT EXISTS `m_image`(	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`location` varchar(500),	`storage_type_enum` SMALLINT(5),	PRIMARY KEY (`id`))
CREATE TABLE `m_survey_responses` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `question_id` BIGINT(20) NOT NULL, `a_text` VARCHAR(255) NOT NULL, `a_value` INT(4) NOT NULL, `sequence_no` INT(4) NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`question_id`) REFERENCES `m_survey_questions` (`id`))
CREATE TABLE IF NOT EXISTS `m_hook` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `template_id` smallint(6) NOT NULL, `is_active` smallint(3) NOT NULL DEFAULT '1', `name` varchar(45) NOT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `ugd_template_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `fk_template_id_idx` (`template_id`), KEY `fk_ugd_template_id` (`ugd_template_id`), CONSTRAINT `fk_template_id` FOREIGN KEY (`template_id`) REFERENCES `m_hook_templates` (`id`), CONSTRAINT `fk_ugd_template_id` FOREIGN KEY (`ugd_template_id`) REFERENCES `m_template` (`id`))
CREATE TABLE `m_guarantor` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_id` BIGINT(20) NOT NULL, `client_reln_cv_id` INT(11) DEFAULT NULL,	`type_enum` SMALLINT(5) NOT NULL,	`entity_id` BIGINT(20) NULL DEFAULT NULL,	`firstname` VARCHAR(50) NULL DEFAULT NULL,	`lastname` VARCHAR(50) NULL DEFAULT NULL,	`dob` DATE NULL DEFAULT NULL,	`address_line_1` VARCHAR(500) NULL DEFAULT NULL,	`address_line_2` VARCHAR(500) NULL DEFAULT NULL,	`city` VARCHAR(50) NULL DEFAULT NULL,	`state` VARCHAR(50) NULL DEFAULT NULL,	`country` VARCHAR(50) NULL DEFAULT NULL,	`zip` VARCHAR(20) NULL DEFAULT NULL,	`house_phone_number` VARCHAR(20) NULL DEFAULT NULL,	`mobile_number` VARCHAR(20) NULL DEFAULT NULL,	`comment` VARCHAR(500) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_guarantor_m_loan` (`loan_id`), CONSTRAINT `FK_m_guarantor_m_code_value` FOREIGN KEY (`client_reln_cv_id`) REFERENCES `m_code_value` (`id`),	CONSTRAINT `FK_m_guarantor_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_client_transaction` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`client_id` BIGINT(20) NOT NULL,	`office_id` BIGINT(20) NOT NULL,	`currency_code` VARCHAR(3) NOT NULL,	`payment_detail_id` BIGINT(20) NULL DEFAULT NULL,	`is_reversed` TINYINT(1) NOT NULL,	`external_id` VARCHAR(50) NULL DEFAULT NULL,	`transaction_date` DATE NOT NULL,	`transaction_type_enum` SMALLINT(5) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	`created_date` DATETIME NOT NULL,	`appuser_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `external_id` (`external_id`),	INDEX `FK_m_client_transaction_m_client` (`client_id`),	INDEX `FK_m_client_transaction_m_appuser` (`appuser_id`),	CONSTRAINT `FK_m_client_transaction_m_appuser` FOREIGN KEY (`appuser_id`) REFERENCES `m_appuser` (`id`),	CONSTRAINT `FK_m_client_transaction_m_client` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE IF NOT EXISTS `m_office` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `parent_id` bigint(20) DEFAULT NULL, `hierarchy` varchar(100) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, `name` varchar(50) NOT NULL, `opening_date` date NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_org` (`name`), UNIQUE KEY `externalid_org` (`external_id`), KEY `FK2291C477E2551DCC` (`parent_id`), CONSTRAINT `FK2291C477E2551DCC` FOREIGN KEY (`parent_id`) REFERENCES `m_office` (`id`))
CREATE TABLE IF NOT EXISTS `ppi_likelihoods` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(100) NOT NULL, `name` varchar(250) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_surveys` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`a_key` VARCHAR(32) NOT NULL,	`a_name` VARCHAR(255) NOT NULL,	`description` VARCHAR(4000) NULL,	`country_code` VARCHAR(2) NOT NULL,	`valid_from` DATETIME NULL DEFAULT NULL,	`valid_to` DATETIME NULL DEFAULT NULL,	PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `c_configuration` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(50) DEFAULT NULL, `value` int(11) DEFAULT NULL, `enabled` tinyint(1) NOT NULL DEFAULT '0', `is_trap_door` tinyint(1) NOT NULL DEFAULT '0', `description` varchar(300) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_UNIQUE` (`name`))
select hook from Hook hook inner join hook.events event where event.entityName = :entityName and event.actionName = :actionName and hook.isActive = 1
CREATE TABLE `m_loan_transaction_temp` (	`id` BIGINT(20) NOT NULL,	`loan_id` BIGINT(20) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL DEFAULT '0',	`transaction_date` DATE NOT NULL)
select image_key, 1 FROM m_client where image_key is not null LIMIT ', v_counter , ', ', 1);
CREATE TABLE IF NOT EXISTS `c_account_number_format` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `account_type_enum` smallint(1) NOT NULL, `prefix_type_enum` smallint(2) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `account_type_enum` (`account_type_enum`))
CREATE TABLE `m_cashiers` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`staff_id` BIGINT(20),	`teller_id` BIGINT(20),	`description` VARCHAR(100),	`start_date` DATE,	`end_date` DATE,	`start_time` varchar(10),	`end_time` varchar(10),	`full_day` TINYINT,	PRIMARY KEY (`id`),	INDEX `IK_m_cashiers_m_staff` (`staff_id`),	INDEX `IK_m_cashiers_m_teller` (`teller_id`),	CONSTRAINT `FK_m_cashiers_m_staff` FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`),	CONSTRAINT `FK_m_cashiers_m_teller` FOREIGN KEY (`teller_id`) REFERENCES `m_tellers` (`id`)	)
CREATE TABLE `m_saving_account_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `saving_account_id` bigint(20) NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `contra_id` bigint(20) DEFAULT NULL, `transaction_date` date NOT NULL, `amount` decimal(19,6) NOT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKSAT0000000001` (`saving_account_id`), KEY `FKSAT0000000002` (`contra_id`), CONSTRAINT `FKSAT0000000001` FOREIGN KEY (`saving_account_id`) REFERENCES `m_saving_account` (`id`), CONSTRAINT `FKSAT0000000002` FOREIGN KEY (`contra_id`) REFERENCES `m_saving_account_transaction` (`id`))
CREATE TABLE `m_client_loan_counter` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`client_id` BIGINT(20) NOT NULL,	`loan_product_id` BIGINT(20) NOT NULL,	`loan_id` BIGINT(20) NOT NULL,	`running_count` SMALLINT(4) NOT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_client_id_loan_counter` (`client_id`),	INDEX `FK_m_loan_product_loan_counter` (`loan_product_id`),	INDEX `FK_m_client_loan_counter` (`loan_id`),	CONSTRAINT `FK_m_client_id_loan_counter` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`),	CONSTRAINT `FK_m_loan_product_loan_counter` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`),	CONSTRAINT `FK_m_client_loan_counter` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
select id from c_external_service where name = 'S3');
CREATE TABLE `m_charge` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) DEFAULT NULL, `currency_code` varchar(3) NOT NULL, `charge_applies_to_enum` smallint(5) NOT NULL, `charge_time_enum` smallint(5) NOT NULL, `charge_calculation_enum` smallint(5) NOT NULL, `amount` decimal(19,6) NOT NULL, `is_penalty` tinyint(1) NOT NULL DEFAULT '0', `is_active` tinyint(1) NOT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE `m_payment_type` (	`id` INT(11) NOT NULL AUTO_INCREMENT,	`value` VARCHAR(100) NULL DEFAULT NULL,	`description` VARCHAR(500) NULL DEFAULT NULL,	`is_cash_payment` TINYINT(1) NULL DEFAULT '0',	`order_position` INT(11) NOT NULL DEFAULT '0',	PRIMARY KEY (`id`))
CREATE TABLE `m_saving_schedule` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `saving_account_id` bigint(20) NOT NULL, `duedate` date NOT NULL, `installment` smallint(5) NOT NULL, `deposit` decimal(21,4) NOT NULL, `payment_date` date DEFAULT NULL, `deposit_paid` decimal(21,4) DEFAULT NULL, `interest_accured` decimal(21,4) DEFAULT '0.0000', `completed_derived` bit(1) NOT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKSS00000000001` (`saving_account_id`), CONSTRAINT `FKSS00000000001` FOREIGN KEY (`saving_account_id`) REFERENCES `m_saving_account` (`id`))
CREATE TABLE `mix_xbrl_namespace` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `prefix` varchar(20) NOT NULL DEFAULT '', `url` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `UNQUE` (`prefix`))
CREATE TABLE IF NOT EXISTS `m_client_identifier` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) NOT NULL, `document_type_id` int(11) NOT NULL, `document_key` varchar(50) NOT NULL, `description` varchar(500) DEFAULT NULL, `createdby_id` bigint(20) DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unique_identifier_key` (`document_type_id`,`document_key`), UNIQUE KEY `unique_client_identifier` (`client_id`,`document_type_id`), KEY `FK_m_client_document_m_client` (`client_id`), KEY `FK_m_client_document_m_code_value` (`document_type_id`), CONSTRAINT `FK_m_client_document_m_client` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`), CONSTRAINT `FK_m_client_document_m_code_value` FOREIGN KEY (`document_type_id`) REFERENCES `m_code_value` (`id`))
CREATE TABLE `m_code` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_name` varchar(100) DEFAULT NULL, `is_system_defined` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_name` (`code_name`))
select holiday from Holiday holiday, IN(holiday.offices) office where (holiday.fromDate >= :date OR :date <= holiday.toDate) and holiday.status = :status and office.id = :officeId
select count(*) from m_account_transfer_transaction at where 
CREATE TABLE `m_role` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` varchar(500) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_product_loan_variable_installment_config` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_product_id` BIGINT(20) NOT NULL,	`minimum_gap` INT(4) NOT NULL,	`maximum_gap` INT(4) NOT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_mappings_m_variable_product_loan_id` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`)	)
CREATE TABLE IF NOT EXISTS `mix_taxonomy` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(100) DEFAULT NULL, `namespace_id` int(11) DEFAULT NULL, `dimension` varchar(100) DEFAULT NULL, `type` int(11) DEFAULT NULL, `description` varchar(1000) DEFAULT NULL, `need_mapping` tinyint(1) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_group` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `office_id` bigint(20) NOT NULL, `staff_id` bigint(20) DEFAULT NULL, `parent_id` bigint(20) DEFAULT NULL, `level_Id` int(11) NOT NULL, `hierarchy` varchar(100) DEFAULT NULL, `name` varchar(100) NOT NULL, `external_id` varchar(100) DEFAULT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`,`level_Id`), UNIQUE KEY `external_id` (`external_id`,`level_Id`), KEY `office_id` (`office_id`), KEY `staff_id` (`staff_id`), KEY `Parent_Id_reference` (`parent_id`), KEY `FK_m_group_level` (`level_Id`), CONSTRAINT `m_group_ibfk_1` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`), CONSTRAINT `Parent_Id_reference` FOREIGN KEY (`parent_id`) REFERENCES `m_group` (`id`), CONSTRAINT `FK_m_group_level` FOREIGN KEY (`level_Id`) REFERENCES `m_group_level` (`id`), CONSTRAINT `FK_m_group_m_staff` FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`))
CREATE TABLE IF NOT EXISTS `m_loan_collateral` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `type_cv_id` int(11) NOT NULL, `value` decimal(19,6) DEFAULT NULL, `description` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_collateral_m_loan` (`loan_id`), KEY `FK_collateral_code_value` (`type_cv_id`), CONSTRAINT `FK_collateral_code_value` FOREIGN KEY (`type_cv_id`) REFERENCES `m_code_value` (`id`), CONSTRAINT `FK_collateral_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_loan_transaction_repayment_schedule_mapping` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_transaction_id` BIGINT(20) NOT NULL,	`loan_repayment_schedule_id` BIGINT(20) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	`principal_portion_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`interest_portion_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`fee_charges_portion_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`penalty_charges_portion_derived` DECIMAL(19,6) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	INDEX `FK_mappings_m_loan_transaction` (`loan_transaction_id`),	INDEX `FK_mappings_m_loan_repayment_schedule` (`loan_repayment_schedule_id`),	CONSTRAINT `FK_mappings_m_loan_repayment_schedule` FOREIGN KEY (`loan_repayment_schedule_id`) REFERENCES `m_loan_repayment_schedule` (`id`),	CONSTRAINT `FK_mappings_m_loan_transaction` FOREIGN KEY (`loan_transaction_id`) REFERENCES `m_loan_transaction` (`id`))
select entry from ProvisioningEntry entry where entry.createdDate = (select max(entry1.createdDate) from ProvisioningEntry entry1 where entry1.isJournalEntryCreated='1')
CREATE TABLE `scheduler_detail` (	`id` SMALLINT(2) NOT NULL AUTO_INCREMENT,	`is_suspended` TINYINT(1) NOT NULL DEFAULT '0',	`execute_misfired_jobs` TINYINT(1) NOT NULL DEFAULT '1',	`reset_scheduler_on_bootup` TINYINT(1) NOT NULL DEFAULT '1',	PRIMARY KEY (`id`))
CREATE TABLE `m_loan_arrears_aging` ( `loan_id` bigint(20) NOT NULL AUTO_INCREMENT, `principal_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `interest_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `fee_charges_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `penalty_charges_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `total_overdue_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `overdue_since_date_derived` date DEFAULT NULL, PRIMARY KEY (`loan_id`), CONSTRAINT `m_loan_arrears_aging_ibfk_1` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_loan_charge_paid_by` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_transaction_id` BIGINT(20) NOT NULL,	`loan_charge_id` BIGINT(20) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	PRIMARY KEY (`id`),	INDEX `FK__m_loan_transaction` (`loan_transaction_id`),	INDEX `FK__m_loan_charge` (`loan_charge_id`),	CONSTRAINT `FK__m_loan_charge` FOREIGN KEY (`loan_charge_id`) REFERENCES `m_loan_charge` (`id`),	CONSTRAINT `FK__m_loan_transaction` FOREIGN KEY (`loan_transaction_id`) REFERENCES `m_loan_transaction` (`id`))
CREATE TABLE IF NOT EXISTS `stretchy_report_parameter` ( `id` int(11) NOT NULL AUTO_INCREMENT, `report_id` int(11) NOT NULL, `parameter_id` int(11) NOT NULL, `report_parameter_name` varchar(45) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `report_parameter_unique` (`report_id`,`parameter_id`), KEY `fk_report_parameter_001_idx` (`report_id`), KEY `fk_report_parameter_002_idx` (`parameter_id`), CONSTRAINT `fk_report_parameter_001` FOREIGN KEY (`report_id`) REFERENCES `stretchy_report` (`id`) ON DELETE CASCADE, CONSTRAINT `fk_report_parameter_002` FOREIGN KEY (`parameter_id`) REFERENCES `stretchy_parameter` (`id`))
CREATE TABLE `m_client_charge_paid_by` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`client_transaction_id` BIGINT(20) NOT NULL,	`client_charge_id` BIGINT(20) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_client_charge_paid_by_m_client_transaction` (`client_transaction_id`),	INDEX `FK_m_client_charge_paid_by_m_client_charge` (`client_charge_id`),	CONSTRAINT `FK_m_client_charge_paid_by_m_client_charge` FOREIGN KEY (`client_charge_id`) REFERENCES `m_client_charge` (`id`),	CONSTRAINT `FK_m_client_charge_paid_by_m_client_transaction` FOREIGN KEY (`client_transaction_id`) REFERENCES `m_client_transaction` (`id`))
CREATE TABLE IF NOT EXISTS `acc_rule_tags` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `acc_rule_id` bigint(20) NOT NULL, `tag_id` int(11) NOT NULL, `acc_type_enum` smallint(5) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `UNIQUE_ACCOUNT_RULE_TAGS` (`acc_rule_id`,`tag_id`,`acc_type_enum`), KEY `FK_acc_accounting_rule_id` (`acc_rule_id`), KEY `FK_m_code_value_id` (`tag_id`), CONSTRAINT `FK_acc_accounting_rule_id` FOREIGN KEY (`acc_rule_id`) REFERENCES `acc_accounting_rule` (`id`), CONSTRAINT `FK_m_code_value_id` FOREIGN KEY (`tag_id`) REFERENCES `m_code_value` (`id`))
CREATE TABLE `extra_family_details` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) NOT NULL, `Name` varchar(40) DEFAULT NULL, `Date of Birth` date DEFAULT NULL, `Points Score` int(11) DEFAULT NULL, `Education_cd_Highest` int(11) DEFAULT NULL, `Other Notes` text, PRIMARY KEY (`id`), KEY `FK_Extra Family Details Data_1` (`client_id`), CONSTRAINT `FK_latam_family_details` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE IF NOT EXISTS `scheduler_detail` ( `id` smallint(2) NOT NULL AUTO_INCREMENT, `is_suspended` tinyint(1) NOT NULL DEFAULT '0', `execute_misfired_jobs` tinyint(1) NOT NULL DEFAULT '1', `reset_scheduler_on_bootup` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_permission` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `grouping` varchar(45) DEFAULT NULL, `code` varchar(100) NOT NULL, `entity_name` varchar(100) DEFAULT NULL, `action_name` varchar(100) DEFAULT NULL, `can_maker_checker` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
CREATE TABLE IF NOT EXISTS `m_holiday` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `from_date` datetime NOT NULL, `to_date` datetime NOT NULL, `repayments_rescheduled_to` datetime NOT NULL, `status_enum` int(5) NOT NULL DEFAULT '100', `processed` tinyint(1) NOT NULL DEFAULT '0', `description` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `holiday_name` (`name`,`from_date`))
CREATE TABLE IF NOT EXISTS `m_office` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `parent_id` bigint(20) DEFAULT NULL, `hierarchy` varchar(100) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, `name` varchar(50) NOT NULL, `opening_date` date NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_org` (`name`), UNIQUE KEY `externalid_org` (`external_id`), KEY `FK2291C477E2551DCC` (`parent_id`), CONSTRAINT `FK2291C477E2551DCC` FOREIGN KEY (`parent_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_account_transfer_standing_instructions_history` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`standing_instruction_id` BIGINT(20) NOT NULL,	`status` VARCHAR(20) NOT NULL,	`execution_time` DATETIME NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	`error_log` VARCHAR(500) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_account_transfer_standing_instructions_history` (`standing_instruction_id`),	CONSTRAINT `FK_m_account_transfer_standing_instructions_m_history` FOREIGN KEY (`standing_instruction_id`) REFERENCES `m_account_transfer_standing_instructions` (`id`))
CREATE TABLE IF NOT EXISTS `m_product_loan_configurable_attributes` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_product_id` bigint(20) NOT NULL, `amortization_method_enum` tinyint(4) NOT NULL DEFAULT '1', `interest_method_enum` tinyint(4) NOT NULL DEFAULT '1', `loan_transaction_strategy_id` tinyint(4) NOT NULL DEFAULT '1', `interest_calculated_in_period_enum` tinyint(4) NOT NULL DEFAULT '1', `arrearstolerance_amount` tinyint(4) NOT NULL DEFAULT '1', `repay_every` tinyint(4) NOT NULL DEFAULT '1', `moratorium` tinyint(4) NOT NULL DEFAULT '1', `grace_on_arrears_ageing` tinyint(4) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), KEY `fk_m_product_loan_configurable_attributes_0001` (`loan_product_id`), CONSTRAINT `fk_m_product_loan_configurable_attributes_0001` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
select id from m_savings_account_charge sac where sac.savings_account_id=v_account_id and sac.charge_id=t_charge_id and sac.charge_time_enum=6);
CREATE TABLE IF NOT EXISTS `m_templatemappers` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `mapperkey` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL, `mapperorder` int(11) DEFAULT NULL, `mappervalue` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_office` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `parent_id` bigint(20) DEFAULT NULL, `hierarchy` varchar(100) DEFAULT NULL, `external_id` varchar(100) DEFAULT NULL, `name` varchar(50) NOT NULL, `opening_date` date NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_org` (`name`), UNIQUE KEY `externalid_org` (`external_id`), KEY `FK2291C477E2551DCC` (`parent_id`), CONSTRAINT `FK2291C477E2551DCC` FOREIGN KEY (`parent_id`) REFERENCES `m_office` (`id`))
CREATE TABLE IF NOT EXISTS `m_role` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` varchar(500) NOT NULL, `is_disabled` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `unq_name` (`name`))
CREATE TABLE `m_guarantor` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_id` BIGINT(20) NOT NULL, `client_reln_cv_id` INT(11) DEFAULT NULL,	`type_enum` SMALLINT(5) NOT NULL,	`entity_id` BIGINT(20) NULL DEFAULT NULL,	`firstname` VARCHAR(50) NULL DEFAULT NULL,	`lastname` VARCHAR(50) NULL DEFAULT NULL,	`dob` DATE NULL DEFAULT NULL,	`address_line_1` VARCHAR(500) NULL DEFAULT NULL,	`address_line_2` VARCHAR(500) NULL DEFAULT NULL,	`city` VARCHAR(50) NULL DEFAULT NULL,	`state` VARCHAR(50) NULL DEFAULT NULL,	`country` VARCHAR(50) NULL DEFAULT NULL,	`zip` VARCHAR(20) NULL DEFAULT NULL,	`house_phone_number` VARCHAR(20) NULL DEFAULT NULL,	`mobile_number` VARCHAR(20) NULL DEFAULT NULL,	`comment` VARCHAR(500) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_guarantor_m_loan` (`loan_id`), CONSTRAINT `FK_m_guarantor_m_code_value` FOREIGN KEY (`client_reln_cv_id`) REFERENCES `m_code_value` (`id`)	CONSTRAINT `FK_m_guarantor_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_product_loan_recalculation_details` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`product_id` BIGINT(20) NOT NULL,	`compound_type_enum` SMALLINT(5) NOT NULL,	`reschedule_strategy_enum` SMALLINT(5) NOT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_m_product_loan_m_product_loan_recalculation_details` FOREIGN KEY (`product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE `m_savings_account_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_id` bigint(20) NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `transaction_date` date NOT NULL, `amount` decimal(19,6) NOT NULL, `is_reversed` tinyint(1) NOT NULL, PRIMARY KEY (`id`), KEY `FKSAT0000000001` (`savings_account_id`), CONSTRAINT `FKSAT0000000001` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE IF NOT EXISTS `m_group_level` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parent_id` int(11) DEFAULT NULL, `super_parent` tinyint(1) NOT NULL, `level_name` varchar(100) NOT NULL, `recursable` tinyint(1) NOT NULL, `can_have_clients` tinyint(1) NOT NULL, PRIMARY KEY (`id`), KEY `Parent_levelId_reference` (`parent_id`), CONSTRAINT `Parent_levelId_reference` FOREIGN KEY (`parent_id`) REFERENCES `m_group_level` (`id`))
CREATE TABLE `m_provision_category` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`category_name` VARCHAR(100) NOT NULL,	`description` VARCHAR(300) NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `category_name` (`category_name`))
CREATE TABLE IF NOT EXISTS `acc_product_mapping` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `gl_account_id` bigint(20) DEFAULT NULL, `product_id` bigint(20) DEFAULT NULL, `product_type` smallint(5) DEFAULT NULL, `payment_type` int(11) DEFAULT NULL, `charge_id` bigint(20) DEFAULT NULL, `financial_account_type` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_acc_product_mapping_m_charge` (`charge_id`), KEY `FK_acc_product_mapping_m_payment_type` (`payment_type`), CONSTRAINT `FK_acc_product_mapping_m_charge` FOREIGN KEY (`charge_id`) REFERENCES `m_charge` (`id`), CONSTRAINT `FK_acc_product_mapping_m_payment_type` FOREIGN KEY (`payment_type`) REFERENCES `m_payment_type` (`id`))
select id from stretchy_report where report_name = 'Collection Report'),(select id from stretchy_parameter where parameter_name='startDateSelect'),'fromDate');
CREATE TABLE `m_payment_detail` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`payment_type_enum` SMALLINT(5) NOT NULL,	`account_number` VARCHAR(100) NULL DEFAULT NULL,	`check_number` VARCHAR(100) NULL DEFAULT NULL,	`receipt_number` VARCHAR(100) NULL DEFAULT NULL,	`bank_number` VARCHAR(100) NULL DEFAULT NULL,	`routing_code` VARCHAR(100) NULL DEFAULT NULL,	PRIMARY KEY (`id`))
CREATE TABLE `m_code` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_name` varchar(100) DEFAULT NULL, `is_system_defined` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_name` (`code_name`))
CREATE TABLE `stretchy_report_tmp` ( `id` int(11) NOT NULL AUTO_INCREMENT, `report_name` varchar(100) NOT NULL, `report_type` varchar(20) NOT NULL, `report_subtype` varchar(20) DEFAULT NULL, `report_category` varchar(45) DEFAULT NULL, `report_sql` text, `description` text, `core_report` tinyint(1) DEFAULT '0', `use_report` tinyint(1) DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `report_name_UNIQUE` (`report_name`))
select 1 from information_schema.tables where table_schema = schema() and table_name = ?)) = 1, 'true', 'false')
CREATE TABLE IF NOT EXISTS `m_loan_term_variations` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `term_type` smallint(2) NOT NULL, `applicable_date` date NOT NULL, `decimal_value` decimal(19,6) DEFAULT NULL, `date_value` date DEFAULT NULL, `is_specific_to_installment` tinyint(4) NOT NULL DEFAULT '0', `applied_on_loan_status` smallint(5) NOT NULL, PRIMARY KEY (`id`), KEY `FK_loan_id_m_loan_id` (`loan_id`), CONSTRAINT `FK_loan_id_m_loan_id` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_holiday_office` ( `holiday_id` bigint(20) NOT NULL, `office_id` bigint(20) NOT NULL, PRIMARY KEY (`holiday_id`,`office_id`), KEY `m_holiday_id_ibfk_1` (`holiday_id`), KEY `m_office_id_ibfk_2` (`office_id`), CONSTRAINT `m_holiday_id_ibfk_1` FOREIGN KEY (`holiday_id`) REFERENCES `m_holiday` (`id`), CONSTRAINT `m_office_id_ibfk_2` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE IF NOT EXISTS `m_loan_disbursement_detail` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `expected_disburse_date` datetime NOT NULL, `disbursedon_date` datetime DEFAULT NULL, `principal` decimal(19,6) NOT NULL, PRIMARY KEY (`id`), KEY `FK_loan_disbursement_detail_loan_id` (`loan_id`), CONSTRAINT `FK_loan_disbursement_detail_loan_id` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_code` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_name` varchar(100) DEFAULT NULL, `is_system_defined` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_name` (`code_name`))
CREATE TABLE `m_loan_collateral` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `type_cv_id` int(11) NOT NULL, `description` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_collateral_m_loan` (`loan_id`), KEY `FK_collateral_code_value` (`type_cv_id`), CONSTRAINT `FK_collateral_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`), CONSTRAINT `FK_collateral_code_value` FOREIGN KEY (`type_cv_id`) REFERENCES `m_code_value` (`id`))
select id from stretchy_report where report_name = 'Client Loan Account Schedule'), (select id from stretchy_parameter where parameter_name='selectAccount'), 'accountNo');
CREATE TABLE `oauth_client_details` ( `client_id` varchar(128) NOT NULL, `resource_ids` varchar(256) DEFAULT NULL, `client_secret` varchar(256) DEFAULT NULL, `scope` varchar(256) DEFAULT NULL, `authorized_grant_types` varchar(256) DEFAULT NULL, `web_server_redirect_uri` varchar(256) DEFAULT NULL, `authorities` varchar(256) DEFAULT NULL, `access_token_validity` int(11) DEFAULT NULL, `refresh_token_validity` int(11) DEFAULT NULL, `additional_information` varchar(4096) DEFAULT NULL, `autoapprove` BIT(1) NULL DEFAULT NULL, PRIMARY KEY (`client_id`))
CREATE TABLE `timezones` ( `id` int(3) NOT NULL AUTO_INCREMENT, `country_code` varchar(2) NOT NULL, `timezonename` varchar(100) NOT NULL, `comments` varchar(150) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_permission` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `grouping` varchar(45) DEFAULT NULL, `code` varchar(100) NOT NULL, `entity_name` varchar(100) DEFAULT NULL, `action_name` varchar(100) DEFAULT NULL, `can_maker_checker` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
CREATE TABLE IF NOT EXISTS `acc_gl_closure` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `office_id` bigint(20) NOT NULL, `closing_date` date NOT NULL, `is_deleted` int(20) NOT NULL DEFAULT '0', `createdby_id` bigint(20) DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `comments` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `office_id_closing_date` (`office_id`,`closing_date`), KEY `FK_acc_gl_closure_m_office` (`office_id`), KEY `FK_acc_gl_closure_m_appuser` (`createdby_id`), KEY `FK_acc_gl_closure_m_appuser_2` (`lastmodifiedby_id`), CONSTRAINT `FK_acc_gl_closure_m_appuser` FOREIGN KEY (`createdby_id`) REFERENCES `m_appuser` (`id`), CONSTRAINT `FK_acc_gl_closure_m_appuser_2` FOREIGN KEY (`lastmodifiedby_id`) REFERENCES `m_appuser` (`id`), CONSTRAINT `FK_acc_gl_closure_m_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_permission` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `grouping` varchar(45) DEFAULT NULL, `code` varchar(100) NOT NULL, `entity_name` varchar(100) DEFAULT NULL, `action_name` varchar(100) DEFAULT NULL, `can_maker_checker` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
select id from stretchy_report where report_name = 'Client Saving Transactions'), (select id from stretchy_parameter where parameter_name='selectAccount'), 'accountNo');
CREATE TABLE `m_loan_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `is_reversed` TINYINT(1) NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `transaction_date` date NOT NULL, `amount` decimal(19,6) NOT NULL, `principal_portion_derived` decimal(19,6) DEFAULT NULL, `interest_portion_derived` decimal(19,6) DEFAULT NULL, `fee_charges_portion_derived` decimal(19,6) DEFAULT NULL, `penalty_charges_portion_derived` decimal(19,6) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKCFCEA42640BE0710` (`loan_id`), CONSTRAINT `FKCFCEA42640BE0710` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_office_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `from_office_id` bigint(20) DEFAULT NULL, `to_office_id` bigint(20) DEFAULT NULL, `currency_code` varchar(3) NOT NULL, `currency_digits` int(11) NOT NULL, `transaction_amount` decimal(19,6) NOT NULL, `transaction_date` date NOT NULL, `description` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK1E37728B93C6C1B6` (`to_office_id`), KEY `FK1E37728B783C5C25` (`from_office_id`), CONSTRAINT `FK1E37728B783C5C25` FOREIGN KEY (`from_office_id`) REFERENCES `m_office` (`id`), CONSTRAINT `FK1E37728B93C6C1B6` FOREIGN KEY (`to_office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_staff` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `is_loan_officer` tinyint(1) NOT NULL DEFAULT '0', `office_id` bigint(20) DEFAULT NULL, `firstname` varchar(50) DEFAULT NULL, `lastname` varchar(50) DEFAULT NULL, `display_name` varchar(100) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `display_name` (`display_name`), KEY `FK_m_staff_m_office` (`office_id`), CONSTRAINT `FK_m_staff_m_office` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_provisioning_criteria` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`criteria_name` VARCHAR(200) NOT NULL,	`createdby_id` BIGINT(20) NULL DEFAULT NULL,	`created_date` DATETIME NULL DEFAULT NULL,	`lastmodifiedby_id` BIGINT(20) NULL DEFAULT NULL,	`lastmodified_date` DATETIME NULL DEFAULT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `criteria_name` (`criteria_name`),	FOREIGN KEY (`createdby_id`) REFERENCES `m_appuser` (`id`),	FOREIGN KEY (`lastmodifiedby_id`) REFERENCES `m_appuser` (`id`))
CREATE TABLE `m_entity_to_entity_access` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`entity_type` VARCHAR(50) NOT NULL,	`entity_id` BIGINT(20) NOT NULL,	`access_type_code_value_id` INT(11) NOT NULL,	`second_entity_type` VARCHAR(50) NOT NULL,	`second_entity_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`id`),	INDEX `IDX_OFFICE` (`entity_type`,`entity_id`),	UNIQUE KEY `id_uniq_m_entity_to_entity_access` (`entity_type`,`entity_id`,`access_type_code_value_id`,`second_entity_type`,`second_entity_id`),	CONSTRAINT `FK_access_type_code_m_code_value` FOREIGN KEY (`access_type_code_value_id`) REFERENCES `m_code_value` (`id`))
CREATE TABLE IF NOT EXISTS `m_code_value` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_id` int(11) NOT NULL, `code_value` varchar(100) DEFAULT NULL, `code_description` varchar(500) DEFAULT NULL, `order_position` int(11) NOT NULL DEFAULT '0', `code_score` int(11) DEFAULT NULL, `is_active` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), UNIQUE KEY `code_value` (`code_id`,`code_value`), KEY `FKCFCEA42640BE071Z` (`code_id`), CONSTRAINT `FKCFCEA42640BE071Z` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
CREATE TABLE IF NOT EXISTS `rpt_sequence` ( `id` int(11) NOT NULL AUTO_INCREMENT, PRIMARY KEY (`id`))
CREATE TABLE `m_loan_collateral` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `type_cv_id` int(11) NOT NULL, `value` DECIMAL(19,6) DEFAULT NULL, `description` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_collateral_m_loan` (`loan_id`), KEY `FK_collateral_code_value` (`type_cv_id`), CONSTRAINT `FK_collateral_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`), CONSTRAINT `FK_collateral_code_value` FOREIGN KEY (`type_cv_id`) REFERENCES `m_code_value` (`id`))
CREATE TABLE `m_code` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_name` varchar(100) DEFAULT NULL, `is_system_defined` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_name` (`code_name`))
CREATE TABLE IF NOT EXISTS `m_hook_templates` ( `id` SMALLINT(6) NOT NULL AUTO_INCREMENT, `name` VARCHAR(45) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_role` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `description` varchar(500) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unq_name` (`name`))
select id from stretchy_report where report_name = 'Disbursal Report'),(select id from stretchy_parameter where parameter_name='startDateSelect'),'fromDate');
CREATE TABLE `m_floating_rates` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`name` VARCHAR(200) NOT NULL,	`is_base_lending_rate` BIT(1) NOT NULL DEFAULT 0,	`is_active` BIT(1) NOT NULL DEFAULT 1,	`createdby_id` BIGINT(20) NOT NULL,	`created_date` DATETIME NOT NULL,	`lastmodifiedby_id` BIGINT(20) NOT NULL,	`lastmodified_date` DATETIME NOT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `unq_name` (`name`))
CREATE TABLE `latam_extra_client_details` ( `client_id` bigint(20) NOT NULL, `Business Description` varchar(100) DEFAULT NULL, `Years in Business` int(11) DEFAULT NULL, `Gender_cd` int(11) DEFAULT NULL, `Education_cv` varchar(60) DEFAULT NULL, `Next Visit` date DEFAULT NULL, `Highest Rate Paid` decimal(19,6) DEFAULT NULL, `Comment` text, PRIMARY KEY (`client_id`), CONSTRAINT `FK_latam_extra_client_details` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE IF NOT EXISTS `m_appuser_previous_password` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `user_id` bigint(20) NOT NULL, `password` varchar(255) NOT NULL, `removal_date` date NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_account_transfer_standing_instructions_history` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `standing_instruction_id` bigint(20) NOT NULL, `status` varchar(20) NOT NULL, `execution_time` datetime NOT NULL, `amount` decimal(19,6) NOT NULL, `error_log` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_account_transfer_standing_instructions_history` (`standing_instruction_id`), CONSTRAINT `FK_m_account_transfer_standing_instructions_m_history` FOREIGN KEY (`standing_instruction_id`) REFERENCES `m_account_transfer_standing_instructions` (`id`))
CREATE TABLE `m_client` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `account_no` varchar(20) NOT NULL, `office_id` bigint(20) NOT NULL, `external_id` varchar(100) DEFAULT NULL, `firstname` varchar(50) DEFAULT NULL, `middlename` varchar(50) DEFAULT NULL, `lastname` varchar(50) DEFAULT NULL, `fullname` varchar(100) DEFAULT NULL, `display_name` varchar(100) NOT NULL, `image_key` varchar(500) DEFAULT NULL, `joined_date` date DEFAULT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `account_no_UNIQUE` (`account_no`), UNIQUE KEY `external_id` (`external_id`), KEY `FKCE00CAB3E0DD567A` (`office_id`), CONSTRAINT `FKCE00CAB3E0DD567A` FOREIGN KEY (`office_id`) REFERENCES `m_office` (`id`))
CREATE TABLE `m_survey_lookup_tables` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `survey_id` BIGINT(20) NOT NULL, `a_key` VARCHAR(255) NOT NULL, `description` INT(4) NULL, `value_from` INT(4) NOT NULL, `value_to` INT(4) NOT NULL, `score` DECIMAL(5, 2) NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`survey_id`) REFERENCES `m_surveys` (`id`))
SELECT COUNT(*) FROM AppUser a JOIN a.roles r WHERE r.id = :roleId AND a.deleted = false
CREATE TABLE `m_guarantor_funding_details` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`guarantor_id` BIGINT(20) NOT NULL,	`account_associations_id` BIGINT(20) NOT NULL,	`amount` DECIMAL(19,6) NOT NULL,	`amount_released_derived` DECIMAL(19,6) NULL,	`amount_remaining_derived` DECIMAL(19,6) NULL,	`amount_transfered_derived` DECIMAL(19,6) NULL,	`status_enum` SMALLINT(3) NOT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_m_guarantor_fund_details_m_guarantor` FOREIGN KEY (`guarantor_id`) REFERENCES `m_guarantor` (`id`),	CONSTRAINT `FK_m_guarantor_fund_details_account_associations_id` FOREIGN KEY (`account_associations_id`) REFERENCES `m_portfolio_account_associations` (`id`))
CREATE TABLE IF NOT EXISTS `m_client_non_person` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) NOT NULL, `constitution_cv_id` int(11) NOT NULL, `incorp_no` varchar(50) DEFAULT NULL, `incorp_validity_till` datetime DEFAULT NULL, `main_business_line_cv_id` int(11) DEFAULT NULL, `remarks` varchar(150) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `client_id` (`client_id`), KEY `FK_client_id` (`client_id`), CONSTRAINT `FK_client_id` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`))
CREATE TABLE IF NOT EXISTS `acc_rule_tags` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `acc_rule_id` bigint(20) NOT NULL, `tag_id` int(11) NOT NULL, `acc_type_enum` smallint(5) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `UNIQUE_ACCOUNT_RULE_TAGS` (`acc_rule_id`,`tag_id`,`acc_type_enum`), KEY `FK_acc_accounting_rule_id` (`acc_rule_id`), KEY `FK_m_code_value_id` (`tag_id`), CONSTRAINT `FK_acc_accounting_rule_id` FOREIGN KEY (`acc_rule_id`) REFERENCES `acc_accounting_rule` (`id`), CONSTRAINT `FK_m_code_value_id` FOREIGN KEY (`tag_id`) REFERENCES `m_code_value` (`id`))
CREATE TABLE IF NOT EXISTS `c_external_service` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name_UNIQUE` (`name`))
select id from stretchy_report where report_name = 'Collection Report'),(select id from stretchy_parameter where parameter_name='endDateSelect'),'toDate');
CREATE TABLE `mix_taxonomy` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(100) DEFAULT NULL, `namespace_id` int(11) DEFAULT NULL, `dimension` varchar(100) DEFAULT NULL, `type` int(11) DEFAULT NULL, `description` varchar(1000) DEFAULT NULL, `need_mapping` tinyint(1) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_image` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `location` varchar(500) DEFAULT NULL, `storage_type_enum` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `sms_messages_outbound` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `group_id` bigint(20) DEFAULT NULL, `client_id` bigint(20) DEFAULT NULL, `staff_id` bigint(20) DEFAULT NULL, `status_enum` int(5) NOT NULL DEFAULT '100', `mobile_no` varchar(50) NOT NULL, `message` varchar(1000) NOT NULL, PRIMARY KEY (`id`), KEY `FKGROUP000000001` (`group_id`), KEY `FKCLIENT00000001` (`client_id`), KEY `FKSTAFF000000001` (`staff_id`), CONSTRAINT `FKCLIENT00000001` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`), CONSTRAINT `FKGROUP000000001` FOREIGN KEY (`group_id`) REFERENCES `m_group` (`id`), CONSTRAINT `FKSTAFF000000001` FOREIGN KEY (`staff_id`) REFERENCES `m_staff` (`id`))
select product_id from m_loanproduct_provisioning_mapping where m_loanproduct_provisioning_mapping.criteria_id=
CREATE TABLE `m_guarantor` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `client_reln_cv_id` int(11) DEFAULT NULL, `type_enum` smallint(5) NOT NULL, `entity_id` bigint(20) DEFAULT NULL, `firstname` varchar(50) DEFAULT NULL, `lastname` varchar(50) DEFAULT NULL, `dob` date DEFAULT NULL, `address_line_1` varchar(500) DEFAULT NULL, `address_line_2` varchar(500) DEFAULT NULL, `city` varchar(50) DEFAULT NULL, `state` varchar(50) DEFAULT NULL, `country` varchar(50) DEFAULT NULL, `zip` varchar(20) DEFAULT NULL, `house_phone_number` varchar(20) DEFAULT NULL, `mobile_number` varchar(20) DEFAULT NULL, `comment` varchar(500) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_m_guarantor_m_loan` (`loan_id`), KEY `FK_m_guarantor_m_code_value` (`client_reln_cv_id`), CONSTRAINT `FK_m_guarantor_m_code_value` FOREIGN KEY (`client_reln_cv_id`) REFERENCES `m_code_value` (`id`), CONSTRAINT `FK_m_guarantor_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_loan_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `is_reversed` tinyint(1) NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `transaction_date` date NOT NULL, `amount` decimal(19,6) NOT NULL, `principal_portion_derived` decimal(19,6) DEFAULT NULL, `interest_portion_derived` decimal(19,6) DEFAULT NULL, `fee_charges_portion_derived` decimal(19,6) DEFAULT NULL, `penalty_charges_portion_derived` decimal(19,6) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FKCFCEA42640BE0710` (`loan_id`), CONSTRAINT `FKCFCEA42640BE0710` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_product_loan_variations_borrower_cycle` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_product_id` BIGINT(20) NOT NULL DEFAULT '0',	`borrower_cycle_number` INT(3) NOT NULL DEFAULT '0',	`value_condition` INT(1) NOT NULL DEFAULT '0',	`param_type` INT(1) NOT NULL DEFAULT '0',	`default_value` DECIMAL(19,6) NOT NULL DEFAULT '0.000000',	`max_value` DECIMAL(19,6) NULL DEFAULT NULL,	`min_value` DECIMAL(19,6) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	INDEX `borrower_cycle_loan_product_FK` (`loan_product_id`),	CONSTRAINT `borrower_cycle_loan_product_FK` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE `m_permission` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `grouping` varchar(45) DEFAULT NULL, `code` varchar(100) NOT NULL, `entity_name` varchar(100) DEFAULT NULL, `action_name` varchar(100) DEFAULT NULL, `can_maker_checker` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), UNIQUE KEY `code` (`code`))
select min(transaction_date) from m_loan_transaction where loan_id=? and transaction_type_enum=2
CREATE TABLE `m_loan_overdue_installment_charge` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_charge_id` BIGINT(20) NOT NULL,	`loan_schedule_id` BIGINT(20) NOT NULL,	`frequency_number` INT(10) NOT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_m_loan_overdue_installment_charge_m_loan_charge` FOREIGN KEY (`loan_charge_id`) REFERENCES `m_loan_charge` (`id`),	CONSTRAINT `FK_m_loan_overdue_installment_charge_m_loan_repayment_schedule` FOREIGN KEY (`loan_schedule_id`) REFERENCES `m_loan_repayment_schedule` (`id`))
CREATE TABLE IF NOT EXISTS `m_savings_product_charge` ( `savings_product_id` bigint(20) NOT NULL, `charge_id` bigint(20) NOT NULL, PRIMARY KEY (`savings_product_id`,`charge_id`), KEY `charge_id` (`charge_id`), CONSTRAINT `m_savings_product_charge_ibfk_1` FOREIGN KEY (`charge_id`) REFERENCES `m_charge` (`id`), CONSTRAINT `m_savings_product_charge_ibfk_2` FOREIGN KEY (`savings_product_id`) REFERENCES `m_savings_product` (`id`))
CREATE TABLE `m_code_value` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_id` int(11) NOT NULL, `code_value` varchar(100) DEFAULT NULL, `order_position` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `code_value` (`code_id`,`code_value`), KEY `FKCFCEA42640BE071Z` (`code_id`), CONSTRAINT `FKCFCEA42640BE071Z` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
select 1 from m_product_loan_charge lc where lc.charge_id = ?)) = 1, 'true', 'false')
CREATE TABLE IF NOT EXISTS `m_product_loan_floating_rates` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_product_id` bigint(20) NOT NULL, `floating_rates_id` bigint(20) NOT NULL, `interest_rate_differential` decimal(19,6) NOT NULL DEFAULT '0.000000', `min_differential_lending_rate` decimal(19,6) NOT NULL DEFAULT '0.000000', `default_differential_lending_rate` decimal(19,6) NOT NULL DEFAULT '0.000000', `max_differential_lending_rate` decimal(19,6) NOT NULL DEFAULT '0.000000', `is_floating_interest_rate_calculation_allowed` bit(1) NOT NULL DEFAULT b'0', PRIMARY KEY (`id`), KEY `FK_mappings_m_product_loan_id` (`loan_product_id`), KEY `FK_mappings_m_floating_rates_id` (`floating_rates_id`), CONSTRAINT `FK_mappings_m_floating_rates_id` FOREIGN KEY (`floating_rates_id`) REFERENCES `m_floating_rates` (`id`), CONSTRAINT `FK_mappings_m_product_loan_id` FOREIGN KEY (`loan_product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_client_attendance` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `client_id` bigint(20) NOT NULL DEFAULT '0', `meeting_id` bigint(20) NOT NULL, `attendance_type_enum` smallint(5) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unique_client_meeting_attendance` (`client_id`,`meeting_id`), KEY `FK_m_meeting_m_client_attendance` (`meeting_id`), CONSTRAINT `FK_m_client_m_client_attendance` FOREIGN KEY (`client_id`) REFERENCES `m_client` (`id`), CONSTRAINT `FK_m_meeting_m_client_attendance` FOREIGN KEY (`meeting_id`) REFERENCES `m_meeting` (`id`))
CREATE TABLE IF NOT EXISTS `mix_taxonomy_mapping` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `identifier` varchar(50) NOT NULL DEFAULT '', `config` varchar(200) DEFAULT NULL, `last_update_date` datetime DEFAULT NULL, `currency` varchar(11) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_hook_schema` ( `id` SMALLINT(6) NOT NULL AUTO_INCREMENT, `hook_template_id` SMALLINT(6) NOT NULL, `field_type` VARCHAR(45) NOT NULL, `field_name` VARCHAR(100) NOT NULL, `placeholder` VARCHAR(100) DEFAULT NULL, `optional` TINYINT(3) NOT NULL DEFAULT 0, PRIMARY KEY (`id`), INDEX `fk_hook_template_id_idx` (`hook_template_id` ASC), CONSTRAINT `fk_hook_template_id` FOREIGN KEY (`hook_template_id`) REFERENCES `m_hook_templates` (`id`))
CREATE TABLE IF NOT EXISTS `m_loan_paid_in_advance` ( `loan_id` bigint(20) NOT NULL, `principal_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `interest_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `fee_charges_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `penalty_charges_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', `total_in_advance_derived` decimal(19,6) NOT NULL DEFAULT '0.000000', PRIMARY KEY (`loan_id`), CONSTRAINT `m_loan_paid_in_advance_ibfk_1` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE `m_savings_account_transaction` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `savings_account_id` bigint(20) NOT NULL, `transaction_type_enum` smallint(5) NOT NULL, `transaction_date` date NOT NULL, `amount` decimal(19,6) NOT NULL, `is_reversed` tinyint(1) NOT NULL, `running_balance_derived` DECIMAL(19,6) NULL, `balance_number_of_days_derived` INT NULL, `balance_end_date_derived` DATE NULL, `cumulative_balance_derived` DECIMAL(19,6) NULL, PRIMARY KEY (`id`), KEY `FKSAT0000000001` (`savings_account_id`), CONSTRAINT `FKSAT0000000001` FOREIGN KEY (`savings_account_id`) REFERENCES `m_savings_account` (`id`))
CREATE TABLE IF NOT EXISTS `m_holiday` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) NOT NULL, `from_date` datetime NOT NULL, `to_date` datetime NOT NULL, `repayments_rescheduled_to` datetime NOT NULL, `status_enum` int(5) NOT NULL DEFAULT '100', `processed` tinyint(1) NOT NULL DEFAULT '0', `description` varchar(100) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `holiday_name` (`name`,`from_date`))
CREATE TABLE `m_survey_questions` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `survey_id` BIGINT(20) NOT NULL, `component_key` VARCHAR(32) NULL, `a_key` VARCHAR(32) NOT NULL, `a_text` VARCHAR(255) NOT NULL, `description` VARCHAR(4000) NULL, `sequence_no` INT(4) NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`survey_id`) REFERENCES `m_surveys` (`id`))
CREATE TABLE `m_loanproduct_provisioning_mapping` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`product_id` BIGINT(20) NOT NULL,	`criteria_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `product_id` (`product_id`),	FOREIGN KEY (`product_id`) REFERENCES `m_product_loan` (`id`),	FOREIGN KEY (`criteria_id`) REFERENCES `m_provisioning_criteria` (`id`))
CREATE TABLE IF NOT EXISTS `m_loan_tranche_charges` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `loan_id` bigint(20) NOT NULL, `charge_id` bigint(20) NOT NULL, PRIMARY KEY (`id`), KEY `FK_m_loan_tranche_charges_m_loan` (`loan_id`), KEY `FK_m_loan_tranche_charges_m_charge` (`charge_id`), CONSTRAINT `FK_m_loan_tranche_charges_m_charge` FOREIGN KEY (`charge_id`) REFERENCES `m_charge` (`id`), CONSTRAINT `FK_m_loan_tranche_charges_m_loan` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
SELECT application_table_name FROM x_registered_table where registered_table_name = '" + datatable + "'
select count(*) from `" + datatableName + "`
CREATE TABLE IF NOT EXISTS `m_floating_rates` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(200) NOT NULL, `is_base_lending_rate` bit(1) NOT NULL DEFAULT b'0', `is_active` bit(1) NOT NULL DEFAULT b'1', `createdby_id` bigint(20) NOT NULL, `created_date` datetime NOT NULL, `lastmodifiedby_id` bigint(20) NOT NULL, `lastmodified_date` datetime NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `unq_name` (`name`))
CREATE TABLE `m_charge` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `name` varchar(100) DEFAULT NULL, `currency_code` varchar(3) NOT NULL, `charge_applies_to_enum` smallint(5) NOT NULL, `charge_time_enum` smallint(5) NOT NULL, `charge_calculation_enum` smallint(5) NOT NULL, `amount` decimal(19,6) NOT NULL, `is_penalty` tinyint(1) NOT NULL DEFAULT '0', `is_active` tinyint(1) NOT NULL, `is_deleted` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE `stretchy_report_parameter` ( `report_id` int(11) NOT NULL, `parameter_id` int(11) NOT NULL, `report_parameter_name` varchar(45) DEFAULT NULL, PRIMARY KEY (`report_id`,`parameter_id`), UNIQUE KEY `report_id_name_UNIQUE` (`report_id`,`report_parameter_name`))
CREATE TABLE `tenants` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `identifier` varchar(100) NOT NULL, `name` varchar(100) NOT NULL, `schema_name` varchar(100) NOT NULL, `timezone_id` varchar(100) NOT NULL, `country_id` int(11) DEFAULT NULL, `joined_date` date DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, `schema_server` varchar(100) NOT NULL DEFAULT 'localhost', `schema_server_port` varchar(10) NOT NULL DEFAULT '3306', `schema_username` varchar(100) NOT NULL DEFAULT 'root', `schema_password` varchar(100) NOT NULL DEFAULT 'mysql', `auto_update` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`))
CREATE TABLE `m_meeting` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`calendar_instance_id` BIGINT(20) NOT NULL,	`meeting_date` DATE NOT NULL,	PRIMARY KEY (`id`),	UNIQUE INDEX `unique_calendar_instance_id_meeting_date` (`calendar_instance_id`, `meeting_date`),	CONSTRAINT `FK_m_calendar_instance_m_meeting` FOREIGN KEY (`calendar_instance_id`) REFERENCES `m_calendar_instance` (`id`))
CREATE TABLE `m_product_mix` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`product_id` BIGINT(20) NOT NULL,	`restricted_product_id` BIGINT(20) NOT NULL,	PRIMARY KEY (`id`),	INDEX `FK_m_product_mix_product_id_to_m_product_loan` (`product_id`),	INDEX `FK_m_product_mix_restricted_product_id_to_m_product_loan` (`restricted_product_id`),	CONSTRAINT `FK_m_product_mix_restricted_product_id_to_m_product_loan` FOREIGN KEY (`restricted_product_id`) REFERENCES `m_product_loan` (`id`),	CONSTRAINT `FK_m_product_mix_product_id_to_m_product_loan` FOREIGN KEY (`product_id`) REFERENCES `m_product_loan` (`id`))
CREATE TABLE `m_loan_installment_charge` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_charge_id` BIGINT(20) NOT NULL,	`loan_schedule_id` BIGINT(20) NOT NULL,	`due_date` DATE NULL DEFAULT NULL,	`amount` DECIMAL(19,6) NOT NULL,	`amount_paid_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`amount_waived_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`amount_writtenoff_derived` DECIMAL(19,6) NULL DEFAULT NULL,	`amount_outstanding_derived` DECIMAL(19,6) NOT NULL DEFAULT '0.000000',	`is_paid_derived` TINYINT(1) NOT NULL DEFAULT '0',	`waived` TINYINT(1) NOT NULL DEFAULT '0',	`amount_through_charge_payment` DECIMAL(19,6) NULL DEFAULT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_loan_charge_id_charge_schedule` FOREIGN KEY (`loan_charge_id`) REFERENCES `m_loan_charge` (`id`),	CONSTRAINT `FK_loan_schedule_id_charge_schedule` FOREIGN KEY (`loan_schedule_id`) REFERENCES `m_loan_repayment_schedule` (`id`))
select 1 from m_savings_product_charge sc where sc.charge_id = ?)) = 1, 'true', 'false')
CREATE TABLE IF NOT EXISTS `m_code_value` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code_id` int(11) NOT NULL, `code_value` varchar(100) DEFAULT NULL, `code_description` varchar(500) DEFAULT NULL, `order_position` int(11) NOT NULL DEFAULT '0', `code_score` int(11) DEFAULT NULL, `is_active` tinyint(1) NOT NULL DEFAULT '1', PRIMARY KEY (`id`), UNIQUE KEY `code_value` (`code_id`,`code_value`), KEY `FKCFCEA42640BE071Z` (`code_id`), CONSTRAINT `FKCFCEA42640BE071Z` FOREIGN KEY (`code_id`) REFERENCES `m_code` (`id`))
CREATE TABLE IF NOT EXISTS `m_surveys` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `a_key` varchar(32) NOT NULL, `a_name` varchar(255) NOT NULL, `description` varchar(4000) DEFAULT NULL, `country_code` varchar(2) NOT NULL, `valid_from` datetime DEFAULT NULL, `valid_to` datetime DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `m_hook_registered_events` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `hook_id` BIGINT(20) NOT NULL, `entity_name` VARCHAR(45) NOT NULL, `action_name` VARCHAR(45) NOT NULL, PRIMARY KEY (`id`), INDEX `fk_hook_id_idx` (`hook_id` ASC), CONSTRAINT `fk_hook_idc` FOREIGN KEY (`hook_id`) REFERENCES `m_hook` (`id`))
CREATE TABLE IF NOT EXISTS `ppi_scores` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `score_from` int(11) NOT NULL, `score_to` int(11) NOT NULL, PRIMARY KEY (`id`))
select id from m_charge where name = t_withdrawal_fee_name);
CREATE TABLE `m_loan_term_variations` (	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,	`loan_id` BIGINT(20) NOT NULL,	`term_type` SMALLINT(2) NOT NULL,	`applicable_from` DATE NOT NULL,	`term_value` DECIMAL(19,6) NOT NULL,	PRIMARY KEY (`id`),	CONSTRAINT `FK_loan_id_m_loan_id` FOREIGN KEY (`loan_id`) REFERENCES `m_loan` (`id`))
CREATE TABLE IF NOT EXISTS `m_organisation_currency` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `code` varchar(3) NOT NULL, `decimal_places` smallint(5) NOT NULL, `currency_multiplesof` smallint(5) DEFAULT NULL, `name` varchar(50) NOT NULL, `display_symbol` varchar(10) DEFAULT NULL, `internationalized_name_code` varchar(50) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `m_survey_components` ( `id` BIGINT(20) NOT NULL AUTO_INCREMENT, `survey_id` BIGINT(20) NOT NULL, `a_key` VARCHAR(32) NOT NULL, `a_text` VARCHAR(255) NOT NULL, `description` VARCHAR(4000) NULL, `sequence_no` INT(4) NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`survey_id`) REFERENCES `m_surveys` (`id`))
CREATE TABLE IF NOT EXISTS `acc_product_mapping` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `gl_account_id` bigint(20) DEFAULT NULL, `product_id` bigint(20) DEFAULT NULL, `product_type` smallint(5) DEFAULT NULL, `payment_type` int(11) DEFAULT NULL, `charge_id` bigint(20) DEFAULT NULL, `financial_account_type` smallint(5) DEFAULT NULL, PRIMARY KEY (`id`), KEY `FK_acc_product_mapping_m_code_value` (`payment_type`), KEY `FK_acc_product_mapping_m_charge` (`charge_id`), CONSTRAINT `FK_acc_product_mapping_m_charge` FOREIGN KEY (`charge_id`) REFERENCES `m_charge` (`id`), CONSTRAINT `FK_acc_product_mapping_m_payment_type` FOREIGN KEY (`payment_type`) REFERENCES `m_payment_type` (`id`))
CREATE TABLE IF NOT EXISTS `m_provisioning_criteria` ( `id` bigint(20) NOT NULL AUTO_INCREMENT, `criteria_name` varchar(200) NOT NULL, `createdby_id` bigint(20) DEFAULT NULL, `created_date` datetime DEFAULT NULL, `lastmodifiedby_id` bigint(20) DEFAULT NULL, `lastmodified_date` datetime DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `criteria_name` (`criteria_name`), KEY `createdby_id` (`createdby_id`), KEY `lastmodifiedby_id` (`lastmodifiedby_id`), CONSTRAINT `m_provisioning_criteria_ibfk_1` FOREIGN KEY (`createdby_id`) REFERENCES `m_appuser` (`id`), CONSTRAINT `m_provisioning_criteria_ibfk_2` FOREIGN KEY (`lastmodifiedby_id`) REFERENCES `m_appuser` (`id`))
SELECT COUNT(*) FROM m_client INTO num_of_clients;
