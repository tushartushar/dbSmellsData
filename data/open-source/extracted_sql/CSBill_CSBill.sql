CREATE TABLE payment_details (id INT AUTO_INCREMENT NOT NULL, details LONGTEXT NOT NULL COMMENT \'(DC2Type:json_array)\', PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB')
CREATE TABLE contacts (id INT AUTO_INCREMENT NOT NULL, client_id INT DEFAULT NULL, firstname VARCHAR(125) NOT NULL, lastname VARCHAR(125) DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, INDEX IDX_3340157319EB6921 (client_id), PRIMARY KEY(id))
CREATE TABLE status (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(125) NOT NULL, `label` VARCHAR(125) DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, entity VARCHAR(255) NOT NULL, PRIMARY KEY(id))
CREATE TABLE notifications (id INT AUTO_INCREMENT NOT NULL, notification_event VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, hipchat VARCHAR(255) NOT NULL, sms VARCHAR(255) NOT NULL, PRIMARY KEY(id))
CREATE INDEX IDX_65D29B3219EB6921 ON payments (client_id)
CREATE INDEX IDX_318942FCD823E37A ON app_config (section_id)
CREATE TABLE payment_details (id INT AUTO_INCREMENT NOT NULL, array LONGTEXT NOT NULL COMMENT '(DC2Type:json_array)', PRIMARY KEY(id))
CREATE TABLE invoices (id INT AUTO_INCREMENT NOT NULL, status_id INT DEFAULT NULL, client_id INT DEFAULT NULL, total DOUBLE PRECISION NOT NULL, discount DOUBLE PRECISION NOT NULL, due DATE DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, users LONGTEXT NOT NULL COMMENT '(DC2Type:array)', INDEX IDX_6A2F2F956BF700BD (status_id), INDEX IDX_6A2F2F9519EB6921 (client_id), PRIMARY KEY(id))
CREATE TABLE ext_log_entries (id INT AUTO_INCREMENT NOT NULL, action VARCHAR(8) NOT NULL, logged_at DATETIME NOT NULL, object_id VARCHAR(32) DEFAULT NULL, object_class VARCHAR(255) NOT NULL, version INT NOT NULL, data LONGTEXT DEFAULT NULL COMMENT '(DC2Type:array)', username VARCHAR(255) DEFAULT NULL, INDEX log_class_lookup_idx (object_class), INDEX log_date_lookup_idx (logged_at), INDEX log_user_lookup_idx (username), PRIMARY KEY(id))
CREATE TABLE recurring_invoices (id INT AUTO_INCREMENT NOT NULL, invoice_id INT DEFAULT NULL, frequency VARCHAR(255) DEFAULT NULL, date_start DATE NOT NULL, date_end DATE DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, archived TINYINT(1) DEFAULT NULL, UNIQUE INDEX UNIQ_FE93E2842989F1FD (invoice_id), PRIMARY KEY(id))
CREATE TABLE config_sections (id INT AUTO_INCREMENT NOT NULL, parent_id INT DEFAULT NULL, name VARCHAR(125) NOT NULL, UNIQUE INDEX UNIQ_965EAD465E237E06 (name), INDEX IDX_965EAD46727ACA70 (parent_id), PRIMARY KEY(id))
CREATE TABLE tax_rates (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(32) NOT NULL, rate VARCHAR(32) NOT NULL, tax_type VARCHAR(32) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, PRIMARY KEY(id))
CREATE INDEX IDX_ECE1642CB2A824D8 ON quote_items (tax_id)
CREATE INDEX IDX_65D29B3219EB6921 ON payments (client_id)');
UPDATE contact_details SET is_primary = NULL  WHERE is_primary = 0
CREATE TABLE acl_classes (id INT UNSIGNED AUTO_INCREMENT NOT NULL, class_type VARCHAR(200) NOT NULL, UNIQUE INDEX UNIQ_69DD750638A36066 (class_type), PRIMARY KEY(id))
CREATE TABLE user_role (user_id INT NOT NULL, role_id INT NOT NULL, INDEX IDX_2DE8C6A3A76ED395 (user_id), INDEX IDX_2DE8C6A3D60322AC (role_id), PRIMARY KEY(user_id, role_id))
CREATE TABLE acl_security_identities (id INT UNSIGNED AUTO_INCREMENT NOT NULL, identifier VARCHAR(200) NOT NULL, username TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_8835EE78772E836AF85E0677 (identifier, username), PRIMARY KEY(id))
CREATE TABLE app_config (id INT AUTO_INCREMENT NOT NULL, `key` VARCHAR(125) NOT NULL, `value` LONGTEXT DEFAULT NULL, description LONGTEXT DEFAULT NULL, section VARCHAR(125) NOT NULL, PRIMARY KEY(id))
UPDATE contact_details SET is_primary = 0  WHERE is_primary IS NULL
CREATE INDEX IDX_65D29B326BF700BD ON payments (status_id)');
CREATE TABLE status (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(125) NOT NULL, `label` VARCHAR(125) DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, entity VARCHAR(255) NOT NULL, PRIMARY KEY(id))
CREATE INDEX IDX_C82E746BF700BD ON clients (status_id)');
CREATE TABLE entity_status (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(125) NOT NULL, class VARCHAR(125) DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, entity VARCHAR(255) NOT NULL, PRIMARY KEY(id))
CREATE INDEX IDX_6B6F05606BF700BD ON payment_details (status_id)
CREATE TABLE acl_entries (id INT UNSIGNED AUTO_INCREMENT NOT NULL, class_id INT UNSIGNED NOT NULL, object_identity_id INT UNSIGNED DEFAULT NULL, security_identity_id INT UNSIGNED NOT NULL, field_name VARCHAR(50) DEFAULT NULL, ace_order SMALLINT UNSIGNED NOT NULL, mask INT NOT NULL, granting TINYINT(1) NOT NULL, granting_strategy VARCHAR(30) NOT NULL, audit_success TINYINT(1) NOT NULL, audit_failure TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_46C8B806EA000B103D9AB4A64DEF17BCE4289BF4 (class_id, object_identity_id, field_name, ace_order), INDEX IDX_46C8B806EA000B103D9AB4A6DF9183C9 (class_id, object_identity_id, security_identity_id), INDEX IDX_46C8B806EA000B10 (class_id), INDEX IDX_46C8B8063D9AB4A6 (object_identity_id), INDEX IDX_46C8B806DF9183C9 (security_identity_id), PRIMARY KEY(id))
CREATE INDEX email ON contacts (email)');
CREATE TABLE quotes (id INT AUTO_INCREMENT NOT NULL, status_id INT DEFAULT NULL, client_id INT DEFAULT NULL, total DOUBLE PRECISION NOT NULL, discount DOUBLE PRECISION NOT NULL, due DATE DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, users LONGTEXT NOT NULL COMMENT '(DC2Type:array)', INDEX IDX_A1B588C56BF700BD (status_id), INDEX IDX_A1B588C519EB6921 (client_id), PRIMARY KEY(id))
CREATE TABLE users (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(25) NOT NULL, salt VARCHAR(32) NOT NULL, password VARCHAR(255) NOT NULL, email VARCHAR(60) NOT NULL, active TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_1483A5E9F85E0677 (username), UNIQUE INDEX UNIQ_1483A5E9E7927C74 (email), PRIMARY KEY(id))
CREATE TABLE invoice_items (id INT AUTO_INCREMENT NOT NULL, invoice_id INT DEFAULT NULL, description LONGTEXT NOT NULL, price NUMERIC(10, 2) NOT NULL, qty DOUBLE PRECISION NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, INDEX IDX_DCC4B9F82989F1FD (invoice_id), PRIMARY KEY(id))
CREATE TABLE payments (id INT AUTO_INCREMENT NOT NULL, invoice_id INT DEFAULT NULL, method_id INT DEFAULT NULL, status_id INT DEFAULT NULL, amount DOUBLE PRECISION NOT NULL, currency VARCHAR(24) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, INDEX IDX_65D29B322989F1FD (invoice_id), INDEX IDX_65D29B3219883967 (method_id), INDEX IDX_65D29B326BF700BD (status_id), PRIMARY KEY(id))
CREATE TABLE clients (id INT AUTO_INCREMENT NOT NULL, status_id INT DEFAULT NULL, name VARCHAR(125) NOT NULL, website VARCHAR(125) DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_C82E745E237E06 (name), INDEX IDX_C82E746BF700BD (status_id), PRIMARY KEY(id))
CREATE INDEX IDX_6B6F056019883967 ON payment_details (method_id)
CREATE TABLE contact_types (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(45) NOT NULL, UNIQUE INDEX UNIQ_741A993F5E237E06 (name), PRIMARY KEY(id))
CREATE INDEX IDX_65D29B32C7440455 ON payments (client)');
CREATE TABLE contact_details (id INT AUTO_INCREMENT NOT NULL, contact_id INT DEFAULT NULL, contact_type_id INT DEFAULT NULL, value LONGTEXT NOT NULL, is_primary TINYINT(1) DEFAULT NULL, INDEX IDX_E8092A0BE7A1254A (contact_id), INDEX IDX_E8092A0B5F63AD12 (contact_type_id), PRIMARY KEY(id))
CREATE TABLE version (version VARCHAR(125) NOT NULL, PRIMARY KEY(version))
CREATE INDEX log_version_lookup_idx ON ext_log_entries (object_id, object_class, 
CREATE TABLE roles (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(25) NOT NULL, role VARCHAR(25) NOT NULL, UNIQUE INDEX UNIQ_B63E2EC75E237E06 (name), UNIQUE INDEX UNIQ_B63E2EC757698A6A (role), PRIMARY KEY(id))
CREATE INDEX IDX_4FABF983C182F730 ON payment_methods (defaultStatus_id)');
CREATE TABLE security_token (hash VARCHAR(255) NOT NULL, details LONGTEXT DEFAULT NULL COMMENT '(DC2Type:object)', after_url LONGTEXT DEFAULT NULL, target_url LONGTEXT NOT NULL, payment_name VARCHAR(255) NOT NULL, PRIMARY KEY(hash))
CREATE INDEX IDX_DCC4B9F8B2A824D8 ON invoice_items (tax_id)
CREATE TABLE addresses (id INT AUTO_INCREMENT NOT NULL, client_id INT DEFAULT NULL, street1 VARCHAR(255) DEFAULT NULL, street2 VARCHAR(255) DEFAULT NULL, city VARCHAR(255) DEFAULT NULL, state VARCHAR(255) DEFAULT NULL, zip VARCHAR(255) DEFAULT NULL, country VARCHAR(255) DEFAULT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, INDEX IDX_6FCA751619EB6921 (client_id), PRIMARY KEY(id))
SELECT id FROM config_sections WHERE name = "hipchat")');
CREATE TABLE acl_object_identities (id INT UNSIGNED AUTO_INCREMENT NOT NULL, parent_object_identity_id INT UNSIGNED DEFAULT NULL, class_id INT UNSIGNED NOT NULL, object_identifier VARCHAR(100) NOT NULL, entries_inheriting TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_9407E5494B12AD6EA000B10 (object_identifier, class_id), INDEX IDX_9407E54977FA751A (parent_object_identity_id), PRIMARY KEY(id))
CREATE TABLE api_tokens (id INT AUTO_INCREMENT NOT NULL, user_id INT DEFAULT NULL, name VARCHAR(125) NOT NULL, token VARCHAR(125) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, INDEX IDX_2CAD560EA76ED395 (user_id), PRIMARY KEY(id))
CREATE TABLE payment_methods (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(125) NOT NULL, payment_method VARCHAR(125) NOT NULL, settings LONGTEXT NOT NULL COMMENT '(DC2Type:array)', created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, PRIMARY KEY(id))
CREATE TABLE client_credit (id INT AUTO_INCREMENT NOT NULL, client_id INT DEFAULT NULL, value DOUBLE PRECISION NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_4967254D19EB6921 (client_id), PRIMARY KEY(id))
CREATE TABLE roles (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(25) NOT NULL, role VARCHAR(25) NOT NULL, UNIQUE INDEX UNIQ_B63E2EC75E237E06 (name), UNIQUE INDEX UNIQ_B63E2EC757698A6A (role), PRIMARY KEY(id))
CREATE INDEX IDX_6A2F2F956BF700BD ON invoices (status_id)');
SELECT id FROM config_sections WHERE name = "sms")');
CREATE TABLE api_token_history (id INT AUTO_INCREMENT NOT NULL, token_id INT DEFAULT NULL, ip VARCHAR(255) NOT NULL, resource VARCHAR(125) NOT NULL, method VARCHAR(25) NOT NULL, requestData LONGTEXT NOT NULL COMMENT \'(DC2Type:array)\', userAgent VARCHAR(255) NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, INDEX IDX_61D8DC4441DEE7B9 (token_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB')
CREATE TABLE acl_object_identity_ancestors (object_identity_id INT UNSIGNED NOT NULL, ancestor_id INT UNSIGNED NOT NULL, INDEX IDX_825DE2993D9AB4A6 (object_identity_id), INDEX IDX_825DE299C671CEA1 (ancestor_id), PRIMARY KEY(object_identity_id, ancestor_id))
SELECT id FROM config_sections WHERE name = "twilio")');
CREATE TABLE ext_translations (id INT AUTO_INCREMENT NOT NULL, locale VARCHAR(8) NOT NULL, object_class VARCHAR(255) NOT NULL, field VARCHAR(32) NOT NULL, foreign_key VARCHAR(64) NOT NULL, content LONGTEXT DEFAULT NULL, INDEX translations_lookup_idx (locale, object_class, foreign_key), UNIQUE INDEX lookup_unique_idx (locale, object_class, field, foreign_key), PRIMARY KEY(id))
CREATE INDEX IDX_A1B588C56BF700BD ON quotes (status_id)');
CREATE TABLE quote_items (id INT AUTO_INCREMENT NOT NULL, quote_id INT DEFAULT NULL, description LONGTEXT NOT NULL, price NUMERIC(10, 2) NOT NULL, qty DOUBLE PRECISION NOT NULL, created DATETIME NOT NULL, updated DATETIME NOT NULL, deleted DATETIME DEFAULT NULL, INDEX IDX_ECE1642CDB805178 (quote_id), PRIMARY KEY(id))
CREATE INDEX IDX_4FABF983C182F730 ON payment_methods (defaultStatus_id)
CREATE INDEX IDX_6B6F05602989F1FD ON payment_details (invoice_id)
