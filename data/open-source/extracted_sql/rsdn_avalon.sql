CREATE TABLE `rating`(	`id_message` INT NOT NULL COMMENT 'id ',	`id_topic` INT NOT NULL COMMENT 'id ',	`id_user` INT NOT NULL COMMENT 'id ',	`user_rating` INT NOT NULL COMMENT ' ',	`rate` INT NOT NULL COMMENT '',	`rate_date` DATETIME NOT NULL COMMENT '',	`rate_type` TINYINT(1) NOT NULL COMMENT ' (0 - , 1 - +/-, 2 - )',	PRIMARY KEY (`id_message`, `id_user`, `rate_type`))
CREATE TABLE `moderate`(	`id_message` INTEGER NOT NULL,	`id_topic` INTEGER NOT NULL,	`id_user` INTEGER NOT NULL,	`id_forum` INTEGER NOT NULL,	`created` INTEGER NOT NULL,	PRIMARY KEY (`id_message`, `id_user`))
CREATE TABLE `message_topic`(	`id_message` INT NOT NULL COMMENT 'id ',	`id_forum` INT NOT NULL COMMENT 'id ',	`message_date` DATETIME NOT NULL COMMENT ' ',	PRIMARY KEY (`id_message`),	KEY `ix_id_forum` (`id_forum`),	CONSTRAINT `fk_message_topic_message` FOREIGN KEY (`id_message`) REFERENCES `message` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `user`(	`id` INT NOT NULL COMMENT 'id ',	`name` VARCHAR(60) NOT NULL COMMENT ' ',	`nick` VARCHAR(100) NOT NULL COMMENT ' ',	`real_name` VARCHAR(80) NOT NULL COMMENT ' ',	`email` VARCHAR(60) NOT NULL COMMENT ' email ',	`homepage` VARCHAR(120) NOT NULL COMMENT ' ',	`specialization` VARCHAR(100) NOT NULL COMMENT '',	`where_from` VARCHAR(100) NOT NULL COMMENT '',	`origin` VARCHAR(258) NOT NULL COMMENT '',	PRIMARY KEY (`id`),	KEY `ix_name` (`name`))
CREATE TABLE `rating2send`(	`id` INT NOT NULL COMMENT 'id ()',	`id_message` INT NOT NULL COMMENT 'id ',	`rate` INT NOT NULL COMMENT '',	`date` DATETIME NOT NULL COMMENT ' ',	PRIMARY KEY (`id`))
CREATE TABLE `message2send`(	`id` INTEGER NOT NULL PRIMARY KEY,	`id_parent` INTEGER NOT NULL,	`id_forum` INTEGER NOT NULL,	`subject` VARCHAR(128) NOT NULL,	`message` TEXT NOT NULL,	`date` INTEGER NOT NULL,	`draft` INTEGER NOT NULL)
CREATE TABLE `moderate2send`(	`id` INTEGER NOT NULL PRIMARY KEY,	`id_message` INTEGER NOT NULL,	`action` VARCHAR(32) NOT NULL,	`id_forum` INTEGER NOT NULL,	`description` TEXT NOT NULL,	`as_moderator` INTEGER NOT NULL,	`date` INTEGER NOT NULL)
CREATE TABLE `subscribed`(	`id_forum` INT NOT NULL COMMENT 'id ',	`is_first` TINYINT(1) NOT NULL COMMENT ' true - , false - ',	PRIMARY KEY (`id_forum`))
SELECT 1 FROM `version`
CREATE TABLE `forum`(	`id` INTEGER NOT NULL PRIMARY KEY,	`id_group` INTEGER NOT NULL,	`short_name` VARCHAR(64) NOT NULL,	`name` VARCHAR(128) NOT NULL,	`rated` INTEGER NOT NULL,	`in_top` INTEGER NOT NULL,	`rate_limit` INTEGER NOT NULL)
CREATE TABLE `row_version`(	`key` VARCHAR(100) NOT NULL COMMENT ' ',	`value` VARCHAR(100) NOT NULL COMMENT ' ',	PRIMARY KEY (`key`))
CREATE TABLE `version`(	`key` VARCHAR(100) NOT NULL COMMENT ' ',	`value` VARCHAR(100) NOT NULL COMMENT ' ',	PRIMARY KEY (`key`))
CREATE TABLE `subscribed`(	`id_forum` INTEGER NOT NULL PRIMARY KEY,	`is_first` INTEGER NOT NULL)
CREATE TABLE `unread`(	`id_message` INTEGER NOT NULL PRIMARY KEY,	`id_parent` INTEGER NOT NULL,	`id_forum` INTEGER NOT NULL,	`id_topic` INTEGER NOT NULL,	`id_parent_user` INTEGER NOT NULL,	`message_date` INTEGER NOT NULL)
CREATE TABLE `group`(	`id` INTEGER NOT NULL PRIMARY KEY,	`name` VARCHAR(100) NOT NULL,	`sort_order` INTEGER NOT NULL)
CREATE TABLE `broken`(	`id_message` INTEGER NOT NULL PRIMARY KEY,	`is_topic` INTEGER NOT NULL)
CREATE TABLE `forum`(	`id` INT NOT NULL COMMENT 'id',	`id_group` INT NOT NULL COMMENT 'id ',	`short_name` VARCHAR(64) NOT NULL COMMENT ' ',	`name` VARCHAR(128) NOT NULL COMMENT ' ',	`rated` INT NOT NULL COMMENT ' ',	`in_top` INT NOT NULL COMMENT ' ',	`rate_limit` INT NOT NULL COMMENT ' ',	PRIMARY KEY (`id`))
CREATE TABLE `user`(	`id` INTEGER NOT NULL PRIMARY KEY,	`name` VARCHAR(60) NOT NULL,	`nick` VARCHAR(100) NOT NULL,	`real_name` VARCHAR(80) NOT NULL,	`email` VARCHAR(60) NOT NULL,	`homepage` VARCHAR(120) NOT NULL,	`specialization` VARCHAR(100) NOT NULL,	`where_from` VARCHAR(100) NOT NULL,	`origin` VARCHAR(258) NOT NULL)
CREATE TABLE `message_topic`(	`id_message` INTEGER NOT NULL PRIMARY KEY,	`id_forum` INTEGER NOT NULL,	`message_date` INTEGER NOT NULL,	FOREIGN KEY (`id_message`) REFERENCES `message` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `group`(	`id` INT NOT NULL COMMENT 'id',	`name` VARCHAR(100) NOT NULL COMMENT ' ',	`sort_order` INT NOT NULL COMMENT ' ',	PRIMARY KEY (`id`))
CREATE TABLE `unread`(	`id_message` INT NOT NULL COMMENT 'id ',	`id_parent` INT NOT NULL COMMENT 'id ',	`id_forum` INT NOT NULL COMMENT 'id ',	`id_topic` INT NOT NULL COMMENT 'id ',	`id_parent_user` INT NOT NULL COMMENT 'id , ',	`message_date` DATETIME NOT NULL COMMENT ' ',	PRIMARY KEY (`id_message`))
CREATE TABLE `rating`(	`id_message` INTEGER NOT NULL,	`id_topic` INTEGER NOT NULL,	`id_user` INTEGER NOT NULL,	`user_rating` INTEGER NOT NULL,	`rate` INTEGER NOT NULL,	`rate_date` INTEGER NOT NULL,	`rate_type` INTEGER NOT NULL,	PRIMARY KEY (`id_message`, `id_user`, `rate_type`))
CREATE TABLE `rating2send`(	`id` INTEGER NOT NULL PRIMARY KEY,	`id_message` INTEGER NOT NULL,	`rate` INTEGER NOT NULL,	`date` INTEGER NOT NULL)
CREATE TABLE `broken`(	`id_message` INT NOT NULL COMMENT 'id /',	`is_topic` TINYINT(1) NOT NULL COMMENT ' , , ',	PRIMARY KEY (`id_message`))
CREATE TABLE `version`(	`key` VARCHAR(100) NOT NULL PRIMARY KEY,	`value` VARCHAR(100) NOT NULL)
CREATE TABLE `row_version`(	`key` VARCHAR(100) NOT NULL PRIMARY KEY,	`value` VARCHAR(100) NOT NULL)
CREATE TABLE `message2send`(	`id` INT NOT NULL COMMENT 'id ()',	`id_parent` INT NOT NULL COMMENT 'id ',	`id_forum` INT NOT NULL COMMENT 'id ',	`subject` VARCHAR(128) NOT NULL COMMENT '',	`message` LONGTEXT NOT NULL COMMENT ' ',	`date` DATETIME NOT NULL COMMENT ' ',	`draft` TINYINT(1) NOT NULL COMMENT ' ',	PRIMARY KEY (`id`))
CREATE TABLE `message`(	`id` INTEGER NOT NULL PRIMARY KEY,	`id_topic` INTEGER NOT NULL,	`id_parent` INTEGER NOT NULL,	`id_user` INTEGER NOT NULL,	`id_forum` INTEGER NOT NULL,	`subject` VARCHAR(128) NOT NULL,	`message_name` VARCHAR(160) NOT NULL,	`user_nick` VARCHAR(100) NOT NULL,	`message` BLOB NOT NULL,	`id_article` INTEGER NOT NULL,	`message_date` INTEGER NOT NULL,	`update_date` INTEGER NOT NULL,	`user_role` VARCHAR(50) NOT NULL,	`user_title` VARCHAR(100) NOT NULL,	`user_title_color` INTEGER NOT NULL,	`last_moderated` INTEGER NOT NULL,	`closed` INTEGER NOT NULL,	`has_child` INTEGER NOT NULL,	`compressed` INTEGER NOT NULL)
CREATE TABLE `moderate`(	`id_message` INT NOT NULL COMMENT 'id ',	`id_topic` INT NOT NULL COMMENT 'id ',	`id_user` INT NOT NULL COMMENT 'id ',	`id_forum` INT NOT NULL COMMENT 'id ',	`created` DATETIME NOT NULL COMMENT '',	PRIMARY KEY (`id_message`, `id_user`))
