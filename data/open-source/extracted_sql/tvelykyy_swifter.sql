CREATE TABLE `block` ( `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Represents page''s field unique identifier.', `title` varchar(50) NOT NULL COMMENT 'Represents page''s block title.', PRIMARY KEY (`id`))
CREATE TABLE `role` ( `id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT, `title` varchar(20) NOT NULL, `description` varchar(100) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `uniq_title` (`title`))
CREATE TABLE `page` ( `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'Represent unique page identifier', `name` varchar(50) NOT NULL, `uri` varchar(200) NOT NULL COMMENT 'Represents page''s full URL.', `parent_id` bigint(20) DEFAULT NULL, `template_id` bigint(20) unsigned NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `snippet` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `title` varchar(50) NOT NULL, `service` varchar(200) NOT NULL, `method` varchar(100) NOT NULL, `template_id` int(11) unsigned NOT NULL, `params` varchar(500) NOT NULL, PRIMARY KEY (`id`), KEY `templated_id_idx` (`template_id`), CONSTRAINT `template_id_fk` FOREIGN KEY (`template_id`) REFERENCES `template` (`id`))
CREATE TABLE `user` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT, `email` varchar(127) NOT NULL, `password` char(128) NOT NULL, `name` varchar(32) NOT NULL DEFAULT '', `enabled` bit(1) NOT NULL DEFAULT b'0', `last_login` int(10) unsigned DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `uniq_email` (`email`) USING BTREE)
CREATE TABLE `page_block` ( `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT, `page_id` bigint(20) unsigned NOT NULL COMMENT 'Represent page identifier.', `block_id` bigint(20) unsigned NOT NULL COMMENT 'Represents block identifier', `content` text NOT NULL COMMENT 'Reprents page block content for specific page.', PRIMARY KEY (`id`), UNIQUE KEY `page_block` (`page_id`,`block_id`), KEY `block` (`block_id`), CONSTRAINT `block` FOREIGN KEY (`block_id`) REFERENCES `block` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `page` FOREIGN KEY (`page_id`) REFERENCES `page` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `template` ( `id` int(11) unsigned NOT NULL, `title` varchar(100) NOT NULL, `path` varchar(200) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `id` (`id`) USING BTREE)
CREATE TABLE `user_role` ( `user_id` int(10) unsigned NOT NULL, `role_id` tinyint(3) unsigned NOT NULL, PRIMARY KEY (`user_id`,`role_id`), UNIQUE KEY `unique_row` (`user_id`,`role_id`) USING BTREE, KEY `role` (`role_id`) USING BTREE, CONSTRAINT `user_role_ibfk_1` FOREIGN KEY (`role_id`) REFERENCES `role` (`id`), CONSTRAINT `user_role_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE ON UPDATE CASCADE)
