CREATE TABLE IF NOT EXISTS `#__tracker_labels` ( `label_id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK', `project_id` int(11) NOT NULL COMMENT 'Project ID', `name` varchar(50) NOT NULL COMMENT 'Label name', `color` varchar(6) NOT NULL COMMENT 'Label color', PRIMARY KEY (`label_id`), KEY `name` (`name`), KEY `project_id` (`project_id`), CONSTRAINT `#__tracker_labels_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `#__tracker_projects` (`project_id`))
CREATE TABLE `#__migrations` ( `version` varchar(25) NOT NULL COMMENT 'Applied migration versions', KEY `version` (`version`))
CREATE TABLE `#__activity_types` ( `type_id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'PK', `event` varchar(32) NOT NULL COMMENT 'The event type, referenced by the #__activities.event column', `activity_group` varchar(255) DEFAULT NULL, `activity_description` varchar(500) DEFAULT NULL, `activity_points` tinyint(4) DEFAULT NULL COMMENT 'Weighting for each type of activity', PRIMARY KEY (`type_id`))
CREATE TABLE IF NOT EXISTS `#__issues_voting` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `issue_number` int(11) unsigned NOT NULL COMMENT 'Foreign key to #__issues.id', `user_id` int(11) NOT NULL DEFAULT 0 COMMENT 'Foreign key to #__users.id', `experienced` tinyint(2) unsigned NOT NULL COMMENT 'Flag indicating whether the user has experienced the issue', `score` int(11) unsigned NOT NULL COMMENT 'User score for importance of issue', PRIMARY KEY (`id`), CONSTRAINT `#__issues_voting_fk_issue_id` FOREIGN KEY (`issue_number`) REFERENCES `#__issues` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `#__issues_voting_fk_user_id` FOREIGN KEY (`user_id`) REFERENCES `#__users` (`id`))
CREATE TABLE IF NOT EXISTS `#__accessgroups` ( `group_id` int(11) NOT NULL AUTO_INCREMENT, `project_id` int(11) NOT NULL, `title` varchar(150) NOT NULL, `can_view` int(11) NOT NULL, `can_create` int(11) NOT NULL, `can_manage` int(11) NOT NULL, `can_edit` int(11) NOT NULL, `can_editown` int(11) NOT NULL, `system` int(11) NOT NULL, PRIMARY KEY (`group_id`), KEY `project_id` (`project_id`), CONSTRAINT `#__accessgroups_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `#__tracker_projects` (`project_id`))
CREATE TABLE IF NOT EXISTS `#__articles` ( `article_id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK', `path` varchar(500) NOT NULL COMMENT 'The article path', `title` varchar(250) NOT NULL COMMENT 'The article title', `alias` varchar(400) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL COMMENT 'The article alias.', `text` text NOT NULL COMMENT 'The article text.', `text_md` text NOT NULL COMMENT 'The raw article text.', `created_date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT 'The created date.', `is_file` int(1) unsigned NOT NULL COMMENT 'If the text is present as a file (for different handling)', PRIMARY KEY (`article_id`), KEY `alias` (`alias`(100)))
CREATE TABLE `#__issue_category_map` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'PK', `issue_id` int(11) unsigned NOT NULL COMMENT 'PK of the issue in issue table', `category_id` int(11) unsigned NOT NULL COMMENT 'Category id', PRIMARY KEY (`id`), KEY `issue_id` (`issue_id`), KEY `category_id` (`category_id`), CONSTRAINT `#__issue_category_map_ibfk_1` FOREIGN KEY (`issue_id`) REFERENCES `#__issues` (`id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `#__issue_category_map_ibfk_2` FOREIGN KEY (`category_id`) REFERENCES `#__issues_categories` (`id`))
CREATE TABLE IF NOT EXISTS `#__tracker_projects` ( `project_id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK', `title` varchar(150) NOT NULL COMMENT 'Project title', `alias` varchar(150) NOT NULL COMMENT 'Project URL alias', `gh_user` varchar(150) NOT NULL COMMENT 'GitHub user', `gh_project` varchar(150) NOT NULL COMMENT 'GitHub project', `gh_editbot_user` varchar(150) NOT NULL COMMENT 'GitHub editbot username', `gh_editbot_pass` varchar(150) NOT NULL COMMENT 'GitHub editbot password', `ext_tracker_link` varchar(500) NOT NULL COMMENT 'A tracker link format (e.g. http://tracker.com/issue/%d)', `short_title` varchar(50) NOT NULL COMMENT 'Project short title', PRIMARY KEY (`project_id`), KEY `alias` (`alias`))
CREATE TABLE IF NOT EXISTS `#__issues_tests` ( `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK', `item_id` int(11) NOT NULL COMMENT 'Item ID', `username` varchar(50) NOT NULL COMMENT 'User name', `result` smallint(6) NOT NULL COMMENT 'Test result (1=success, 2=failure)', `sha` varchar(40) DEFAULT NULL COMMENT 'The GitHub SHA where the issue has been tested against', PRIMARY KEY (`id`), KEY `item_id` (`item_id`))
CREATE TABLE IF NOT EXISTS `#__user_accessgroup_map` ( `user_id` int(11) NOT NULL DEFAULT 0 COMMENT 'Foreign Key to #__users.id', `group_id` int(11) NOT NULL DEFAULT 0 COMMENT 'Foreign Key to #__accessgroups.id', PRIMARY KEY (`user_id`,`group_id`), CONSTRAINT `#__user_accessgroup_map_fk_user_id` FOREIGN KEY (`user_id`) REFERENCES `#__users` (`id`), CONSTRAINT `#__user_accessgroup_map_fk_group_id` FOREIGN KEY (`group_id`) REFERENCES `#__accessgroups` (`group_id`))
CREATE TABLE IF NOT EXISTS `#__issues_relations_types` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(150) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `#__tracker_milestones` ( `milestone_id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'PK', `milestone_number` int(11) NOT NULL COMMENT 'Milestone number from Github', `project_id` int(11) NOT NULL COMMENT 'Project ID', `title` varchar(50) NOT NULL COMMENT 'Milestone title', `description` mediumtext NOT NULL COMMENT 'Milestone description', `state` varchar(6) NOT NULL COMMENT 'Label state: open | closed', `due_on` datetime DEFAULT NULL COMMENT 'Date the milestone is due on.', PRIMARY KEY (`milestone_id`), KEY `name` (`title`), KEY `project_id` (`project_id`), CONSTRAINT `#__tracker_milestones_fk_project_id` FOREIGN KEY (`project_id`) REFERENCES `#__tracker_projects` (`project_id`))
CREATE TABLE IF NOT EXISTS `#__status` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `status` varchar(255) DEFAULT NULL, `closed` tinyint NOT NULL DEFAULT 0, PRIMARY KEY (`id`))
CREATE TABLE `#__issues_categories` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'PK', `project_id` int(11) NOT NULL COMMENT 'The id of the Project', `title` varchar(150) NOT NULL COMMENT 'The title of the category', `alias` varchar(150) NOT NULL COMMENT 'The alias of the category', `color` varchar(6) NOT NULL COMMENT 'The hex value of the category', PRIMARY KEY (`id`), KEY `project_id` (`project_id`), CONSTRAINT `#__issues_categories_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `#__tracker_projects` (`project_id`))
CREATE TABLE IF NOT EXISTS `#__users` ( `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'PK', `name` varchar(400) NOT NULL DEFAULT '' COMMENT 'The users name', `username` varchar(150) NOT NULL DEFAULT '' COMMENT 'The users username', `email` varchar(100) NOT NULL DEFAULT '' COMMENT 'The users e-mail', `block` tinyint(4) NOT NULL DEFAULT 0 COMMENT 'If the user is blocked', `sendEmail` tinyint(4) DEFAULT 0 COMMENT 'If the users recieves e-mail', `registerDate` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT 'The register date', `lastvisitDate` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT 'The last visit date', `params` text NOT NULL COMMENT 'Parameters', PRIMARY KEY (`id`), KEY `idx_name` (`name`(100)), KEY `idx_block` (`block`), KEY `username` (`username`), KEY `email` (`email`))
