CREATE INDEX index_thredded_moderation_records_for_display ON thredded_post_moderation_records 
CREATE TABLE ar_internal_metadata ( key character varying NOT NULL, value character varying, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE TABLE friendly_id_slugs ( id integer NOT NULL, slug character varying(191) NOT NULL, sluggable_id integer NOT NULL, sluggable_type character varying(50), scope character varying(191), created_at timestamp without time zone NOT NULL)
CREATE TABLE `thredded_user_details` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `latest_activity_at` datetime DEFAULT NULL, `posts_count` int(11) DEFAULT '0', `topics_count` int(11) DEFAULT '0', `last_seen_at` datetime DEFAULT NULL, `moderation_state` int(11) NOT NULL DEFAULT '0', `moderation_state_changed_at` datetime DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_user_details_for_moderations` (`moderation_state`,`moderation_state_changed_at`), KEY `index_thredded_user_details_on_latest_activity_at` (`latest_activity_at`), KEY `index_thredded_user_details_on_user_id` (`user_id`))
CREATE TABLE thredded_user_details ( id integer NOT NULL, user_id integer NOT NULL, latest_activity_at timestamp without time zone, posts_count integer DEFAULT 0, topics_count integer DEFAULT 0, last_seen_at timestamp without time zone, moderation_state integer DEFAULT 0 NOT NULL, moderation_state_changed_at timestamp without time zone, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE INDEX index_thredded_user_preferences_on_user_id ON thredded_user_preferences 
CREATE INDEX index_thredded_posts_for_display ON thredded_posts 
CREATE INDEX index_friendly_id_slugs_on_slug_and_sluggable_type ON friendly_id_slugs 
CREATE TABLE `thredded_topics` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) DEFAULT NULL, `last_user_id` int(11) DEFAULT NULL, `title` varchar(255) NOT NULL, `slug` varchar(191) NOT NULL, `messageboard_id` int(11) NOT NULL, `posts_count` int(11) NOT NULL DEFAULT '0', `sticky` tinyint(1) NOT NULL DEFAULT '0', `locked` tinyint(1) NOT NULL DEFAULT '0', `hash_id` varchar(191) NOT NULL, `type` varchar(191) DEFAULT NULL, `moderation_state` int(11) NOT NULL, `last_post_at` datetime DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `index_thredded_topics_on_messageboard_id_and_slug` (`messageboard_id`,`slug`), KEY `index_thredded_topics_for_display` (`moderation_state`,`sticky`,`updated_at`), KEY `index_thredded_topics_on_hash_id` (`hash_id`), KEY `index_thredded_topics_on_messageboard_id` (`messageboard_id`), KEY `index_thredded_topics_on_user_id` (`user_id`), FULLTEXT KEY `thredded_topics_title_fts` (`title`))
CREATE TABLE thredded_topics ( id integer NOT NULL, user_id integer, last_user_id integer, title character varying(255) NOT NULL, slug character varying(191) NOT NULL, messageboard_id integer NOT NULL, posts_count integer DEFAULT 0 NOT NULL, sticky boolean DEFAULT false NOT NULL, locked boolean DEFAULT false NOT NULL, hash_id character varying(191) NOT NULL, type character varying(191), moderation_state integer NOT NULL, last_post_at timestamp without time zone, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE INDEX index_thredded_private_topics_on_slug ON thredded_private_topics 
CREATE INDEX index_thredded_topics_for_display ON thredded_topics 
CREATE TABLE `thredded_messageboard_groups` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) DEFAULT NULL, `position` int(11) NOT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`))
CREATE INDEX index_thredded_topics_on_user_id ON thredded_topics 
CREATE TABLE `thredded_private_users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `private_topic_id` int(11) DEFAULT NULL, `user_id` int(11) DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_private_users_on_private_topic_id` (`private_topic_id`), KEY `index_thredded_private_users_on_user_id` (`user_id`))
CREATE TABLE thredded_private_posts ( id integer NOT NULL, user_id integer, content text, postable_id integer NOT NULL, ip character varying(255), created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE TABLE thredded_user_topic_read_states ( id integer NOT NULL, user_id integer NOT NULL, postable_id integer NOT NULL, page integer DEFAULT 1 NOT NULL, read_at timestamp without time zone NOT NULL)
CREATE TABLE users ( id integer NOT NULL, name character varying NOT NULL, email character varying, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL, admin boolean DEFAULT false NOT NULL)
CREATE INDEX index_thredded_topic_categories_on_topic_id ON thredded_topic_categories 
CREATE TABLE `thredded_post_moderation_records` ( `id` int(11) NOT NULL AUTO_INCREMENT, `post_id` int(11) DEFAULT NULL, `messageboard_id` int(11) DEFAULT NULL, `post_content` text, `post_user_id` int(11) DEFAULT NULL, `post_user_name` text, `moderator_id` int(11) DEFAULT NULL, `moderation_state` int(11) NOT NULL, `previous_moderation_state` int(11) NOT NULL, `created_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_moderation_records_for_display` (`messageboard_id`,`created_at`))
CREATE TABLE `thredded_messageboards` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(191) NOT NULL, `slug` varchar(191) DEFAULT NULL, `description` text, `topics_count` int(11) DEFAULT '0', `posts_count` int(11) DEFAULT '0', `position` int(11) NOT NULL, `last_topic_id` int(11) DEFAULT NULL, `messageboard_group_id` int(11) DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_messageboards_on_messageboard_group_id` (`messageboard_group_id`), KEY `index_thredded_messageboards_on_slug` (`slug`))
CREATE TABLE `thredded_post_notifications` ( `id` int(11) NOT NULL AUTO_INCREMENT, `email` varchar(191) NOT NULL, `post_id` int(11) NOT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `post_type` varchar(191) DEFAULT NULL, PRIMARY KEY (`id`), KEY `index_thredded_post_notifications_on_post` (`post_id`,`post_type`))
CREATE TABLE thredded_user_private_topic_read_states ( id integer NOT NULL, user_id integer NOT NULL, postable_id integer NOT NULL, page integer DEFAULT 1 NOT NULL, read_at timestamp without time zone NOT NULL)
CREATE INDEX index_thredded_topics_on_messageboard_id ON thredded_topics 
CREATE INDEX index_thredded_messageboards_on_slug ON thredded_messageboards 
CREATE TABLE thredded_messageboard_users ( id integer NOT NULL, thredded_user_detail_id integer NOT NULL, thredded_messageboard_id integer NOT NULL, last_seen_at timestamp without time zone NOT NULL)
CREATE INDEX index_thredded_messageboard_users_primary ON thredded_messageboard_users 
CREATE TABLE thredded_user_topic_follows ( id integer NOT NULL, user_id integer NOT NULL, topic_id integer NOT NULL, created_at timestamp without time zone NOT NULL, reason smallint)
CREATE TABLE `thredded_user_private_topic_read_states` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `postable_id` int(11) NOT NULL, `page` int(11) NOT NULL DEFAULT '1', `read_at` datetime NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `thredded_user_private_topic_read_states_user_postable` (`user_id`,`postable_id`))
CREATE INDEX index_thredded_posts_on_user_id ON thredded_posts 
CREATE INDEX thredded_categories_name_ci ON thredded_categories 
CREATE TABLE `thredded_private_topics` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) DEFAULT NULL, `last_user_id` int(11) DEFAULT NULL, `title` varchar(255) NOT NULL, `slug` varchar(191) NOT NULL, `posts_count` int(11) DEFAULT '0', `hash_id` varchar(191) NOT NULL, `last_post_at` datetime DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_private_topics_on_hash_id` (`hash_id`), KEY `index_thredded_private_topics_on_slug` (`slug`))
CREATE INDEX index_thredded_private_users_on_private_topic_id ON thredded_private_users 
CREATE INDEX thredded_topics_title_fts ON thredded_topics 
CREATE TABLE `friendly_id_slugs` ( `id` int(11) NOT NULL AUTO_INCREMENT, `slug` varchar(191) NOT NULL, `sluggable_id` int(11) NOT NULL, `sluggable_type` varchar(50) DEFAULT NULL, `scope` varchar(191) DEFAULT NULL, `created_at` datetime NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `index_friendly_id_slugs_on_slug_and_sluggable_type_and_scope` (`slug`,`sluggable_type`,`scope`), KEY `index_friendly_id_slugs_on_slug_and_sluggable_type` (`slug`,`sluggable_type`), KEY `index_friendly_id_slugs_on_sluggable_id` (`sluggable_id`), KEY `index_friendly_id_slugs_on_sluggable_type` (`sluggable_type`))
CREATE TABLE `users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `email` varchar(255) DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `admin` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `index_users_on_name` (`name`))
CREATE INDEX index_thredded_user_details_on_latest_activity_at ON thredded_user_details 
CREATE TABLE `thredded_messageboard_users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `thredded_user_detail_id` int(11) NOT NULL, `thredded_messageboard_id` int(11) NOT NULL, `last_seen_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_messageboard_users_primary` (`thredded_messageboard_id`,`thredded_user_detail_id`), KEY `index_thredded_messageboard_users_for_recently_active` (`thredded_messageboard_id`,`last_seen_at`), KEY `fk_rails_06e42c62f5` (`thredded_user_detail_id`), CONSTRAINT `fk_rails_06e42c62f5` FOREIGN KEY (`thredded_user_detail_id`) REFERENCES `thredded_user_details` (`id`), CONSTRAINT `fk_rails_966803d714` FOREIGN KEY (`thredded_messageboard_id`) REFERENCES `thredded_messageboards` (`id`))
CREATE INDEX index_friendly_id_slugs_on_sluggable_type ON friendly_id_slugs 
CREATE INDEX index_thredded_messageboard_users_for_recently_active ON thredded_messageboard_users 
CREATE INDEX index_thredded_private_topics_on_hash_id ON thredded_private_topics 
CREATE INDEX index_thredded_user_details_on_user_id ON thredded_user_details 
CREATE INDEX users_name_lower ON users 
CREATE TABLE `schema_migrations` ( `version` varchar(255) NOT NULL, PRIMARY KEY (`version`))
CREATE TABLE `thredded_user_topic_follows` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `topic_id` int(11) NOT NULL, `created_at` datetime NOT NULL, `reason` tinyint(4) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `thredded_user_topic_follows_user_topic` (`user_id`,`topic_id`))
CREATE TABLE thredded_post_moderation_records ( id integer NOT NULL, post_id integer, messageboard_id integer, post_content text, post_user_id integer, post_user_name text, moderator_id integer, moderation_state integer NOT NULL, previous_moderation_state integer NOT NULL, created_at timestamp without time zone NOT NULL)
CREATE INDEX index_thredded_posts_on_messageboard_id ON thredded_posts 
CREATE INDEX index_thredded_private_users_on_user_id ON thredded_private_users 
CREATE INDEX index_thredded_messageboards_on_messageboard_group_id ON thredded_messageboards 
CREATE INDEX index_thredded_posts_on_postable_id_and_postable_type ON thredded_posts 
CREATE TABLE thredded_categories ( id integer NOT NULL, messageboard_id integer NOT NULL, name character varying(191) NOT NULL, description character varying(255), created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL, slug character varying(191) NOT NULL)
CREATE INDEX thredded_posts_content_fts ON thredded_posts 
CREATE INDEX thredded_categories_name_ci ON "thredded_categories
CREATE TABLE thredded_user_messageboard_preferences ( id integer NOT NULL, user_id integer NOT NULL, messageboard_id integer NOT NULL, follow_topics_on_mention boolean DEFAULT true NOT NULL, followed_topic_emails boolean DEFAULT true NOT NULL, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE TABLE thredded_topic_categories ( id integer NOT NULL, topic_id integer NOT NULL, category_id integer NOT NULL)
CREATE INDEX index_thredded_user_details_for_moderations ON thredded_user_details 
CREATE TABLE thredded_private_users ( id integer NOT NULL, private_topic_id integer, user_id integer, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE INDEX index_thredded_topic_categories_on_category_id ON thredded_topic_categories 
CREATE TABLE `thredded_categories` ( `id` int(11) NOT NULL AUTO_INCREMENT, `messageboard_id` int(11) NOT NULL, `name` varchar(191) NOT NULL, `description` varchar(255) DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, `slug` varchar(191) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `index_thredded_categories_on_messageboard_id_and_slug` (`messageboard_id`,`slug`), KEY `index_thredded_categories_on_messageboard_id` (`messageboard_id`), KEY `thredded_categories_name_ci` (`name`))
CREATE INDEX index_thredded_categories_on_messageboard_id ON thredded_categories 
CREATE TABLE `thredded_posts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) DEFAULT NULL, `content` text, `ip` varchar(255) DEFAULT NULL, `source` varchar(255) DEFAULT 'web', `postable_id` int(11) NOT NULL, `messageboard_id` int(11) NOT NULL, `moderation_state` int(11) NOT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_posts_for_display` (`moderation_state`,`updated_at`), KEY `index_thredded_posts_on_messageboard_id` (`messageboard_id`), KEY `index_thredded_posts_on_postable_id_and_postable_type` (`postable_id`), KEY `index_thredded_posts_on_user_id` (`user_id`), FULLTEXT KEY `thredded_posts_content_fts` (`content`))
CREATE INDEX name_nocase ON "users
CREATE TABLE schema_migrations ( version character varying NOT NULL)
CREATE TABLE thredded_user_preferences ( id integer NOT NULL, user_id integer NOT NULL, follow_topics_on_mention boolean DEFAULT true NOT NULL, notify_on_message boolean DEFAULT true NOT NULL, followed_topic_emails boolean DEFAULT true NOT NULL, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE INDEX index_friendly_id_slugs_on_sluggable_id ON friendly_id_slugs 
CREATE TABLE `thredded_user_topic_read_states` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `postable_id` int(11) NOT NULL, `page` int(11) NOT NULL DEFAULT '1', `read_at` datetime NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `thredded_user_topic_read_states_user_postable` (`user_id`,`postable_id`))
CREATE TABLE `thredded_private_posts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) DEFAULT NULL, `content` text, `postable_id` int(11) NOT NULL, `ip` varchar(255) DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE thredded_post_notifications ( id integer NOT NULL, email character varying(191) NOT NULL, post_id integer NOT NULL, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL, post_type character varying(191))
CREATE INDEX index_thredded_post_notifications_on_post ON thredded_post_notifications 
CREATE TABLE `thredded_user_preferences` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `follow_topics_on_mention` tinyint(1) NOT NULL DEFAULT '1', `notify_on_message` tinyint(1) NOT NULL DEFAULT '1', `followed_topic_emails` tinyint(1) NOT NULL DEFAULT '1', `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_user_preferences_on_user_id` (`user_id`))
CREATE TABLE `ar_internal_metadata` ( `key` varchar(255) NOT NULL, `value` varchar(255) DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`key`))
CREATE TABLE `thredded_user_messageboard_preferences` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `messageboard_id` int(11) NOT NULL, `follow_topics_on_mention` tinyint(1) NOT NULL DEFAULT '1', `followed_topic_emails` tinyint(1) NOT NULL DEFAULT '1', `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `thredded_user_messageboard_preferences_user_id_messageboard_id` (`user_id`,`messageboard_id`))
CREATE INDEX index_thredded_topics_on_hash_id ON thredded_topics 
CREATE TABLE thredded_posts ( id integer NOT NULL, user_id integer, content text, ip character varying(255), source character varying(255) DEFAULT 'web'::character varying, postable_id integer NOT NULL, messageboard_id integer NOT NULL, moderation_state integer NOT NULL, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE TABLE thredded_private_topics ( id integer NOT NULL, user_id integer, last_user_id integer, title character varying(255) NOT NULL, slug character varying(191) NOT NULL, posts_count integer DEFAULT 0, hash_id character varying(191) NOT NULL, last_post_at timestamp without time zone, created_at timestamp without time zone NOT NULL, updated_at timestamp without time zone NOT NULL)
CREATE TABLE `thredded_topic_categories` ( `id` int(11) NOT NULL AUTO_INCREMENT, `topic_id` int(11) NOT NULL, `category_id` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `index_thredded_topic_categories_on_category_id` (`category_id`), KEY `index_thredded_topic_categories_on_topic_id` (`topic_id`))
