CREATE TABLE `redcap_pub_sources` ( `pubsrc_id` int(11) NOT NULL, `pubsrc_name` varchar(32) COLLATE utf8_unicode_ci NOT NULL, `pubsrc_last_crawl_time` datetime DEFAULT NULL, PRIMARY KEY (`pubsrc_id`))
SELECT * FROM RediBatch ORDER BY rbID DESC LIMIT 1
CREATE TABLE `redcap_surveys_response_values` ( `response_id` int(10) DEFAULT NULL, `project_id` int(10) NOT NULL DEFAULT '0', `event_id` int(10) DEFAULT NULL, `record` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `field_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `value` text COLLATE utf8_unicode_ci, KEY `event_id` (`event_id`), KEY `project_field` (`project_id`,`field_name`), KEY `proj_record_field` (`project_id`,`record`,`field_name`), KEY `response_id` (`response_id`), CONSTRAINT `redcap_surveys_response_values_ibfk_1` FOREIGN KEY (`response_id`) REFERENCES `redcap_surveys_response` (`response_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_surveys_response_values_ibfk_2` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_surveys_response_values_ibfk_3` FOREIGN KEY (`event_id`) REFERENCES `redcap_events_metadata` (`event_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_standard_code` ( `standard_code_id` int(10) NOT NULL AUTO_INCREMENT, `standard_code` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL, `standard_code_desc` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `standard_id` int(10) NOT NULL DEFAULT '0', PRIMARY KEY (`standard_code_id`), KEY `standard_id` (`standard_id`), CONSTRAINT `redcap_standard_code_ibfk_1` FOREIGN KEY (`standard_id`) REFERENCES `redcap_standard` (`standard_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_projects_templates` ( `project_id` int(10) NOT NULL DEFAULT '0', `title` text COLLATE utf8_unicode_ci, `description` text COLLATE utf8_unicode_ci, `enabled` int(1) NOT NULL DEFAULT '0' COMMENT 'If enabled, template is visible to users in list.', PRIMARY KEY (`project_id`), CONSTRAINT `redcap_projects_templates_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_ddp_log_view` ( `ml_id` int(10) NOT NULL AUTO_INCREMENT, `time_viewed` datetime DEFAULT NULL COMMENT 'Time the data was displayed to the user', `user_id` int(10) DEFAULT NULL COMMENT 'PK from user_information table', `project_id` int(10) DEFAULT NULL, `source_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'ID value from source system (e.g. MRN)', PRIMARY KEY (`ml_id`), KEY `source_id` (`source_id`), KEY `project_id` (`project_id`), KEY `user_project` (`user_id`,`project_id`), KEY `time_viewed` (`time_viewed`), CONSTRAINT `redcap_ddp_log_view_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_ddp_log_view_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `redcap_user_information` (`ui_id`) ON DELETE SET NULL ON UPDATE CASCADE)
CREATE TABLE `redcap_surveys_emails_recipients` ( `email_recip_id` int(10) NOT NULL AUTO_INCREMENT, `email_id` int(10) DEFAULT NULL COMMENT 'FK redcap_surveys_emails', `participant_id` int(10) DEFAULT NULL COMMENT 'FK redcap_surveys_participants', `static_email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Static email address of recipient (used when participant has no email)', PRIMARY KEY (`email_recip_id`), KEY `emt_id` (`email_id`), KEY `participant_id` (`participant_id`), CONSTRAINT `redcap_surveys_emails_recipients_ibfk_1` FOREIGN KEY (`email_id`) REFERENCES `redcap_surveys_emails` (`email_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_surveys_emails_recipients_ibfk_2` FOREIGN KEY (`participant_id`) REFERENCES `redcap_surveys_participants` (`participant_id`) ON DELETE CASCADE ON UPDATE CASCADE)
SELECT TABLE_SCHEMA, TABLE_NAME, COLUMN_NAME, DATA_TYPE FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = \"redcap\" 
CREATE TABLE `redcap_projects_external` ( `project_id` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Brief user-defined project identifier unique within custom_type', `custom_type` varchar(32) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Brief user-defined name for the resource/category/bucket under which the project falls', `app_title` text COLLATE utf8_unicode_ci, `creation_time` datetime DEFAULT NULL, `project_pi_firstname` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `project_pi_mi` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `project_pi_lastname` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `project_pi_email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `project_pi_alias` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `project_pi_pub_exclude` int(1) DEFAULT NULL, `project_pub_matching_institution` text COLLATE utf8_unicode_ci NOT NULL, PRIMARY KEY (`project_id`,`custom_type`))
CREATE TABLE `redcap_auth_questions` ( `qid` int(10) NOT NULL AUTO_INCREMENT, `question` text COLLATE utf8_unicode_ci, PRIMARY KEY (`qid`))
CREATE TABLE `redcap_events_metadata` ( `event_id` int(10) NOT NULL AUTO_INCREMENT, `arm_id` int(10) NOT NULL DEFAULT '0' COMMENT 'FK for events_arms', `day_offset` float NOT NULL DEFAULT '0' COMMENT 'Days from Start Date', `offset_min` float NOT NULL DEFAULT '0', `offset_max` float NOT NULL DEFAULT '0', `descrip` varchar(64) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'Event 1' COMMENT 'Event Name', `external_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`event_id`), KEY `external_id` (`external_id`), KEY `arm_dayoffset_descrip` (`arm_id`,`day_offset`,`descrip`), KEY `day_offset` (`day_offset`), KEY `descrip` (`descrip`), CONSTRAINT `redcap_events_metadata_ibfk_1` FOREIGN KEY (`arm_id`) REFERENCES `redcap_events_arms` (`arm_id`) ON DELETE CASCADE ON UPDATE CASCADE)
select table_schema, table_name, table_collation from information_schema.tables WHERE table_schema = 'redcap' AND table_collation = 'utf8_general_ci' 
CREATE TABLE `redcap_config` ( `field_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '', `value` text COLLATE utf8_unicode_ci, PRIMARY KEY (`field_name`))
CREATE TABLE RediBatch ( rbID INTEGER PRIMARY KEY AUTOINCREMENT, rbCreateTime DATETIME DEFAULT CURRENT_TIMESTAMP, rbStartTime TEXT NOT NULL, rbEndTime TEXT, rbStatus TEXT, rbMd5Sum TEXT NOT NULL)
CREATE TABLE `redcap_events_arms` ( `arm_id` int(10) NOT NULL AUTO_INCREMENT, `project_id` int(10) NOT NULL DEFAULT '0', `arm_num` int(2) NOT NULL DEFAULT '1', `arm_name` varchar(50) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'Arm 1', PRIMARY KEY (`arm_id`), UNIQUE KEY `proj_arm_num` (`project_id`,`arm_num`), CONSTRAINT `redcap_events_arms_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_ddp_preview_fields` ( `project_id` int(10) NOT NULL, `field1` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `field2` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `field3` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `field4` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `field5` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`project_id`), CONSTRAINT `redcap_ddp_preview_fields_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_external_links_exclude_projects` ( `ext_id` int(11) NOT NULL AUTO_INCREMENT, `project_id` int(10) NOT NULL DEFAULT '0', PRIMARY KEY (`ext_id`,`project_id`), KEY `project_id` (`project_id`), CONSTRAINT `redcap_external_links_exclude_projects_ibfk_2` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_external_links_exclude_projects_ibfk_1` FOREIGN KEY (`ext_id`) REFERENCES `redcap_external_links` (`ext_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_dashboard_ip_location_cache` ( `ip` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `latitude` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL, `longitude` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL, `city` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `region` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `country` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`ip`))
update redcap_edocs_metadata set delete_date = now where project_id = $project_id and doc_id in ($fileFieldEdocIds)
CREATE TABLE `redcap_surveys_emails_send_rate` ( `esr_id` int(10) NOT NULL AUTO_INCREMENT, `sent_begin_time` datetime DEFAULT NULL COMMENT 'Time email batch was sent', `emails_per_batch` int(10) DEFAULT NULL COMMENT 'Number of emails sent in this batch', `emails_per_minute` int(6) DEFAULT NULL COMMENT 'Number of emails sent per minute for this batch', PRIMARY KEY (`esr_id`), KEY `sent_begin_time` (`sent_begin_time`))
CREATE TABLE `redcap_sendit_recipients` ( `recipient_id` int(11) NOT NULL AUTO_INCREMENT, `email_address` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `sent_confirmation` int(1) NOT NULL DEFAULT '0', `download_date` datetime DEFAULT NULL, `download_count` int(11) NOT NULL DEFAULT '0', `document_id` int(11) NOT NULL DEFAULT '0' COMMENT 'FK from redcap_sendit_docs', `guid` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `pwd` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`recipient_id`), KEY `document_id` (`document_id`), KEY `email_address` (`email_address`), KEY `guid` (`guid`), CONSTRAINT `redcap_sendit_recipients_ibfk_1` FOREIGN KEY (`document_id`) REFERENCES `redcap_sendit_docs` (`document_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_ddp_log_view_data` ( `ml_id` int(10) DEFAULT NULL COMMENT 'PK from ddp_log_view table', `source_field` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Field name from source system', `source_timestamp` datetime DEFAULT NULL COMMENT 'Date of service from source system', `md_id` int(10) DEFAULT NULL COMMENT 'PK from ddp_records_data table', KEY `ml_id` (`ml_id`), KEY `source_timestamp` (`source_timestamp`), KEY `md_id` (`md_id`), KEY `source_field` (`source_field`), CONSTRAINT `redcap_ddp_log_view_data_ibfk_1` FOREIGN KEY (`ml_id`) REFERENCES `redcap_ddp_log_view` (`ml_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_ddp_log_view_data_ibfk_2` FOREIGN KEY (`md_id`) REFERENCES `redcap_ddp_records_data` (`md_id`) ON DELETE SET NULL ON UPDATE CASCADE)
CREATE TABLE `redcap_auth_history` ( `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `password` varchar(50) COLLATE utf8_unicode_ci NOT NULL DEFAULT '', `timestamp` datetime DEFAULT NULL, KEY `username_password` (`username`,`password`))
SELECT log_event_id, ip, object_type, event_id, data_values, description, sql_log FROM redcap_log_event ORDER BY log_event_id DESC LIMIT 10
CREATE TABLE `redcap_external_links_dags` ( `ext_id` int(11) NOT NULL AUTO_INCREMENT, `group_id` int(10) NOT NULL DEFAULT '0', PRIMARY KEY (`ext_id`,`group_id`), KEY `group_id` (`group_id`), CONSTRAINT `redcap_external_links_dags_ibfk_2` FOREIGN KEY (`group_id`) REFERENCES `redcap_data_access_groups` (`group_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_external_links_dags_ibfk_1` FOREIGN KEY (`ext_id`) REFERENCES `redcap_external_links` (`ext_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_docs` ( `docs_id` int(11) NOT NULL AUTO_INCREMENT, `project_id` int(10) NOT NULL DEFAULT '0', `docs_date` date DEFAULT NULL, `docs_name` text COLLATE utf8_unicode_ci, `docs_size` double DEFAULT NULL, `docs_type` text COLLATE utf8_unicode_ci, `docs_file` longblob, `docs_comment` text COLLATE utf8_unicode_ci, `docs_rights` text COLLATE utf8_unicode_ci, `export_file` int(1) NOT NULL DEFAULT '0', PRIMARY KEY (`docs_id`), KEY `docs_name` (`docs_name`(128)), KEY `project_id_export_file` (`project_id`,`export_file`), KEY `project_id_comment` (`project_id`,`docs_comment`(128)), CONSTRAINT `redcap_docs_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_docs_to_edocs` ( `docs_id` int(11) NOT NULL COMMENT 'PK redcap_docs', `doc_id` int(11) NOT NULL COMMENT 'PK redcap_edocs_metadata', PRIMARY KEY (`docs_id`,`doc_id`), KEY `doc_id` (`doc_id`), CONSTRAINT `redcap_docs_to_edocs_ibfk_2` FOREIGN KEY (`doc_id`) REFERENCES `redcap_edocs_metadata` (`doc_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_docs_to_edocs_ibfk_1` FOREIGN KEY (`docs_id`) REFERENCES `redcap_docs` (`docs_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_standard_map` ( `standard_map_id` int(10) NOT NULL AUTO_INCREMENT, `project_id` int(10) DEFAULT NULL, `field_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `standard_code_id` int(10) NOT NULL DEFAULT '0', `data_conversion` mediumtext COLLATE utf8_unicode_ci, `data_conversion2` mediumtext COLLATE utf8_unicode_ci, PRIMARY KEY (`standard_map_id`), KEY `standard_code_id` (`standard_code_id`), KEY `project_id` (`project_id`), CONSTRAINT `redcap_standard_map_ibfk_2` FOREIGN KEY (`standard_code_id`) REFERENCES `redcap_standard_code` (`standard_code_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_standard_map_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_surveys_response` ( `response_id` int(11) NOT NULL AUTO_INCREMENT, `participant_id` int(10) DEFAULT NULL, `record` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `first_submit_time` datetime DEFAULT NULL, `completion_time` datetime DEFAULT NULL, `return_code` varchar(8) COLLATE utf8_unicode_ci DEFAULT NULL, `results_code` varchar(8) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`response_id`), UNIQUE KEY `participant_record` (`participant_id`,`record`), KEY `return_code` (`return_code`), KEY `results_code` (`results_code`), KEY `first_submit_time` (`first_submit_time`), KEY `completion_time` (`completion_time`), CONSTRAINT `redcap_surveys_response_ibfk_1` FOREIGN KEY (`participant_id`) REFERENCES `redcap_surveys_participants` (`participant_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_page_hits` ( `date` date NOT NULL, `page_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `page_hits` float NOT NULL DEFAULT '1', UNIQUE KEY `date` (`date`,`page_name`), KEY `page_name` (`page_name`))
insert into redcap_metadata values (12, \'cbc_taken_date\', NULL, \'cbc\', NULL, \'7\', NULL, NULL, \'text\', \'Date Taken\', NULL, NULL, \'date_ymd\', NULL, NULL, \'soft_typed\', NULL, \'1\', NULL, 0, NULL, NULL, NULL, NULL, NULL)','cbc_taken_date',NULL,'field_name = \'cbc_taken_date\'','Create project field',0,NULL)
select * FROM redcap.redcap_config WHERE field_name = \"page_hit_threshold_per_minute\" 
CREATE TABLE `redcap_pub_articles` ( `article_id` int(10) NOT NULL AUTO_INCREMENT, `pubsrc_id` int(10) NOT NULL, `pub_id` varchar(16) COLLATE utf8_unicode_ci NOT NULL COMMENT 'The publication source''s ID for the article (e.g., a PMID in the case of PubMed)', `title` text COLLATE utf8_unicode_ci, `volume` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL, `issue` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL, `pages` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL, `journal` text COLLATE utf8_unicode_ci, `journal_abbrev` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL, `pub_date` date DEFAULT NULL, `epub_date` date DEFAULT NULL, PRIMARY KEY (`article_id`), UNIQUE KEY `pubsrc_id` (`pubsrc_id`,`pub_id`), CONSTRAINT `redcap_pub_articles_ibfk_1` FOREIGN KEY (`pubsrc_id`) REFERENCES `redcap_pub_sources` (`pubsrc_id`))
CREATE TABLE `redcap_surveys_response_users` ( `response_id` int(10) DEFAULT NULL, `username` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, UNIQUE KEY `response_user` (`response_id`,`username`), KEY `username` (`username`), CONSTRAINT `redcap_surveys_response_users_ibfk_1` FOREIGN KEY (`response_id`) REFERENCES `redcap_surveys_response` (`response_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_auth` ( `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `password` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'MD5 hash of user''s password', `temp_pwd` int(1) NOT NULL DEFAULT '0' COMMENT 'Flag to force user to re-enter password', `password_question` int(10) DEFAULT NULL COMMENT 'PK of question', `password_answer` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'MD5 hash of answer to password recovery question', `password_question_reminder` datetime DEFAULT NULL COMMENT 'When to prompt user to set up security question', PRIMARY KEY (`username`), KEY `password_question` (`password_question`), CONSTRAINT `redcap_auth_ibfk_1` FOREIGN KEY (`password_question`) REFERENCES `redcap_auth_questions` (`qid`) ON DELETE SET NULL ON UPDATE CASCADE)
CREATE TABLE `redcap_data` ( `project_id` int(10) NOT NULL DEFAULT '0', `event_id` int(10) DEFAULT NULL, `record` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `field_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `value` text COLLATE utf8_unicode_ci, KEY `event_id` (`event_id`), KEY `project_field` (`project_id`,`field_name`), KEY `proj_record_field` (`project_id`,`record`,`field_name`))
CREATE TABLE `redcap_data_quality_rules` ( `rule_id` int(10) NOT NULL AUTO_INCREMENT, `project_id` int(10) DEFAULT NULL, `rule_order` int(3) DEFAULT '1', `rule_name` text COLLATE utf8_unicode_ci, `rule_logic` text COLLATE utf8_unicode_ci, `real_time_execute` int(1) NOT NULL DEFAULT '0' COMMENT 'Run in real-time on data entry forms?', PRIMARY KEY (`rule_id`), KEY `project_id` (`project_id`), CONSTRAINT `redcap_data_quality_rules_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
SELECT * FROM RediBatch
CREATE TABLE `redcap_user_whitelist` ( `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '', PRIMARY KEY (`username`))
CREATE TABLE `redcap_standard_map_audit` ( `audit_id` int(10) NOT NULL AUTO_INCREMENT, `project_id` int(10) DEFAULT NULL, `field_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `standard_code` int(10) DEFAULT NULL, `action_id` int(10) DEFAULT NULL, `user` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `timestamp` datetime DEFAULT NULL, PRIMARY KEY (`audit_id`), KEY `project_id` (`project_id`), KEY `action_id` (`action_id`), KEY `standard_code` (`standard_code`), CONSTRAINT `redcap_standard_map_audit_ibfk_5` FOREIGN KEY (`standard_code`) REFERENCES `redcap_standard_code` (`standard_code_id`) ON DELETE SET NULL ON UPDATE CASCADE, CONSTRAINT `redcap_standard_map_audit_ibfk_2` FOREIGN KEY (`action_id`) REFERENCES `redcap_standard_map_audit_action` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, CONSTRAINT `redcap_standard_map_audit_ibfk_4` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE SET NULL ON UPDATE CASCADE)
select * from redcap_ip_banned where ip = '10.0.2.2';
CREATE TABLE `redcap_ddp_records` ( `mr_id` int(10) NOT NULL AUTO_INCREMENT, `project_id` int(10) DEFAULT NULL, `record` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `updated_at` datetime DEFAULT NULL COMMENT 'Time of last data fetch', `item_count` int(10) DEFAULT NULL COMMENT 'New item count (as of last viewing)', `fetch_status` enum('QUEUED','FETCHING') COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Current status of data fetch for this record', PRIMARY KEY (`mr_id`), UNIQUE KEY `project_record` (`project_id`,`record`), KEY `project_updated_at` (`updated_at`,`project_id`), KEY `project_id_fetch_status` (`fetch_status`,`project_id`), CONSTRAINT `redcap_ddp_records_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_standard_map_audit_action` ( `id` int(10) NOT NULL DEFAULT '0', `action` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `redcap_events_forms` ( `event_id` int(10) NOT NULL DEFAULT '0', `form_name` varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT '', UNIQUE KEY `event_form` (`event_id`,`form_name`), CONSTRAINT `redcap_events_forms_ibfk_1` FOREIGN KEY (`event_id`) REFERENCES `redcap_events_metadata` (`event_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_crons_history` ( `ch_id` int(10) NOT NULL AUTO_INCREMENT, `cron_id` int(10) DEFAULT NULL, `cron_run_start` datetime DEFAULT NULL, `cron_run_end` datetime DEFAULT NULL, `cron_run_status` enum('PROCESSING','COMPLETED','FAILED') COLLATE utf8_unicode_ci DEFAULT NULL, `cron_info` text COLLATE utf8_unicode_ci COMMENT 'Any pertinent info that might be logged', PRIMARY KEY (`ch_id`), KEY `cron_id` (`cron_id`), KEY `cron_run_start` (`cron_run_start`), KEY `cron_run_end` (`cron_run_end`), CONSTRAINT `redcap_crons_history_ibfk_1` FOREIGN KEY (`cron_id`) REFERENCES `redcap_crons` (`cron_id`) ON DELETE SET NULL ON UPDATE CASCADE)
CREATE TABLE `redcap_edocs_metadata` ( `doc_id` int(10) NOT NULL AUTO_INCREMENT, `stored_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'stored name', `mime_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `doc_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `doc_size` int(10) DEFAULT NULL, `file_extension` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL, `project_id` int(10) DEFAULT NULL, `stored_date` datetime DEFAULT NULL COMMENT 'stored date', `delete_date` datetime DEFAULT NULL COMMENT 'date deleted', `date_deleted_server` datetime DEFAULT NULL COMMENT 'When really deleted from server', PRIMARY KEY (`doc_id`), KEY `project_id` (`project_id`), KEY `date_deleted` (`delete_date`,`date_deleted_server`), CONSTRAINT `redcap_edocs_metadata_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE SET NULL ON UPDATE CASCADE)
CREATE TABLE `redcap_ip_cache` ( `ip_hash` varchar(32) COLLATE utf8_unicode_ci NOT NULL, `timestamp` timestamp NULL DEFAULT NULL, KEY `timestamp` (`timestamp`), KEY `ip_hash` (`ip_hash`))
CREATE TABLE `redcap_locking_data` ( `ld_id` int(11) NOT NULL AUTO_INCREMENT, `project_id` int(10) DEFAULT NULL, `record` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `event_id` int(10) DEFAULT NULL, `form_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `username` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `timestamp` datetime DEFAULT NULL, PRIMARY KEY (`ld_id`), UNIQUE KEY `proj_rec_event_form` (`project_id`,`record`,`event_id`,`form_name`), KEY `username` (`username`), KEY `event_id` (`event_id`), CONSTRAINT `redcap_locking_data_ibfk_2` FOREIGN KEY (`event_id`) REFERENCES `redcap_events_metadata` (`event_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_locking_data_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_project_checklist` ( `list_id` int(11) NOT NULL AUTO_INCREMENT, `project_id` int(10) DEFAULT NULL, `name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`list_id`), UNIQUE KEY `project_name` (`project_id`,`name`), CONSTRAINT `redcap_project_checklist_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_ip_banned` ( `ip` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `time_of_ban` timestamp NULL DEFAULT NULL, PRIMARY KEY (`ip`))
CREATE TABLE `redcap_data_access_groups` ( `group_id` int(10) NOT NULL AUTO_INCREMENT, `project_id` int(10) DEFAULT NULL, `group_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`group_id`), KEY `project_id` (`project_id`), CONSTRAINT `redcap_data_access_groups_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
update redcap_config set value = 600000  where field_name = page_hit_threshold_per_minute
CREATE TABLE `redcap_pub_mesh_terms` ( `mesh_id` int(10) NOT NULL AUTO_INCREMENT, `article_id` int(10) DEFAULT NULL, `mesh_term` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`mesh_id`), KEY `article_id` (`article_id`), KEY `mesh_term` (`mesh_term`), CONSTRAINT `redcap_pub_mesh_terms_ibfk_1` FOREIGN KEY (`article_id`) REFERENCES `redcap_pub_articles` (`article_id`) ON DELETE CASCADE ON UPDATE CASCADE)
select TABLE_SCHEMA, TABLE_NAME,COLUMN_NAME, DATA_TYPE from COLUMNS where COLUMN_NAME = 'project_id';
CREATE TABLE `redcap_validation_types` ( `validation_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL COMMENT 'Unique name for Data Dictionary', `validation_label` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'Label in Online Designer', `regex_js` text COLLATE utf8_unicode_ci, `regex_php` text COLLATE utf8_unicode_ci, `data_type` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `legacy_value` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `visible` int(1) NOT NULL DEFAULT '1' COMMENT 'Show in Online Designer?', UNIQUE KEY `validation_name` (`validation_name`), KEY `data_type` (`data_type`))
CREATE TABLE RediBatch ( rbID INTEGER PRIMARY KEY AUTOINCREMENT, rbCreateTime DATETIME DEFAULT CURRENT_TIMESTAMP, rbStartTime DATETIME, rbEndTime DATETIME, rbStatus TEXT, rbMd5Sum TEXT NOT NULL)
CREATE TABLE `redcap_metadata_prod_revisions` ( `pr_id` int(10) NOT NULL AUTO_INCREMENT, `project_id` int(10) NOT NULL DEFAULT '0', `ui_id_requester` int(10) DEFAULT NULL, `ui_id_approver` int(10) DEFAULT NULL, `ts_req_approval` datetime DEFAULT NULL, `ts_approved` datetime DEFAULT NULL, PRIMARY KEY (`pr_id`), KEY `project_user` (`project_id`,`ui_id_requester`), KEY `project_approved` (`project_id`,`ts_approved`), KEY `ui_id_requester` (`ui_id_requester`), KEY `ui_id_approver` (`ui_id_approver`), CONSTRAINT `redcap_metadata_prod_revisions_ibfk_3` FOREIGN KEY (`ui_id_approver`) REFERENCES `redcap_user_information` (`ui_id`) ON DELETE SET NULL ON UPDATE CASCADE, CONSTRAINT `redcap_metadata_prod_revisions_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_metadata_prod_revisions_ibfk_2` FOREIGN KEY (`ui_id_requester`) REFERENCES `redcap_user_information` (`ui_id`) ON DELETE SET NULL ON UPDATE CASCADE)
CREATE TABLE `redcap_esignatures` ( `esign_id` int(11) NOT NULL AUTO_INCREMENT, `project_id` int(10) DEFAULT NULL, `record` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `event_id` int(10) DEFAULT NULL, `form_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `username` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `timestamp` datetime DEFAULT NULL, PRIMARY KEY (`esign_id`), UNIQUE KEY `proj_rec_event_form` (`project_id`,`record`,`event_id`,`form_name`), KEY `username` (`username`), KEY `event_id` (`event_id`), CONSTRAINT `redcap_esignatures_ibfk_2` FOREIGN KEY (`event_id`) REFERENCES `redcap_events_metadata` (`event_id`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `redcap_esignatures_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_standard` ( `standard_id` int(10) NOT NULL AUTO_INCREMENT, `standard_name` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL, `standard_version` varchar(45) COLLATE utf8_unicode_ci DEFAULT NULL, `standard_desc` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`standard_id`))
CREATE TABLE `redcap_external_links_users` ( `ext_id` int(11) NOT NULL AUTO_INCREMENT, `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '', PRIMARY KEY (`ext_id`,`username`), KEY `username` (`username`), CONSTRAINT `redcap_external_links_users_ibfk_1` FOREIGN KEY (`ext_id`) REFERENCES `redcap_external_links` (`ext_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_pub_authors` ( `author_id` int(10) NOT NULL AUTO_INCREMENT, `article_id` int(10) DEFAULT NULL, `author` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`author_id`), KEY `article_id` (`article_id`), KEY `author` (`author`), CONSTRAINT `redcap_pub_authors_ibfk_1` FOREIGN KEY (`article_id`) REFERENCES `redcap_pub_articles` (`article_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_locking_labels` ( `ll_id` int(11) NOT NULL AUTO_INCREMENT, `project_id` int(11) DEFAULT NULL, `form_name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `label` text COLLATE utf8_unicode_ci, `display` int(1) NOT NULL DEFAULT '1', `display_esignature` int(1) NOT NULL DEFAULT '0', PRIMARY KEY (`ll_id`), UNIQUE KEY `project_form` (`project_id`,`form_name`), CONSTRAINT `redcap_locking_labels_ibfk_1` FOREIGN KEY (`project_id`) REFERENCES `redcap_projects` (`project_id`) ON DELETE CASCADE ON UPDATE CASCADE)
CREATE TABLE `redcap_sessions` ( `session_id` varchar(32) COLLATE utf8_unicode_ci NOT NULL, `session_data` text COLLATE utf8_unicode_ci, `session_expiration` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (`session_id`))
