update adgroups set type = suggested  where id in (select distinct adgroup_id from adgroup_sites)
CREATE TABLE unique_hlls ( unique_counts_daily_id INTEGER, index SMALLINT DEFAULT '0' NOT NULL, value SMALLINT DEFAULT '0' NOT NULL, FOREIGN KEY(unique_counts_daily_id) REFERENCES unique_counts_daily (id))
CREATE TABLE ss_session ( client_id VARCHAR(64) NOT NULL, tab_id VARCHAR(64) NOT NULL, addon_version VARCHAR(64) NOT NULL, load_reason VARCHAR(64) NOT NULL, page VARCHAR(64) NOT NULL, unload_reason VARCHAR(64) NOT NULL, experiment_id VARCHAR(64), max_scroll_depth INTEGER NOT NULL, load_latency INTEGER NOT NULL, total_bookmarks INTEGER NOT NULL, total_history_size INTEGER NOT NULL, session_duration INTEGER NOT NULL, session_id VARCHAR(64), shield_variant VARCHAR(64), receive_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, date DATE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
CREATE TABLE ss_performance ( client_id VARCHAR(64) NOT NULL, tab_id VARCHAR(64) NOT NULL, addon_version VARCHAR(64) NOT NULL, source VARCHAR(64) NOT NULL, session_id VARCHAR(64), shield_variant VARCHAR(64), experiment_id VARCHAR(64), event VARCHAR(64) NOT NULL, event_id VARCHAR(64) NOT NULL, metadata_source VARCHAR(64), value INTEGER NOT NULL, receive_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, date DATE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
select * from temp_app_stats;
UPDATE activity_stream_events_daily SET addon_version_temp = addon_version WHERE page_temp = TIMELINE_BOOKMAR
CREATE TABLE countries( country_name VARCHAR(255) NOT NULL, country_code VARCHAR(5) NOT NULL)
CREATE TABLE newtab_stats_daily( date DATE NOT NULL, newtabs INT DEFAULT 0 NOT NULL, month INT DEFAULT 0 NOT NULL, week INT DEFAULT 0 NOT NULL, year INT DEFAULT 0 NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
insert into countries VALUES('Anonymous Proxy','A1')
CREATE TABLE distributions ( id INTEGER IDENTITY(1,1) NOT NULL, url TEXT NOT NULL, created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, PRIMARY KEY (id))
CREATE TABLE activity_stream_events_daily ( client_id VARCHAR(64) NOT NULL, tab_id VARCHAR(64) NOT NULL, addon_version VARCHAR(16) NOT NULL, source VARCHAR(64) NOT NULL, page VARCHAR(16) NOT NULL, action_position VARCHAR(16) NOT NULL, event VARCHAR(16) NOT NULL, receive_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, date DATE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
UPDATE activity_stream_stats_daily SET addon_version_temp = addon_version WHERE page_temp = TIMELINE_BOOKMAR
SELECT MIN(id) FROM channels WHERE name = 'android') WHERE id in (SELECT adgroup_id FROM tiles WHERE id in (529, 630, 631, 632));
update tiles set image_uri = %s  where id in (%s)
CREATE TABLE ss_event ( client_id VARCHAR(64) NOT NULL, tab_id VARCHAR(64) NOT NULL, addon_version VARCHAR(64) NOT NULL, source VARCHAR(64) NOT NULL, session_id VARCHAR(64), shield_variant VARCHAR(64), page VARCHAR(64) NOT NULL, experiment_id VARCHAR(64), action_position VARCHAR(16) NOT NULL, event VARCHAR(16) NOT NULL, recommendation_url VARCHAR(255), recommender_type VARCHAR(64), highlight_type VARCHAR(64), share_provider VARCHAR(64), metadata_source VARCHAR(64), receive_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, date DATE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
CREATE TABLE site_stats_daily( date DATE NOT NULL, month INT DEFAULT 0 NOT NULL, week INT DEFAULT 0 NOT NULL, year INT DEFAULT 0 NOT NULL, locale VARCHAR(14) NOT NULL, url VARCHAR(255) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL, impressions INTEGER DEFAULT '0' NOT NULL, clicks INTEGER DEFAULT '0' NOT NULL, pinned INTEGER DEFAULT '0' NOT NULL, blocked INTEGER DEFAULT '0' NOT NULL, sponsored_link INTEGER DEFAULT '0' NOT NULL, sponsored INTEGER DEFAULT '0' NOT NULL)
CREATE TABLE activity_stream_masga ( client_id VARCHAR(64) NOT NULL, tab_id VARCHAR(64) NOT NULL, addon_version VARCHAR(64) NOT NULL, source VARCHAR(64) NOT NULL, session_id VARCHAR(64), experiment_id VARCHAR(64), event VARCHAR(64) NOT NULL, event_id VARCHAR(64) NOT NULL, value INTEGER NOT NULL, receive_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, date DATE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
SELECT count(*) FROM campaigns
CREATE TABLE tiles ( id INTEGER IDENTITY(1,1) NOT NULL, target_url TEXT NOT NULL, bg_color VARCHAR(16) NOT NULL, title VARCHAR(255) NOT NULL, type VARCHAR(40) NOT NULL, image_uri TEXT NOT NULL, enhanced_image_uri TEXT, locale VARCHAR(14) NOT NULL, created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, PRIMARY KEY (id))
CREATE TABLE impression_stats_daily ( tile_id INTEGER, date DATE NOT NULL, impressions INTEGER DEFAULT '0' NOT NULL, clicks INTEGER DEFAULT '0' NOT NULL, pinned INTEGER DEFAULT '0' NOT NULL, blocked INTEGER DEFAULT '0' NOT NULL, sponsored_link INTEGER DEFAULT '0' NOT NULL, sponsored INTEGER DEFAULT '0' NOT NULL, position INTEGER DEFAULT '0' NOT NULL, enhanced BOOLEAN DEFAULT FALSE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL, FOREIGN KEY(tile_id) REFERENCES tiles (id))
CREATE TABLE application_stats_daily( date DATE NOT NULL, month INT DEFAULT 0 NOT NULL, week INT DEFAULT 0 NOT NULL, year INT DEFAULT 0 NOT NULL, locale VARCHAR(14) NOT NULL, action VARCHAR(255) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL, ver VARCHAR(16) NOT NULL, count INT DEFAULT 0 NOT NULL)
CREATE TABLE temp_newtab_stats_daily( date DATE NOT NULL, newtabs INT DEFAULT 0 NOT NULL, month INT DEFAULT 0 NOT NULL, week INT DEFAULT 0 NOT NULL, year INT DEFAULT 0 NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
SELECT id FROM channels WHERE name = 'desktop');
SELECT locale FROM tiles ORDER BY id;
CREATE TABLE unique_counts_daily ( id INTEGER IDENTITY(1,1) NOT NULL, tile_id INTEGER, date DATE NOT NULL, impression BOOLEAN NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, PRIMARY KEY (id), FOREIGN KEY(tile_id) REFERENCES tiles (id))
select * from temp_imp_stats;
select count(*) from %s
CREATE TABLE adgroups( id INTEGER IDENTITY(1,1) NOT NULL, created_at TIMESTAMP DEFAULT SYSDATE NOT NULL, locale VARCHAR(14) NOT NULL, PRIMARY KEY (id))
CREATE TABLE activity_stream_stats_daily ( client_id VARCHAR(64) NOT NULL, tab_id VARCHAR(64) NOT NULL, addon_version VARCHAR(16) NOT NULL, load_reason VARCHAR(64) NOT NULL, source VARCHAR(64) NOT NULL, unload_reason VARCHAR(64) NOT NULL, max_scroll_depth INTEGER NOT NULL, load_latency INTEGER NOT NULL, click_position INTEGER NOT NULL, total_bookmarks INTEGER NOT NULL, total_history_size INTEGER NOT NULL, session_duration INTEGER NOT NULL, receive_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
update tiles set enhanced_image_uri = %s  where id in (%s)
CREATE TABLE blacklisted_ips( ip VARCHAR(64) NOT NULL, date DATE NOT NULL)
SELECT count(*) FROM accounts
SELECT MAX(id) FROM tiles;
CREATE TABLE ss_masga ( client_id VARCHAR(64) NOT NULL, tab_id VARCHAR(64) NOT NULL, addon_version VARCHAR(64) NOT NULL, source VARCHAR(64) NOT NULL, session_id VARCHAR(64), experiment_id VARCHAR(64), event VARCHAR(64) NOT NULL, event_id VARCHAR(64) NOT NULL, value INTEGER NOT NULL, receive_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, date DATE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
SELECT MAX(id) FROM adgroups;
SELECT MIN(id) FROM channels WHERE name = 'desktop');
CREATE TABLE temp_impression_stats_daily ( tile_id INTEGER, date DATE NOT NULL, impressions INTEGER DEFAULT '0' NOT NULL, clicks INTEGER DEFAULT '0' NOT NULL, pinned INTEGER DEFAULT '0' NOT NULL, blocked INTEGER DEFAULT '0' NOT NULL, sponsored_link INTEGER DEFAULT '0' NOT NULL, sponsored INTEGER DEFAULT '0' NOT NULL, position INTEGER DEFAULT '0' NOT NULL, enhanced BOOLEAN DEFAULT FALSE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL, FOREIGN KEY(tile_id) REFERENCES tiles (id), month INTEGER DEFAULT '0' NOT NULL, week INTEGER DEFAULT '0' NOT NULL, year INTEGER DEFAULT '0' NOT NULL)
CREATE TABLE activity_stream_performance_daily ( client_id VARCHAR(64) NOT NULL, tab_id VARCHAR(64) NOT NULL, addon_version VARCHAR(64) NOT NULL, source VARCHAR(64) NOT NULL, session_id VARCHAR(64), experiment_id VARCHAR(64), event VARCHAR(64) NOT NULL, event_id VARCHAR(64) NOT NULL, value INTEGER NOT NULL, receive_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, date DATE NOT NULL, locale VARCHAR(14) NOT NULL, country_code VARCHAR(5) NOT NULL, os VARCHAR(64) NOT NULL, browser VARCHAR(64) NOT NULL, version VARCHAR(64) NOT NULL, device VARCHAR(64) NOT NULL)
CREATE TABLE adgroup_sites( id INTEGER IDENTITY(1,1) NOT NULL, site VARCHAR(1024) NOT NULL, adgroup_id INT NOT NULL, created_at TIMESTAMP DEFAULT SYSDATE NOT NULL, FOREIGN KEY (adgroup_id) REFERENCES adgroups (id), PRIMARY KEY (id))
CREATE TABLE channels ( id INTEGER IDENTITY(1,1) NOT NULL, name VARCHAR(16) NOT NULL, created_at TIMESTAMP WITHOUT TIME ZONE, PRIMARY KEY (id))
