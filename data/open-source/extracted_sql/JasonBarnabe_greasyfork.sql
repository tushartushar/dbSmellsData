CREATE TABLE `GDN_Spammer` ( `UserID` int(11) NOT NULL, `CountSpam` smallint(5) unsigned NOT NULL DEFAULT '0', `CountDeletedSpam` smallint(5) unsigned NOT NULL DEFAULT '0', PRIMARY KEY (`UserID`))
CREATE TABLE `GDN_Comment` ( `CommentID` int(11) NOT NULL AUTO_INCREMENT, `DiscussionID` int(11) NOT NULL, `InsertUserID` int(11) DEFAULT NULL, `UpdateUserID` int(11) DEFAULT NULL, `DeleteUserID` int(11) DEFAULT NULL, `Body` text COLLATE utf8_unicode_ci NOT NULL, `Format` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL, `DateInserted` datetime DEFAULT NULL, `DateDeleted` datetime DEFAULT NULL, `DateUpdated` datetime DEFAULT NULL, `InsertIPAddress` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL, `UpdateIPAddress` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL, `Flag` tinyint(4) NOT NULL DEFAULT '0', `Score` float DEFAULT NULL, `Attributes` text COLLATE utf8_unicode_ci, PRIMARY KEY (`CommentID`), KEY `FK_Comment_InsertUserID` (`InsertUserID`), KEY `IX_Comment_1` (`DiscussionID`,`DateInserted`), KEY `IX_Comment_DateInserted` (`DateInserted`), FULLTEXT KEY `TX_Comment` (`Body`))
SELECT * FROM greasyfork.locales;
CREATE TABLE `daily_install_counts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `ip` varchar(15) COLLATE utf8mb4_unicode_ci NOT NULL, `install_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (`id`), UNIQUE KEY `index_daily_install_counts_on_script_id_and_ip` (`script_id`,`ip`))
CREATE TABLE `GDN_UserConversation` ( `UserID` int(11) NOT NULL, `ConversationID` int(11) NOT NULL, `CountReadMessages` int(11) NOT NULL DEFAULT '0', `LastMessageID` int(11) DEFAULT NULL, `DateLastViewed` datetime DEFAULT NULL, `DateCleared` datetime DEFAULT NULL, `Bookmarked` tinyint(4) NOT NULL DEFAULT '0', `Deleted` tinyint(4) NOT NULL DEFAULT '0', `DateConversationUpdated` datetime DEFAULT NULL, PRIMARY KEY (`UserID`,`ConversationID`), KEY `FK_UserConversation_LastMessageID` (`LastMessageID`), KEY `IX_UserConversation_Inbox` (`UserID`,`Deleted`,`DateConversationUpdated`), KEY `FK_UserConversation_ConversationID` (`ConversationID`))
SELECT * FROM greasyfork.allowed_requires;
CREATE TABLE `script_set_automatic_set_inclusions` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL, `script_set_automatic_type_id` int(11) NOT NULL, `value` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `exclusion` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `index_script_set_automatic_set_inclusions_on_parent_id` (`parent_id`), KEY `ssasi_script_set_automatic_type_id` (`script_set_automatic_type_id`))
update script_types set short_name = deleted  where id = 4
CREATE TABLE `ar_internal_metadata` ( `key` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `value` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `created_at` datetime NOT NULL, `updated_at` datetime NOT NULL, PRIMARY KEY (`key`))
update script_types set short_name = library  where id = 3
CREATE TABLE `GDN_UserComment` ( `UserID` int(11) NOT NULL, `CommentID` int(11) NOT NULL, `Score` float DEFAULT NULL, `DateLastViewed` datetime DEFAULT NULL, PRIMARY KEY (`UserID`,`CommentID`))
update script_types set short_name = public  where id = 1
CREATE TABLE `GDN_Regarding` ( `RegardingID` int(11) NOT NULL AUTO_INCREMENT, `Type` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `InsertUserID` int(11) NOT NULL, `DateInserted` datetime NOT NULL, `ForeignType` varchar(32) COLLATE utf8_unicode_ci NOT NULL, `ForeignID` int(11) NOT NULL, `OriginalContent` text COLLATE utf8_unicode_ci, `ParentType` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL, `ParentID` int(11) DEFAULT NULL, `ForeignURL` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `Comment` text COLLATE utf8_unicode_ci NOT NULL, `Reports` int(11) DEFAULT NULL, PRIMARY KEY (`RegardingID`), KEY `FK_Regarding_Type` (`Type`))
CREATE TABLE `browsers` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL, `name` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `roles_users` ( `user_id` int(11) NOT NULL, `role_id` int(11) NOT NULL, KEY `index_roles_users_on_user_id` (`user_id`), KEY `index_roles_users_on_role_id` (`role_id`))
SELECT * FROM greasyfork.roles;
update scripts set script_delete_type_id = 1, script_type_id = 1  where script_type_id = 4
CREATE TABLE `screenshots_script_versions` ( `id` int(11) NOT NULL AUTO_INCREMENT, `screenshot_id` int(11) DEFAULT NULL, `script_version_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `index_screenshots_script_versions_on_screenshot_id` (`screenshot_id`), KEY `index_screenshots_script_versions_on_script_version_id` (`script_version_id`), CONSTRAINT `fk_rails_9fecbc9bb1` FOREIGN KEY (`script_version_id`) REFERENCES `script_versions` (`id`) ON DELETE CASCADE)
SELECT * FROM greasyfork.schema_migrations;
SELECT MAX(id) FROM script_versions GROUP BY script_id
CREATE TABLE `install_counts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `install_date` date NOT NULL, `installs` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `index_install_counts_on_script_id_and_install_date` (`script_id`,`install_date`))
CREATE TABLE `script_types` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `description` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `short_name` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `localized_script_version_attributes` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_version_id` int(11) NOT NULL, `locale_id` int(11) NOT NULL, `attribute_key` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `value_markup` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `attribute_value` text COLLATE utf8mb4_unicode_ci NOT NULL, `attribute_default` tinyint(1) NOT NULL, PRIMARY KEY (`id`), KEY `index_localized_script_version_attributes_on_script_version_id` (`script_version_id`), KEY `index_localized_script_version_attributes_on_locale_id` (`locale_id`), CONSTRAINT `fk_rails_5dffd65780` FOREIGN KEY (`script_version_id`) REFERENCES `script_versions` (`id`) ON DELETE CASCADE)
CREATE TABLE `identities` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `provider` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL, `uid` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL, `url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `syncing` tinyint(1) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `index_identities_on_uid_and_provider` (`uid`,`provider`))
CREATE TABLE `GDN_Photo` ( `PhotoID` int(11) NOT NULL AUTO_INCREMENT, `Name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `InsertUserID` int(11) DEFAULT NULL, `DateInserted` datetime NOT NULL, PRIMARY KEY (`PhotoID`), KEY `FK_Photo_InsertUserID` (`InsertUserID`))
SELECT * FROM greasyfork.script_delete_types;
CREATE TABLE `screenshots` ( `id` int(11) NOT NULL AUTO_INCREMENT, `screenshot_file_name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `screenshot_content_type` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `screenshot_file_size` int(11) DEFAULT NULL, `screenshot_updated_at` datetime DEFAULT NULL, `caption` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `GDN_UserMerge` ( `MergeID` int(11) NOT NULL AUTO_INCREMENT, `OldUserID` int(11) NOT NULL, `NewUserID` int(11) NOT NULL, `DateInserted` datetime NOT NULL, `InsertUserID` int(11) NOT NULL, `DateUpdated` datetime DEFAULT NULL, `UpdateUserID` int(11) DEFAULT NULL, `Attributes` text COLLATE utf8_unicode_ci, PRIMARY KEY (`MergeID`), KEY `FK_UserMerge_OldUserID` (`OldUserID`), KEY `FK_UserMerge_NewUserID` (`NewUserID`))
UPDATE scripts SET good_ratings = 0, ok_ratings = 0, bad_ratings = 0 WHERE score = 1
CREATE TABLE `script_set_script_inclusions` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL, `child_id` int(11) NOT NULL, `exclusion` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `index_script_set_script_inclusions_on_parent_id` (`parent_id`), KEY `index_script_set_script_inclusions_on_child_id` (`child_id`))
SELECT ScriptID, ForeignUserKey, 0 FROM GDN_Discussion JOIN GDN_UserAuthentication ON InsertUserID = UserID WHERE ScriptID IS NOT NULL AND Rating = 3;
SELECT install_date, installs FROM install_counts where script_id = #{@script.id}
SELECT * FROM greasyfork.locale_contributors;
CREATE TABLE `GDN_ConversationMessage` ( `MessageID` int(11) NOT NULL AUTO_INCREMENT, `ConversationID` int(11) NOT NULL, `Body` text COLLATE utf8_unicode_ci NOT NULL, `Format` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL, `InsertUserID` int(11) DEFAULT NULL, `DateInserted` datetime NOT NULL, `InsertIPAddress` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`MessageID`), KEY `FK_ConversationMessage_ConversationID` (`ConversationID`), KEY `FK_ConversationMessage_InsertUserID` (`InsertUserID`))
CREATE TABLE `roles` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `moderator_actions` ( `id` int(11) NOT NULL AUTO_INCREMENT, `created_at` datetime NOT NULL, `script_id` int(11) DEFAULT NULL, `moderator_id` int(11) NOT NULL, `action` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `reason` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `user_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `GDN_AnalyticsLocal` ( `TimeSlot` varchar(8) COLLATE utf8_unicode_ci NOT NULL, `Views` int(11) DEFAULT NULL, `EmbedViews` int(11) DEFAULT NULL, UNIQUE KEY `UX_AnalyticsLocal` (`TimeSlot`))
CREATE TABLE `script_set_set_inclusions` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parent_id` int(11) NOT NULL, `child_id` int(11) NOT NULL, `exclusion` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `index_script_set_set_inclusions_on_parent_id` (`parent_id`), KEY `index_script_set_set_inclusions_on_child_id` (`child_id`))
CREATE TABLE `disallowed_codes` ( `id` int(11) NOT NULL AUTO_INCREMENT, `pattern` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `description` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `created_at` datetime DEFAULT NULL, `updated_at` datetime DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `syntax_highlighted_codes` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `html` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`), KEY `index_syntax_highlighted_codes_on_script_id` (`script_id`))
CREATE TABLE `script_sync_sources` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `description` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `script_applies_tos` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `text` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL, `domain` tinyint(1) NOT NULL, `tld_extra` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `index_script_applies_tos_on_script_id` (`script_id`), CONSTRAINT `fk_script_applies_tos_script_id` FOREIGN KEY (`script_id`) REFERENCES `scripts` (`id`))
CREATE TABLE `GDN_UserCategory` ( `UserID` int(11) NOT NULL, `CategoryID` int(11) NOT NULL, `DateMarkedRead` datetime DEFAULT NULL, `Unfollow` tinyint(4) NOT NULL DEFAULT '0', PRIMARY KEY (`UserID`,`CategoryID`))
CREATE TABLE `localized_script_attributes` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `locale_id` int(11) NOT NULL, `attribute_key` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `value_markup` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `attribute_value` text COLLATE utf8mb4_unicode_ci NOT NULL, `attribute_default` tinyint(1) NOT NULL, `sync_identifier` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `sync_source_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `index_localized_script_attributes_on_script_id` (`script_id`), KEY `index_localized_script_attributes_on_locale_id` (`locale_id`))
CREATE TABLE `script_set_automatic_types` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`))
SELECT * FROM greasyfork.licenses;
CREATE TABLE `GDN_UserRole` ( `UserID` int(11) NOT NULL, `RoleID` int(11) NOT NULL, PRIMARY KEY (`UserID`,`RoleID`), KEY `IX_UserRole_RoleID` (`RoleID`))
CREATE TABLE `GDN_Draft` ( `DraftID` int(11) NOT NULL AUTO_INCREMENT, `DiscussionID` int(11) DEFAULT NULL, `CategoryID` int(11) DEFAULT NULL, `InsertUserID` int(11) NOT NULL, `UpdateUserID` int(11) NOT NULL, `Name` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `Tags` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `Closed` tinyint(4) NOT NULL DEFAULT '0', `Announce` tinyint(4) NOT NULL DEFAULT '0', `Sink` tinyint(4) NOT NULL DEFAULT '0', `Body` text COLLATE utf8_unicode_ci NOT NULL, `Format` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL, `DateInserted` datetime NOT NULL, `DateUpdated` datetime DEFAULT NULL, PRIMARY KEY (`DraftID`), KEY `FK_Draft_DiscussionID` (`DiscussionID`), KEY `FK_Draft_CategoryID` (`CategoryID`), KEY `FK_Draft_InsertUserID` (`InsertUserID`))
CREATE TABLE `GDN_Flag` ( `DiscussionID` int(11) DEFAULT NULL, `InsertUserID` int(11) NOT NULL, `InsertName` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `AuthorID` int(11) NOT NULL, `AuthorName` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `ForeignURL` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `ForeignID` int(11) NOT NULL, `ForeignType` varchar(32) COLLATE utf8_unicode_ci NOT NULL, `Comment` text COLLATE utf8_unicode_ci NOT NULL, `DateInserted` datetime NOT NULL, KEY `FK_Flag_InsertUserID` (`InsertUserID`), KEY `FK_Flag_ForeignURL` (`ForeignURL`))
SELECT * FROM greasyfork.author_email_notification_types;
CREATE TABLE `author_email_notification_types` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL, `description` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `allowed_requires` ( `id` int(11) NOT NULL AUTO_INCREMENT, `pattern` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `created_at` datetime DEFAULT NULL, `updated_at` datetime DEFAULT NULL, `url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (`id`))
SELECT * FROM greasyfork.roles_users;
CREATE TABLE `GDN_UserAuthentication` ( `ForeignUserKey` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `ProviderKey` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `UserID` int(11) NOT NULL, PRIMARY KEY (`ForeignUserKey`,`ProviderKey`), KEY `FK_UserAuthentication_UserID` (`UserID`))
CREATE TABLE `GDN_Tag` ( `TagID` int(11) NOT NULL AUTO_INCREMENT, `Name` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `FullName` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `Type` varchar(20) COLLATE utf8_unicode_ci NOT NULL DEFAULT '', `ParentTagID` int(11) DEFAULT NULL, `InsertUserID` int(11) DEFAULT NULL, `DateInserted` datetime NOT NULL, `CategoryID` int(11) NOT NULL DEFAULT '-1', `CountDiscussions` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`TagID`), UNIQUE KEY `UX_Tag` (`Name`,`CategoryID`), KEY `IX_Tag_Type` (`Type`), KEY `FK_Tag_InsertUserID` (`InsertUserID`), KEY `IX_Tag_FullName` (`FullName`), KEY `FK_Tag_ParentTagID` (`ParentTagID`))
SELECT * FROM greasyfork.script_types;
CREATE TABLE `GDN_Attachment` ( `AttachmentID` int(11) NOT NULL AUTO_INCREMENT, `Type` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `ForeignID` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `ForeignUserID` int(11) NOT NULL, `Source` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `SourceID` varchar(32) COLLATE utf8_unicode_ci NOT NULL, `SourceURL` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `Attributes` text COLLATE utf8_unicode_ci, `DateInserted` datetime NOT NULL, `InsertUserID` int(11) NOT NULL, `InsertIPAddress` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `DateUpdated` datetime DEFAULT NULL, `UpdateUserID` int(11) DEFAULT NULL, `UpdateIPAddress` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`AttachmentID`), KEY `IX_Attachment_ForeignID` (`ForeignID`), KEY `FK_Attachment_ForeignUserID` (`ForeignUserID`), KEY `FK_Attachment_InsertUserID` (`InsertUserID`))
SELECT * FROM greasyfork.script_sync_types;
CREATE TABLE `delayed_jobs` ( `id` int(11) NOT NULL AUTO_INCREMENT, `priority` int(11) NOT NULL DEFAULT '0', `attempts` int(11) NOT NULL DEFAULT '0', `handler` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL, `last_error` mediumtext COLLATE utf8mb4_unicode_ci, `run_at` datetime DEFAULT NULL, `locked_at` datetime DEFAULT NULL, `failed_at` datetime DEFAULT NULL, `locked_by` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `queue` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `created_at` datetime DEFAULT NULL, `updated_at` datetime DEFAULT NULL, PRIMARY KEY (`id`), KEY `delayed_jobs_priority` (`priority`,`run_at`))
CREATE TABLE `GDN_UserAuthenticationProvider` ( `AuthenticationKey` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `AuthenticationSchemeAlias` varchar(32) COLLATE utf8_unicode_ci NOT NULL, `Name` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL, `URL` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `AssociationSecret` text COLLATE utf8_unicode_ci, `AssociationHashMethod` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL, `AuthenticateUrl` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `RegisterUrl` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `SignInUrl` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `SignOutUrl` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `PasswordUrl` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `ProfileUrl` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `Attributes` text COLLATE utf8_unicode_ci, `Active` tinyint(4) NOT NULL DEFAULT '1', `IsDefault` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`AuthenticationKey`))
CREATE TABLE `compatibilities` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `browser_id` int(11) NOT NULL, `compatible` tinyint(1) NOT NULL, `comments` varchar(200) COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (`id`), KEY `index_compatibilities_on_script_id` (`script_id`), KEY `fk_rails_d7eb310317` (`browser_id`), CONSTRAINT `fk_rails_94fd31c3c7` FOREIGN KEY (`script_id`) REFERENCES `scripts` (`id`) ON DELETE CASCADE, CONSTRAINT `fk_rails_d7eb310317` FOREIGN KEY (`browser_id`) REFERENCES `browsers` (`id`) ON DELETE CASCADE)
CREATE TABLE `GDN_Session` ( `SessionID` char(32) COLLATE utf8_unicode_ci NOT NULL, `UserID` int(11) NOT NULL DEFAULT '0', `DateInserted` datetime NOT NULL, `DateUpdated` datetime NOT NULL, `TransientKey` varchar(12) COLLATE utf8_unicode_ci NOT NULL, `Attributes` text COLLATE utf8_unicode_ci, PRIMARY KEY (`SessionID`))
SELECT * FROM greasyfork.script_sync_sources;
CREATE TABLE `script_sets` ( `id` int(11) NOT NULL AUTO_INCREMENT, `user_id` int(11) NOT NULL, `name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL, `description` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL, `created_at` datetime DEFAULT NULL, `updated_at` datetime DEFAULT NULL, `favorite` tinyint(1) NOT NULL DEFAULT '0', `default_sort` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL, PRIMARY KEY (`id`), KEY `index_script_sets_on_user_id` (`user_id`))
CREATE TABLE `sensitive_sites` ( `id` int(11) NOT NULL AUTO_INCREMENT, `domain` varchar(150) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `index_sensitive_sites_on_domain` (`domain`))
CREATE TABLE `cpd_duplication_scripts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `cpd_duplication_id` int(11) NOT NULL, `script_id` int(11) NOT NULL, `line` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `index_cpd_duplication_scripts_on_cpd_duplication_id` (`cpd_duplication_id`), KEY `index_cpd_duplication_scripts_on_script_id` (`script_id`))
CREATE TABLE `GDN_Role` ( `RoleID` int(11) NOT NULL AUTO_INCREMENT, `Name` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `Description` varchar(500) COLLATE utf8_unicode_ci DEFAULT NULL, `Type` enum('guest','unconfirmed','applicant','member','moderator','administrator') COLLATE utf8_unicode_ci DEFAULT NULL, `Sort` int(11) DEFAULT NULL, `Deletable` tinyint(4) NOT NULL DEFAULT '1', `CanSession` tinyint(4) NOT NULL DEFAULT '1', `PersonalInfo` tinyint(4) NOT NULL DEFAULT '0', PRIMARY KEY (`RoleID`))
CREATE TABLE `script_codes` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code` longtext COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `GDN_Media` ( `MediaID` int(11) NOT NULL AUTO_INCREMENT, `Name` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `Type` varchar(128) COLLATE utf8_unicode_ci NOT NULL, `Size` int(11) NOT NULL, `ImageWidth` smallint(5) unsigned DEFAULT NULL, `ImageHeight` smallint(5) unsigned DEFAULT NULL, `ThumbWidth` smallint(5) unsigned DEFAULT NULL, `ThumbHeight` smallint(5) unsigned DEFAULT NULL, `ThumbPath` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `StorageMethod` varchar(24) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'local', `Path` varchar(255) COLLATE utf8_unicode_ci NOT NULL, `InsertUserID` int(11) NOT NULL, `DateInserted` datetime NOT NULL, `ForeignID` int(11) DEFAULT NULL, `ForeignTable` varchar(24) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`MediaID`), KEY `IX_Media_Foreign` (`ForeignID`,`ForeignTable`))
CREATE TABLE `locales` ( `id` int(11) NOT NULL AUTO_INCREMENT, `code` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL, `rtl` tinyint(1) NOT NULL DEFAULT '0', `detect_language_code` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `english_name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL, `native_name` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL, `ui_available` tinyint(1) NOT NULL DEFAULT '0', `percent_complete` int(11) DEFAULT '0', PRIMARY KEY (`id`))
CREATE TABLE `GDN_Invitation` ( `InvitationID` int(11) NOT NULL AUTO_INCREMENT, `Email` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `Name` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL, `RoleIDs` text COLLATE utf8_unicode_ci, `Code` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `InsertUserID` int(11) DEFAULT NULL, `DateInserted` datetime NOT NULL, `AcceptedUserID` int(11) DEFAULT NULL, `DateExpires` datetime DEFAULT NULL, PRIMARY KEY (`InvitationID`), UNIQUE KEY `UX_Invitation_code` (`Code`), KEY `FK_Invitation_InsertUserID` (`InsertUserID`), KEY `IX_Invitation_Email` (`Email`), KEY `IX_Invitation_userdate` (`InsertUserID`,`DateInserted`))
SELECT ScriptID, ForeignUserKey, 1 FROM GDN_Discussion JOIN GDN_UserAuthentication ON InsertUserID = UserID WHERE ScriptID IS NOT NULL AND Rating = 4;
CREATE TABLE `GDN_UserPoints` ( `SlotType` enum('d','w','m','y','a') COLLATE utf8_unicode_ci NOT NULL, `TimeSlot` datetime NOT NULL, `Source` varchar(10) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'Total', `CategoryID` int(11) NOT NULL DEFAULT '0', `UserID` int(11) NOT NULL, `Points` int(11) NOT NULL DEFAULT '0', PRIMARY KEY (`SlotType`,`TimeSlot`,`Source`,`CategoryID`,`UserID`))
CREATE TABLE `script_delete_types` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL, `description` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`))
SELECT script_id, script_code_id FROM script_versions WHERE ID IN (#{newest_sv_ids.join(',')})
CREATE TABLE `GDN_Message` ( `MessageID` int(11) NOT NULL AUTO_INCREMENT, `Content` text COLLATE utf8_unicode_ci NOT NULL, `Format` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL, `AllowDismiss` tinyint(4) NOT NULL DEFAULT '1', `Enabled` tinyint(4) NOT NULL DEFAULT '1', `Application` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `Controller` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `Method` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `CategoryID` int(11) DEFAULT NULL, `IncludeSubcategories` tinyint(4) NOT NULL DEFAULT '0', `AssetTarget` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL, `CssClass` varchar(20) COLLATE utf8_unicode_ci DEFAULT NULL, `Sort` int(11) DEFAULT NULL, PRIMARY KEY (`MessageID`))
CREATE TABLE `GDN_ActivityComment` ( `ActivityCommentID` int(11) NOT NULL AUTO_INCREMENT, `ActivityID` int(11) NOT NULL, `Body` text COLLATE utf8_unicode_ci NOT NULL, `Format` varchar(20) COLLATE utf8_unicode_ci NOT NULL, `InsertUserID` int(11) NOT NULL, `DateInserted` datetime NOT NULL, `InsertIPAddress` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`ActivityCommentID`), KEY `FK_ActivityComment_ActivityID` (`ActivityID`))
CREATE TABLE `cpd_duplications` ( `id` int(11) NOT NULL AUTO_INCREMENT, `lines` int(11) NOT NULL, `created_at` datetime DEFAULT NULL, `updated_at` datetime DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE `GDN_ActivityType` ( `ActivityTypeID` int(11) NOT NULL AUTO_INCREMENT, `Name` varchar(20) COLLATE utf8_unicode_ci NOT NULL, `AllowComments` tinyint(4) NOT NULL DEFAULT '0', `ShowIcon` tinyint(4) NOT NULL DEFAULT '0', `ProfileHeadline` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `FullHeadline` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `RouteCode` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `Notify` tinyint(4) NOT NULL DEFAULT '0', `Public` tinyint(4) NOT NULL DEFAULT '1', PRIMARY KEY (`ActivityTypeID`))
CREATE TABLE `GDN_UserMergeItem` ( `MergeID` int(11) NOT NULL, `Table` varchar(30) COLLATE utf8_unicode_ci NOT NULL, `Column` varchar(30) COLLATE utf8_unicode_ci NOT NULL, `RecordID` int(11) NOT NULL, `OldUserID` int(11) NOT NULL, `NewUserID` int(11) NOT NULL, KEY `FK_UserMergeItem_MergeID` (`MergeID`))
SELECT * FROM greasyfork.browsers;
CREATE TABLE `GDN_UserDiscussion` ( `UserID` int(11) NOT NULL, `DiscussionID` int(11) NOT NULL, `Score` float DEFAULT NULL, `CountComments` int(11) NOT NULL DEFAULT '0', `DateLastViewed` datetime DEFAULT NULL, `Dismissed` tinyint(4) NOT NULL DEFAULT '0', `Bookmarked` tinyint(4) NOT NULL DEFAULT '0', `Participated` tinyint(4) NOT NULL DEFAULT '0', PRIMARY KEY (`UserID`,`DiscussionID`), KEY `FK_UserDiscussion_DiscussionID` (`DiscussionID`))
CREATE TABLE `script_sync_types` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, `description` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `GDN_TagDiscussion` ( `TagID` int(11) NOT NULL, `DiscussionID` int(11) NOT NULL, `CategoryID` int(11) NOT NULL, `DateInserted` datetime NOT NULL, PRIMARY KEY (`TagID`,`DiscussionID`), KEY `IX_TagDiscussion_CategoryID` (`CategoryID`))
CREATE TABLE `script_versions` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `changelog` mediumtext COLLATE utf8mb4_unicode_ci, `version` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL, `created_at` datetime DEFAULT NULL, `updated_at` datetime DEFAULT NULL, `script_code_id` int(11) NOT NULL, `rewritten_script_code_id` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `index_script_versions_on_script_id` (`script_id`), CONSTRAINT `fk_script_versions_script_id` FOREIGN KEY (`script_id`) REFERENCES `scripts` (`id`))
update script_types set short_name = unlisted  where id = 2
CREATE TABLE `GDN_UserAuthenticationNonce` ( `Nonce` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `Token` varchar(128) COLLATE utf8_unicode_ci NOT NULL, `Timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`Nonce`))
CREATE TABLE `GDN_UserMeta` ( `UserID` int(11) NOT NULL, `Name` varchar(100) COLLATE utf8_unicode_ci NOT NULL, `Value` text COLLATE utf8_unicode_ci, PRIMARY KEY (`UserID`,`Name`), KEY `IX_UserMeta_Name` (`Name`))
SELECT child_id, user_id, 1 FROM script_sets JOIN script_set_script_inclusions ON script_sets.id = parent_id WHERE favorite;
CREATE TABLE `GDN_Ban` ( `BanID` int(11) NOT NULL AUTO_INCREMENT, `BanType` enum('IPAddress','Name','Email') COLLATE utf8_unicode_ci NOT NULL, `BanValue` varchar(50) COLLATE utf8_unicode_ci NOT NULL, `Notes` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL, `CountUsers` int(10) unsigned NOT NULL DEFAULT '0', `CountBlockedRegistrations` int(10) unsigned NOT NULL DEFAULT '0', `InsertUserID` int(11) NOT NULL, `DateInserted` datetime NOT NULL, `InsertIPAddress` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL, `UpdateUserID` int(11) DEFAULT NULL, `DateUpdated` datetime DEFAULT NULL, `UpdateIPAddress` varchar(15) COLLATE utf8_unicode_ci DEFAULT NULL, PRIMARY KEY (`BanID`), UNIQUE KEY `UX_Ban` (`BanType`,`BanValue`))
CREATE TABLE `update_check_counts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `update_check_date` date NOT NULL, `update_checks` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `index_update_check_counts_on_script_id_and_update_check_date` (`script_id`,`update_check_date`))
CREATE TABLE `GDN_UserAuthenticationToken` ( `Token` varchar(128) COLLATE utf8_unicode_ci NOT NULL, `ProviderKey` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `ForeignUserKey` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL, `TokenSecret` varchar(64) COLLATE utf8_unicode_ci NOT NULL, `TokenType` enum('request','access') COLLATE utf8_unicode_ci NOT NULL, `Authorized` tinyint(4) NOT NULL, `Timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, `Lifetime` int(11) NOT NULL, PRIMARY KEY (`Token`,`ProviderKey`))
CREATE TABLE `daily_update_check_counts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `script_id` int(11) NOT NULL, `ip` varchar(15) COLLATE utf8mb4_unicode_ci NOT NULL, `update_check_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, PRIMARY KEY (`id`), UNIQUE KEY `index_daily_update_check_counts_on_script_id_and_ip` (`script_id`,`ip`))
CREATE TABLE `licenses` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL, `pattern` varchar(1000) COLLATE utf8mb4_unicode_ci NOT NULL, `html` varchar(1000) COLLATE utf8mb4_unicode_ci NOT NULL, `priority` int(11) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `locale_contributors` ( `id` int(11) NOT NULL AUTO_INCREMENT, `locale_id` int(11) NOT NULL, `transifex_user_name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL, PRIMARY KEY (`id`), KEY `index_locale_contributors_on_locale_id` (`locale_id`))
SELECT update_check_date, update_checks FROM update_check_counts where script_id = #{@script.id}
CREATE TABLE `schema_migrations` ( `version` varchar(150) COLLATE utf8mb4_unicode_ci NOT NULL, UNIQUE KEY `unique_schema_migrations` (`version`))
