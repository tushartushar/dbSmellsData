CREATE TABLE afe_parameterized_jobs_profilers ( id INT PRIMARY KEY AUTO_INCREMENT, parameterized_job_id INT NOT NULL, profiler_id INT NOT NULL)
CREATE TABLE `planner_test_control_files` ( `id` int(11) NOT NULL auto_increment, `the_hash` varchar(40) NOT NULL, `contents` longtext NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `the_hash` (`the_hash`))
CREATE TABLE `tko_perf_view_2` ( `test_idx` int(10) unsigned, `job_idx` int(10) unsigned, `test_name` varchar(300), `subdir` varchar(300), `kernel_idx` int(10) unsigned, `status_idx` int(10) unsigned, `reason` varchar(1024), `machine_idx` int(10) unsigned, `test_started_time` datetime, `test_finished_time` datetime, `job_tag` varchar(100), `job_name` varchar(100), `job_owner` varchar(80), `job_queued_time` datetime, `job_started_time` datetime, `job_finished_time` datetime, `hostname` varchar(700), `platform` varchar(80), `machine_owner` varchar(80), `kernel_hash` varchar(35), `kernel_base` varchar(30), `kernel` varchar(100), `status` varchar(10), `iteration` int(11), `iteration_key` varchar(30), `iteration_value` float)
CREATE TABLE `host_attributes` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `host_id` integer NOT NULL, `attribute` varchar(90) NOT NULL, `value` varchar(300) NOT NULL, FOREIGN KEY (host_id) REFERENCES hosts (id), KEY (attribute))
CREATE TABLE tko_iteration_result ( test_idx integer NOT NULL REFERENCES tko_tests (test_idx), iteration integer NOT NULL, attribute varchar(90) NOT NULL, value numeric(31, 12) NULL)
CREATE TABLE `planner_test_run_bugs` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `testrun_id` integer NOT NULL, `bug_id` integer NOT NULL, UNIQUE (`testrun_id`, `bug_id`))
CREATE TABLE `planner_tests` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `control_file_id` integer NOT NULL, `execution_order` integer NOT NULL)
CREATE TABLE `tko_test_view_2` ( `test_idx` int(10) unsigned, `job_idx` int(10) unsigned, `test_name` varchar(300), `subdir` varchar(300), `kernel_idx` int(10) unsigned, `status_idx` int(10) unsigned, `reason` varchar(1024), `machine_idx` int(10) unsigned, `test_started_time` datetime, `test_finished_time` datetime, `job_tag` varchar(100), `job_name` varchar(100), `job_owner` varchar(80), `job_queued_time` datetime, `job_started_time` datetime, `job_finished_time` datetime, `afe_job_id` int(11), `hostname` varchar(700), `platform` varchar(80), `machine_owner` varchar(80), `kernel_hash` varchar(35), `kernel_base` varchar(30), `kernel` varchar(100), `status` varchar(10))
CREATE TABLE tko_iteration_attributes ( test_idx integer NOT NULL REFERENCES tko_tests (test_idx), iteration integer NOT NULL, attribute varchar(90) NOT NULL, value varchar(300) NOT NULL)
CREATE TABLE `planner_autoprocess` ( `id` int(11) NOT NULL auto_increment, `plan_id` int(11) NOT NULL, `condition` longtext NOT NULL, `enabled` tinyint(1) NOT NULL, `reason_override` varchar(255) default NULL, PRIMARY KEY (`id`), KEY `planner_autoprocess_plan_id` (`plan_id`), CONSTRAINT `autoprocess_plan_id_fk` FOREIGN KEY (`plan_id`) REFERENCES `planner_plans` (`id`))
CREATE TABLE `tko_query_history` ( `uid` varchar(32) DEFAULT NULL, `time_created` varchar(32) DEFAULT NULL, `user_comment` varchar(256) DEFAULT NULL, `url` varchar(1000) DEFAULT NULL)
CREATE TABLE `tko_embedded_graphing_queries` ( `id` int(11) NOT NULL AUTO_INCREMENT, `url_token` text NOT NULL, `graph_type` varchar(16) NOT NULL, `params` text NOT NULL, `last_updated` datetime NOT NULL, `refresh_time` datetime DEFAULT NULL, `cached_png` mediumblob, PRIMARY KEY (`id`), KEY `url_token` (`url_token`(128)))
CREATE TABLE planner_additional_parameter_values ( id INT PRIMARY KEY AUTO_INCREMENT, additional_parameter_id INT NOT NULL, `key` VARCHAR(255) NOT NULL, value VARCHAR(255) NOT NULL)
CREATE TABLE `tko_status` ( `status_idx` int(10) unsigned NOT NULL AUTO_INCREMENT, `word` varchar(10) DEFAULT NULL, PRIMARY KEY (`status_idx`), KEY `word` (`word`))
CREATE INDEX afe_drone_sets_drones_drone_ibfkON afe_drone_sets_drones (drone_id);
CREATE TABLE `tko_iteration_result` ( `test_idx` int(10) unsigned NOT NULL, `iteration` int(11) DEFAULT NULL, `attribute` varchar(30) DEFAULT NULL, `value` float DEFAULT NULL, KEY `test_idx` (`test_idx`), KEY `attribute` (`attribute`), KEY `value` (`value`), CONSTRAINT `tko_iteration_result_ibfk_1` FOREIGN KEY (`test_idx`) REFERENCES `tko_tests` (`test_idx`) ON DELETE CASCADE)
CREATE TABLE `planner_test_jobs` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `test_id` integer NOT NULL, `afe_job_id` integer NOT NULL)
CREATE TABLE `planner_plan_owners` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `user_id` integer NOT NULL, UNIQUE (`plan_id`, `user_id`))
UPDATE afe_hosts SET hostname=host2 WHERE id=2
CREATE TABLE `afe_parameterized_jobs_kernels` ( `parameterized_job_id` int(11) NOT NULL, `kernel_id` int(11) NOT NULL, PRIMARY KEY (`parameterized_job_id`,`kernel_id`), CONSTRAINT `afe_parameterized_jobs_kernels_parameterized_job_ibfk` FOREIGN KEY (`parameterized_job_id`) REFERENCES `afe_parameterized_jobs` (`id`))
CREATE TABLE afe_drone_sets ( id INT AUTO_INCREMENT NOT NULL PRIMARY KEY, name VARCHAR(255) NOT NULL)
CREATE TABLE `planner_test_configs` ( `id` int(11) NOT NULL auto_increment, `plan_id` int(11) NOT NULL, `control_file_id` int(11) NOT NULL, `execution_order` int(11) NOT NULL, `alias` varchar(255) NOT NULL, `estimated_runtime` int(11) NOT NULL, `is_server` tinyint(1) default '1', PRIMARY KEY (`id`), UNIQUE KEY `tests_plan_id_alias_unique` (`plan_id`,`alias`), KEY `planner_tests_plan_id` (`plan_id`), KEY `planner_tests_control_file_id` (`control_file_id`), CONSTRAINT `tests_control_file_id_fk` FOREIGN KEY (`control_file_id`) REFERENCES `planner_test_control_files` (`id`), CONSTRAINT `tests_plan_id_fk` FOREIGN KEY (`plan_id`) REFERENCES `planner_plans` (`id`))
CREATE TABLE `tko_perf_view` ( `test_idx` int(10) unsigned, `job_idx` int(10) unsigned, `test` varchar(300), `subdir` varchar(300), `kernel_idx` int(10) unsigned, `status` int(10) unsigned, `reason` varchar(1024), `machine_idx` int(10) unsigned, `test_started_time` datetime, `test_finished_time` datetime, `job_tag` varchar(100), `job_label` varchar(100), `job_username` varchar(80), `job_queued_time` datetime, `job_started_time` datetime, `job_finished_time` datetime, `machine_hostname` varchar(700), `machine_group` varchar(80), `machine_owner` varchar(80), `kernel_hash` varchar(35), `kernel_base` varchar(30), `kernel_printable` varchar(100), `status_word` varchar(10), `iteration` int(11), `iteration_key` varchar(30), `iteration_value` float)
CREATE TABLE `jobs_dependency_labels` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `job_id` integer NOT NULL REFERENCES `jobs` (`id`), `label_id` integer NOT NULL REFERENCES `labels` (`id`), UNIQUE (`job_id`, `label_id`))
CREATE TABLE `afe_ineligible_host_queues` ( `id` int(11) NOT NULL AUTO_INCREMENT, `job_id` int(11) DEFAULT NULL, `host_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `ineligible_host_queues_both_ids` (`host_id`,`job_id`), KEY `ineligible_host_queues_job_id` (`job_id`), CONSTRAINT `ineligible_host_queues_host_id_fk` FOREIGN KEY (`host_id`) REFERENCES `afe_hosts` (`id`) ON DELETE NO ACTION, CONSTRAINT `ineligible_host_queues_job_id_fk` FOREIGN KEY (`job_id`) REFERENCES `afe_jobs` (`id`) ON DELETE NO ACTION)
CREATE TABLE `planner_keyvals` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `the_hash` varchar(40) NOT NULL UNIQUE, `key` varchar(1024) NOT NULL, `value` varchar(1024) NOT NULL)
CREATE TABLE `planner_plan_host_labels` ( `id` int(11) NOT NULL auto_increment, `plan_id` int(11) NOT NULL, `label_id` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `plan_host_labels_plan_id_fk` (`plan_id`), KEY `plan_host_labels_label_id_fk` (`label_id`), CONSTRAINT `plan_host_labels_label_id_fk` FOREIGN KEY (`label_id`) REFERENCES `afe_labels` (`id`), CONSTRAINT `plan_host_labels_plan_id_fk` FOREIGN KEY (`plan_id`) REFERENCES `planner_plans` (`id`))
CREATE INDEX recurring_run_job_id ON `recurring_run` (`job_id`);
CREATE TABLE afe_kernels ( id INT PRIMARY KEY AUTO_INCREMENT, version VARCHAR(255) NOT NULL, cmdline VARCHAR(255) DEFAULT '')
SELECT test_idx, iteration_value FROM tko_perf_view_2 WHERE test_idx < 1000 AND test_name = 'dbench' AND iteration_key ='throughput' AND kernel = %s ORDER BY iteration_value
CREATE TABLE `afe_recurring_run` ( `id` int(11) NOT NULL AUTO_INCREMENT, `job_id` int(11) NOT NULL, `owner_id` int(11) NOT NULL, `start_date` datetime NOT NULL, `loop_period` int(11) NOT NULL, `loop_count` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `recurring_run_job_id` (`job_id`), KEY `recurring_run_owner_id` (`owner_id`), CONSTRAINT `recurring_run_job_id_fk` FOREIGN KEY (`job_id`) REFERENCES `afe_jobs` (`id`) ON DELETE NO ACTION, CONSTRAINT `recurring_run_owner_id_fk` FOREIGN KEY (`owner_id`) REFERENCES `afe_users` (`id`) ON DELETE NO ACTION)
CREATE TABLE `afe_drones` ( `id` int(11) NOT NULL AUTO_INCREMENT, `hostname` varchar(255) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `afe_drones_unique` (`hostname`))
CREATE TABLE `tko_machines` ( `machine_idx` int(10) unsigned NOT NULL AUTO_INCREMENT, `hostname` varchar(700) DEFAULT NULL, `machine_group` varchar(80) DEFAULT NULL, `owner` varchar(80) DEFAULT NULL, PRIMARY KEY (`machine_idx`), UNIQUE KEY `hostname` (`hostname`))
CREATE TABLE afe_parameterized_jobs_kernels ( parameterized_job_id INT NOT NULL, kernel_id INT NOT NULL, PRIMARY KEY (parameterized_job_id, kernel_id))
CREATE TABLE special_tasks ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, host_id INT NOT NULL REFERENCES hosts(id), task VARCHAR(64) NOT NULL, time_requested DATETIME NOT NULL, is_active TINYINT(1) NOT NULL DEFAULT FALSE, is_complete TINYINT(1) NOT NULL DEFAULT FALSE, INDEX special_tasks_host_id (host_id))
CREATE INDEX afe_drone_sets_drones_droneset_ibfkON afe_drone_sets_drones (droneset_id);
CREATE TABLE afe_drone_sets_drones ( id INT AUTO_INCREMENT NOT NULL PRIMARY KEY, droneset_id INT NOT NULL, drone_id INT NOT NULL)
CREATE TABLE afe_test_parameters ( id INT PRIMARY KEY AUTO_INCREMENT, test_id INT NOT NULL, name VARCHAR(255) NOT NULL)
CREATE TABLE `planner_hosts` ( `id` int(11) NOT NULL auto_increment, `plan_id` int(11) NOT NULL, `host_id` int(11) NOT NULL, `complete` tinyint(1) NOT NULL, `blocked` tinyint(1) NOT NULL, `added_by_label` tinyint(1) default '0', PRIMARY KEY (`id`), KEY `planner_hosts_plan_id` (`plan_id`), KEY `planner_hosts_host_id` (`host_id`), CONSTRAINT `hosts_host_id_fk` FOREIGN KEY (`host_id`) REFERENCES `afe_hosts` (`id`), CONSTRAINT `hosts_plan_id_fk` FOREIGN KEY (`plan_id`) REFERENCES `planner_plans` (`id`))
CREATE TABLE `afe_acl_groups_users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `aclgroup_id` int(11) DEFAULT NULL, `user_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `acl_groups_users_both_ids` (`aclgroup_id`,`user_id`), KEY `acl_groups_users_user_id` (`user_id`), CONSTRAINT `acl_groups_users_aclgroup_id_fk` FOREIGN KEY (`aclgroup_id`) REFERENCES `afe_acl_groups` (`id`) ON DELETE NO ACTION, CONSTRAINT `acl_groups_users_user_id_fk` FOREIGN KEY (`user_id`) REFERENCES `afe_users` (`id`) ON DELETE NO ACTION)
CREATE TABLE `afe_drone_sets` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `afe_drone_sets_unique` (`name`))
select job_idx from tko_jobs where afe_job_id=%s
CREATE TABLE `planner_saved_objects` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `user_id` integer NOT NULL, `type` varchar(16) NOT NULL, `name` varchar(255) NOT NULL, `encoded_object` longtext NOT NULL, UNIQUE (`user_id`, `type`, `name`))
UPDATE afe_hosts SET locked=0, invalid=1  WHERE id=1
CREATE TABLE `afe_parameterized_job_parameters` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parameterized_job_id` int(11) NOT NULL, `test_parameter_id` int(11) NOT NULL, `parameter_value` text NOT NULL, `parameter_type` enum('int','float','string') DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `afe_parameterized_job_parameters_unique` (`parameterized_job_id`,`test_parameter_id`), KEY `afe_parameterized_job_parameters_test_parameter_ibfk` (`test_parameter_id`), CONSTRAINT `afe_parameterized_job_parameters_job_ibfk` FOREIGN KEY (`parameterized_job_id`) REFERENCES `afe_parameterized_jobs` (`id`), CONSTRAINT `afe_parameterized_job_parameters_test_parameter_ibfk` FOREIGN KEY (`test_parameter_id`) REFERENCES `afe_test_parameters` (`id`))
CREATE TABLE `autotests_dependency_labels` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `test_id` integer NOT NULL REFERENCES `autotests` (`id`), `label_id` integer NOT NULL REFERENCES `labels` (`id`), UNIQUE (`test_id`, `label_id`))
CREATE TABLE `planner_autoprocess_bugs` ( `id` int(11) NOT NULL auto_increment, `autoprocess_id` int(11) NOT NULL, `bug_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `autoprocess_id` (`autoprocess_id`,`bug_id`), KEY `autoprocess_bugs_bug_id_fk` (`bug_id`), CONSTRAINT `autoprocess_bugs_autoprocess_id_fk` FOREIGN KEY (`autoprocess_id`) REFERENCES `planner_autoprocess` (`id`), CONSTRAINT `autoprocess_bugs_bug_id_fk` FOREIGN KEY (`bug_id`) REFERENCES `planner_bugs` (`id`))
CREATE TABLE `planner_history` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `action_id` integer NOT NULL, `user_id` integer NOT NULL, `data_type_id` integer NOT NULL, `object_id` integer NOT NULL, `old_object_repr` longtext NOT NULL, `new_object_repr` longtext NOT NULL, `time` datetime NOT NULL)
CREATE TABLE `planner_autoprocess_keyvals` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `autoprocess_id` integer NOT NULL, `keyval_id` integer NOT NULL, UNIQUE (`autoprocess_id`, `keyval_id`))
CREATE TABLE `afe_autotests_dependency_labels` ( `id` int(11) NOT NULL AUTO_INCREMENT, `test_id` int(11) NOT NULL, `label_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `test_id` (`test_id`,`label_id`), KEY `autotests_dependency_labels_label_id_fk` (`label_id`), CONSTRAINT `autotests_dependency_labels_label_id_fk` FOREIGN KEY (`label_id`) REFERENCES `afe_labels` (`id`) ON DELETE NO ACTION, CONSTRAINT `autotests_dependency_labels_test_id_fk` FOREIGN KEY (`test_id`) REFERENCES `afe_autotests` (`id`) ON DELETE NO ACTION)
CREATE TABLE `tko_saved_queries` ( `id` int(11) NOT NULL AUTO_INCREMENT, `owner` varchar(80) NOT NULL, `name` varchar(100) NOT NULL, `url_token` longtext NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE afe_parameterized_job_profiler_parameters ( id INT PRIMARY KEY AUTO_INCREMENT, parameterized_job_profiler_id INT NOT NULL, parameter_name VARCHAR(255) NOT NULL, parameter_value TEXT NOT NULL, parameter_type ENUM('int', 'float', 'string'))
SELECT * FROM %s
CREATE TABLE `afe_hosts_labels` ( `id` int(11) NOT NULL AUTO_INCREMENT, `host_id` int(11) DEFAULT NULL, `label_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `hosts_labels_both_ids` (`label_id`,`host_id`), KEY `hosts_labels_host_id` (`host_id`), CONSTRAINT `hosts_labels_host_id_fk` FOREIGN KEY (`host_id`) REFERENCES `afe_hosts` (`id`) ON DELETE NO ACTION, CONSTRAINT `hosts_labels_label_id_fk` FOREIGN KEY (`label_id`) REFERENCES `afe_labels` (`id`) ON DELETE NO ACTION)
CREATE TABLE `tko_patches` ( `kernel_idx` int(10) unsigned NOT NULL, `name` varchar(80) DEFAULT NULL, `url` varchar(300) DEFAULT NULL, `hash` varchar(35) DEFAULT NULL, KEY `kernel_idx` (`kernel_idx`), CONSTRAINT `tko_patches_ibfk_1` FOREIGN KEY (`kernel_idx`) REFERENCES `tko_kernels` (`kernel_idx`) ON DELETE CASCADE)
CREATE TABLE `planner_plan_host_labels` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `label_id` integer NOT NULL)
CREATE TABLE `planner_plans` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(255) NOT NULL UNIQUE, `label_override` varchar(255) NULL, `support` longtext NOT NULL, `complete` bool NOT NULL, `dirty` bool NOT NULL, `initialized` bool NOT NULL)
CREATE TABLE `aborted_host_queue_entries` ( `queue_entry_id` integer NOT NULL PRIMARY KEY, `aborted_by_id` integer NOT NULL, `aborted_on` datetime NOT NULL)
CREATE TABLE `afe_acl_groups_hosts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `aclgroup_id` int(11) DEFAULT NULL, `host_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `acl_groups_hosts_both_ids` (`aclgroup_id`,`host_id`), KEY `acl_groups_hosts_host_id` (`host_id`), CONSTRAINT `acl_groups_hosts_aclgroup_id_fk` FOREIGN KEY (`aclgroup_id`) REFERENCES `afe_acl_groups` (`id`) ON DELETE NO ACTION, CONSTRAINT `acl_groups_hosts_host_id_fk` FOREIGN KEY (`host_id`) REFERENCES `afe_hosts` (`id`) ON DELETE NO ACTION)
CREATE TABLE `afe_labels` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(750) DEFAULT NULL, `kernel_config` varchar(255) DEFAULT NULL, `platform` tinyint(1) DEFAULT '0', `invalid` tinyint(1) NOT NULL, `only_if_needed` tinyint(1) NOT NULL, `atomic_group_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`), KEY `atomic_group_id` (`atomic_group_id`), CONSTRAINT `afe_labels_ibfk_1` FOREIGN KEY (`atomic_group_id`) REFERENCES `afe_atomic_groups` (`id`) ON DELETE NO ACTION)
CREATE TABLE afe_parameterized_jobs ( id INT PRIMARY KEY AUTO_INCREMENT, test_id INT NOT NULL, label_id INT DEFAULT NULL, use_container TINYINT(1) DEFAULT 0, profile_only TINYINT(1) DEFAULT 0, upload_kernel_config TINYINT(1) DEFAULT 0)
CREATE TABLE `planner_history` ( `id` int(11) NOT NULL auto_increment, `plan_id` int(11) NOT NULL, `action_id` int(11) NOT NULL, `user_id` int(11) NOT NULL, `data_type_id` int(11) NOT NULL, `object_id` int(11) NOT NULL, `old_object_repr` longtext NOT NULL, `new_object_repr` longtext NOT NULL, `time` datetime NOT NULL, PRIMARY KEY (`id`), KEY `planner_history_plan_id` (`plan_id`), KEY `planner_history_user_id` (`user_id`), KEY `planner_history_data_type_id` (`data_type_id`), CONSTRAINT `history_data_type_id_fk` FOREIGN KEY (`data_type_id`) REFERENCES `planner_data_types` (`id`), CONSTRAINT `history_plan_id_fk` FOREIGN KEY (`plan_id`) REFERENCES `planner_plans` (`id`), CONSTRAINT `history_user_id_fk` FOREIGN KEY (`user_id`) REFERENCES `afe_users` (`id`))
CREATE TABLE `planner_keyvals` ( `id` int(11) NOT NULL auto_increment, `the_hash` varchar(40) NOT NULL, `key` varchar(1024) NOT NULL, `value` varchar(1024) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `the_hash` (`the_hash`))
CREATE TABLE `afe_job_keyvals` ( `id` int(11) NOT NULL AUTO_INCREMENT, `job_id` int(11) NOT NULL, `key` varchar(90) NOT NULL, `value` varchar(300) NOT NULL, PRIMARY KEY (`id`), KEY `afe_job_keyvals_job_id` (`job_id`), KEY `afe_job_keyvals_key` (`key`), CONSTRAINT `afe_job_keyvals_ibfk_1` FOREIGN KEY (`job_id`) REFERENCES `afe_jobs` (`id`) ON DELETE NO ACTION)
CREATE TABLE `afe_profilers` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `description` longtext NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE %s (`version` integer)
CREATE TABLE `afe_kernels` ( `id` int(11) NOT NULL AUTO_INCREMENT, `version` varchar(255) NOT NULL, `cmdline` varchar(255) DEFAULT '', PRIMARY KEY (`id`), UNIQUE KEY `afe_kernals_unique` (`version`,`cmdline`))
CREATE TABLE `planner_plan_owners` ( `id` int(11) NOT NULL auto_increment, `plan_id` int(11) NOT NULL, `user_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `plan_id` (`plan_id`,`user_id`), KEY `plan_owners_user_id_fk` (`user_id`), CONSTRAINT `plan_owners_plan_id_fk` FOREIGN KEY (`plan_id`) REFERENCES `planner_plans` (`id`), CONSTRAINT `plan_owners_user_id_fk` FOREIGN KEY (`user_id`) REFERENCES `afe_users` (`id`))
CREATE TABLE `afe_users` ( `id` int(11) NOT NULL AUTO_INCREMENT, `login` varchar(255) DEFAULT NULL, `access_level` int(11) DEFAULT '0', `reboot_before` smallint(6) NOT NULL, `reboot_after` smallint(6) NOT NULL, `show_experimental` tinyint(1) NOT NULL DEFAULT '0', `drone_set_id` int(11) DEFAULT NULL, PRIMARY KEY (`id`), KEY `afe_users_drone_set_ibfk` (`drone_set_id`), CONSTRAINT `afe_users_drone_set_ibfk` FOREIGN KEY (`drone_set_id`) REFERENCES `afe_drone_sets` (`id`))
CREATE TABLE `tko_job_keyvals` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `job_id` int(10) unsigned NOT NULL, INDEX `tko_job_keyvals_job_id` (`job_id`), FOREIGN KEY (`job_id`) REFERENCES `tko_jobs` (`job_idx`) ON DELETE NO ACTION, `key` varchar(90) NOT NULL, INDEX `tko_job_keyvals_key` (`key`), `value` varchar(300) NOT NULL)
CREATE TABLE `afe_drone_sets_drones` ( `id` int(11) NOT NULL AUTO_INCREMENT, `droneset_id` int(11) NOT NULL, `drone_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `afe_drone_sets_drones_unique` (`drone_id`), KEY `afe_drone_sets_drones_droneset_ibfk` (`droneset_id`), CONSTRAINT `afe_drone_sets_drones_droneset_ibfk` FOREIGN KEY (`droneset_id`) REFERENCES `afe_drone_sets` (`id`), CONSTRAINT `afe_drone_sets_drones_drone_ibfk` FOREIGN KEY (`drone_id`) REFERENCES `afe_drones` (`id`))
CREATE INDEX host_queue_entries_job_id ON host_queue_entries (job_id);
CREATE TABLE `afe_job_keyvals` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `job_id` integer NOT NULL, INDEX `afe_job_keyvals_job_id` (`job_id`), FOREIGN KEY (`job_id`) REFERENCES `afe_jobs` (`id`) ON DELETE NO ACTION, `key` varchar(90) NOT NULL, INDEX `afe_job_keyvals_key` (`key`), `value` varchar(300) NOT NULL)
CREATE TABLE `afe_parameterized_jobs` ( `id` int(11) NOT NULL AUTO_INCREMENT, `test_id` int(11) NOT NULL, `label_id` int(11) DEFAULT NULL, `use_container` tinyint(1) DEFAULT '0', `profile_only` tinyint(1) DEFAULT '0', `upload_kernel_config` tinyint(1) DEFAULT '0', PRIMARY KEY (`id`), KEY `afe_parameterized_jobs_test_ibfk` (`test_id`), KEY `afe_parameterized_jobs_label_ibfk` (`label_id`), CONSTRAINT `afe_parameterized_jobs_label_ibfk` FOREIGN KEY (`label_id`) REFERENCES `afe_labels` (`id`), CONSTRAINT `afe_parameterized_jobs_test_ibfk` FOREIGN KEY (`test_id`) REFERENCES `afe_autotests` (`id`))
CREATE TABLE `atomic_groups` ( `id` int(11) NOT NULL auto_increment, `name` varchar(255) NOT NULL, `description` longtext DEFAULT NULL, `max_number_of_machines` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE `planner_test_runs` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `test_job_id` integer NOT NULL, `tko_test_id` integer(10) UNSIGNED NOT NULL, `status` varchar(16) NOT NULL, `finalized` bool NOT NULL, `seen` bool NOT NULL, `triaged` bool NOT NULL)
CREATE TABLE `tko_test_labels_tests` ( `id` int(11) NOT NULL AUTO_INCREMENT, `testlabel_id` int(11) NOT NULL, `test_id` int(10) unsigned NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `testlabel_id` (`testlabel_id`,`test_id`), KEY `test_labels_tests_test_id` (`test_id`), CONSTRAINT `tests_labels_tests_ibfk_1` FOREIGN KEY (`testlabel_id`) REFERENCES `tko_test_labels` (`id`), CONSTRAINT `tests_labels_tests_ibfk_2` FOREIGN KEY (`test_id`) REFERENCES `tko_tests` (`test_idx`))
SELECT hostname FROM afe_labels JOIN afe_hosts_labels 
CREATE TABLE `afe_autotests` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) DEFAULT NULL, `test_class` varchar(255) DEFAULT NULL, `description` text, `test_type` int(11) DEFAULT NULL, `path` varchar(255) DEFAULT NULL, `author` varchar(256) DEFAULT NULL, `dependencies` varchar(256) DEFAULT NULL, `experimental` smallint(6) DEFAULT '0', `run_verify` smallint(6) DEFAULT '1', `test_time` smallint(6) DEFAULT '1', `test_category` varchar(256) DEFAULT NULL, `sync_count` int(11) DEFAULT '1', PRIMARY KEY (`id`))
CREATE TABLE `afe_hosts` ( `id` int(11) NOT NULL AUTO_INCREMENT, `hostname` varchar(255) DEFAULT NULL, `locked` tinyint(1) DEFAULT '0', `synch_id` int(11) DEFAULT NULL, `status` varchar(255) DEFAULT NULL, `invalid` tinyint(1) DEFAULT '0', `protection` int(11) NOT NULL, `locked_by_id` int(11) DEFAULT NULL, `lock_time` datetime DEFAULT NULL, `dirty` tinyint(1) NOT NULL, PRIMARY KEY (`id`), KEY `hosts_locked_by_fk` (`locked_by_id`), CONSTRAINT `hosts_locked_by_fk` FOREIGN KEY (`locked_by_id`) REFERENCES `afe_users` (`id`) ON DELETE NO ACTION)
CREATE TABLE `migrate_info` ( `version` int(11) DEFAULT NULL)
CREATE TABLE `tko_iteration_attributes` ( `test_idx` int(10) unsigned NOT NULL, `iteration` int(11) DEFAULT NULL, `attribute` varchar(30) DEFAULT NULL, `value` varchar(1024) DEFAULT NULL, KEY `test_idx` (`test_idx`), CONSTRAINT `tko_iteration_attributes_ibfk_1` FOREIGN KEY (`test_idx`) REFERENCES `tko_tests` (`test_idx`) ON DELETE CASCADE)
CREATE TABLE `planner_data_types` ( `id` int(11) NOT NULL auto_increment, `name` varchar(255) NOT NULL, `db_table` varchar(255) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `planner_custom_queries` ( `id` int(11) NOT NULL auto_increment, `plan_id` int(11) NOT NULL, `query` longtext NOT NULL, PRIMARY KEY (`id`), KEY `planner_custom_queries_plan_id` (`plan_id`), CONSTRAINT `custom_queries_plan_id_fk` FOREIGN KEY (`plan_id`) REFERENCES `planner_plans` (`id`))
CREATE TABLE `tko_test_view` ( `test_idx` int(10) unsigned, `job_idx` int(10) unsigned, `test` varchar(300), `subdir` varchar(300), `kernel_idx` int(10) unsigned, `status` int(10) unsigned, `reason` varchar(1024), `machine_idx` int(10) unsigned, `test_started_time` datetime, `test_finished_time` datetime, `job_tag` varchar(100), `job_label` varchar(100), `job_username` varchar(80), `job_queued_time` datetime, `job_started_time` datetime, `job_finished_time` datetime, `machine_hostname` varchar(700), `machine_group` varchar(80), `machine_owner` varchar(80), `kernel_hash` varchar(35), `kernel_base` varchar(30), `kernel_printable` varchar(100), `status_word` varchar(10))
CREATE TABLE afe_drones ( id INT AUTO_INCREMENT NOT NULL PRIMARY KEY, hostname VARCHAR(255) NOT NULL)
CREATE TABLE `planner_custom_queries` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `query` longtext NOT NULL)
CREATE TABLE `tko_test_attributes` ( `test_idx` int(10) unsigned NOT NULL, `attribute` varchar(30) DEFAULT NULL, `value` varchar(1024) DEFAULT NULL, `id` int(11) NOT NULL AUTO_INCREMENT, `user_created` tinyint(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `test_idx` (`test_idx`), KEY `attribute` (`attribute`), KEY `value` (`value`(767)), CONSTRAINT `tko_test_attributes_ibfk_1` FOREIGN KEY (`test_idx`) REFERENCES `tko_tests` (`test_idx`) ON DELETE CASCADE)
CREATE TABLE `planner_autoprocess_keyvals` ( `id` int(11) NOT NULL auto_increment, `autoprocess_id` int(11) NOT NULL, `keyval_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `autoprocess_id` (`autoprocess_id`,`keyval_id`), KEY `autoprocess_keyvals_keyval_id_fk` (`keyval_id`), CONSTRAINT `autoprocess_keyvals_autoprocess_id_fk` FOREIGN KEY (`autoprocess_id`) REFERENCES `planner_autoprocess` (`id`), CONSTRAINT `autoprocess_keyvals_keyval_id_fk` FOREIGN KEY (`keyval_id`) REFERENCES `planner_keyvals` (`id`))
UPDATE afe_hosts SET status=Running  WHERE id=5
SELECT id FROM auth_group WHERE name = 'Basic Admin');
CREATE TABLE `planner_autoprocess_bugs` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `autoprocess_id` integer NOT NULL, `bug_id` integer NOT NULL, UNIQUE (`autoprocess_id`, `bug_id`))
CREATE TABLE `planner_test_run_bugs` ( `id` int(11) NOT NULL auto_increment, `testrun_id` int(11) NOT NULL, `bug_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `testrun_id` (`testrun_id`,`bug_id`), KEY `test_run_bugs_bug_id_fk` (`bug_id`), CONSTRAINT `test_run_bugs_bug_id_fk` FOREIGN KEY (`bug_id`) REFERENCES `planner_bugs` (`id`), CONSTRAINT `test_run_bugs_testrun_id_fk` FOREIGN KEY (`testrun_id`) REFERENCES `planner_test_runs` (`id`))
CREATE TABLE `tko_jobs` ( `job_idx` int(10) unsigned NOT NULL AUTO_INCREMENT, `tag` varchar(100) DEFAULT NULL, `label` varchar(100) DEFAULT NULL, `username` varchar(80) DEFAULT NULL, `machine_idx` int(10) unsigned NOT NULL, `queued_time` datetime DEFAULT NULL, `started_time` datetime DEFAULT NULL, `finished_time` datetime DEFAULT NULL, `afe_job_id` int(11) DEFAULT NULL, PRIMARY KEY (`job_idx`), UNIQUE KEY `tag` (`tag`), KEY `label` (`label`), KEY `username` (`username`), KEY `machine_idx` (`machine_idx`), KEY `afe_job_id` (`afe_job_id`), CONSTRAINT `tko_jobs_ibfk_1` FOREIGN KEY (`machine_idx`) REFERENCES `tko_machines` (`machine_idx`) ON DELETE CASCADE)
CREATE TABLE `afe_host_attributes` ( `id` int(11) NOT NULL AUTO_INCREMENT, `host_id` int(11) NOT NULL, `attribute` varchar(90) NOT NULL, `value` varchar(300) NOT NULL, PRIMARY KEY (`id`), KEY `host_id` (`host_id`), KEY `attribute` (`attribute`), CONSTRAINT `afe_host_attributes_ibfk_1` FOREIGN KEY (`host_id`) REFERENCES `afe_hosts` (`id`))
CREATE TABLE `planner_autoprocess_labels` ( `id` int(11) NOT NULL auto_increment, `autoprocess_id` int(11) NOT NULL, `testlabel_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `autoprocess_id` (`autoprocess_id`,`testlabel_id`), KEY `autoprocess_labels_testlabel_id_fk` (`testlabel_id`), CONSTRAINT `autoprocess_labels_autoprocess_id_fk` FOREIGN KEY (`autoprocess_id`) REFERENCES `planner_autoprocess` (`id`), CONSTRAINT `autoprocess_labels_testlabel_id_fk` FOREIGN KEY (`testlabel_id`) REFERENCES `tko_test_labels` (`id`))
CREATE TABLE `planner_autoprocess` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `condition` longtext NOT NULL, `enabled` bool NOT NULL, `reason_override` varchar(255) NULL)
CREATE TABLE `recurring_run` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `job_id` integer NOT NULL REFERENCES `jobs` (`id`), `owner_id` integer NOT NULL REFERENCES `users` (`id`), `start_date` datetime NOT NULL, `loop_period` integer NOT NULL, `loop_count` integer NOT NULL)
CREATE TABLE `afe_aborted_host_queue_entries` ( `queue_entry_id` int(11) NOT NULL, `aborted_by_id` int(11) NOT NULL, `aborted_on` datetime NOT NULL, PRIMARY KEY (`queue_entry_id`), KEY `aborted_host_queue_entries_aborted_by_id_fk` (`aborted_by_id`), CONSTRAINT `aborted_host_queue_entries_aborted_by_id_fk` FOREIGN KEY (`aborted_by_id`) REFERENCES `afe_users` (`id`) ON DELETE NO ACTION, CONSTRAINT `aborted_host_queue_entries_queue_entry_id_fk` FOREIGN KEY (`queue_entry_id`) REFERENCES `afe_host_queue_entries` (`id`) ON DELETE NO ACTION)
CREATE TABLE `planner_hosts` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `plan_id` integer NOT NULL, `host_id` integer NOT NULL, `complete` bool NOT NULL, `blocked` bool NOT NULL)
UPDATE afe_hosts SET status=Running  WHERE id=1
CREATE TABLE `tko_test_view_outer_joins` ( `test_idx` int(10) unsigned, `job_idx` int(10) unsigned, `test_name` varchar(300), `subdir` varchar(300), `kernel_idx` int(10) unsigned, `status_idx` int(10) unsigned, `reason` varchar(1024), `machine_idx` int(10) unsigned, `test_started_time` datetime, `test_finished_time` datetime, `job_tag` varchar(100), `job_name` varchar(100), `job_owner` varchar(80), `job_queued_time` datetime, `job_started_time` datetime, `job_finished_time` datetime, `hostname` varchar(700), `platform` varchar(80), `machine_owner` varchar(80), `kernel_hash` varchar(35), `kernel_base` varchar(30), `kernel` varchar(100), `status` varchar(10))
CREATE TABLE `tko_kernels` ( `kernel_idx` int(10) unsigned NOT NULL AUTO_INCREMENT, `kernel_hash` varchar(35) DEFAULT NULL, `base` varchar(30) DEFAULT NULL, `printable` varchar(100) DEFAULT NULL, PRIMARY KEY (`kernel_idx`), KEY `printable` (`printable`))
SELECT test_idx, iteration_value FROM tko_perf_view_2 WHERE test_idx < 1000 AND test_name IN ('dbench', 'tbench') AND iteration_key = 'throughput' AND kernel LIKE '2.6.18%%' AND test_name = %s ORDER BY iteration_value
SELECT test_idx, iteration_value FROM tko_perf_view_2 WHERE test_idx < 1000 AND test_name IN ('dbench', 'tbench') AND iteration_key = 'throughput' AND kernel LIKE '2.6.11%%' AND test_name = %s ORDER BY iteration_value
CREATE TABLE `tko_job_keyvals` ( `id` int(11) NOT NULL AUTO_INCREMENT, `job_id` int(10) unsigned NOT NULL, `key` varchar(90) NOT NULL, `value` varchar(300) NOT NULL, PRIMARY KEY (`id`), KEY `tko_job_keyvals_job_id` (`job_id`), KEY `tko_job_keyvals_key` (`key`), CONSTRAINT `tko_job_keyvals_ibfk_1` FOREIGN KEY (`job_id`) REFERENCES `tko_jobs` (`job_idx`) ON DELETE NO ACTION)
CREATE TABLE `afe_test_parameters` ( `id` int(11) NOT NULL AUTO_INCREMENT, `test_id` int(11) NOT NULL, `name` varchar(255) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `afe_test_parameters_unique` (`test_id`,`name`), CONSTRAINT `afe_test_parameters_test_ibfk` FOREIGN KEY (`test_id`) REFERENCES `afe_autotests` (`id`))
CREATE TABLE `planner_plans` ( `id` int(11) NOT NULL auto_increment, `name` varchar(255) NOT NULL, `label_override` varchar(255) default NULL, `support` longtext NOT NULL, `complete` tinyint(1) NOT NULL, `dirty` tinyint(1) NOT NULL, `initialized` tinyint(1) default '0', PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE `afe_parameterized_job_profiler_parameters` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parameterized_job_profiler_id` int(11) NOT NULL, `parameter_name` varchar(255) NOT NULL, `parameter_value` text NOT NULL, `parameter_type` enum('int','float','string') DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `afe_parameterized_job_profiler_parameters_unique` (`parameterized_job_profiler_id`,`parameter_name`), CONSTRAINT `afe_parameterized_job_profiler_parameters_ibfk` FOREIGN KEY (`parameterized_job_profiler_id`) REFERENCES `afe_parameterized_jobs_profilers` (`id`))
CREATE TABLE planner_additional_parameters ( id INT PRIMARY KEY AUTO_INCREMENT, plan_id INT NOT NULL, hostname_regex VARCHAR(255) NOT NULL, param_type VARCHAR(32) NOT NULL, application_order INT NOT NULL)
CREATE TABLE `planner_autoprocess_labels` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `autoprocess_id` integer NOT NULL, `testlabel_id` integer NOT NULL, UNIQUE (`autoprocess_id`, `testlabel_id`))
CREATE TABLE `afe_acl_groups` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) DEFAULT NULL, `description` varchar(255) DEFAULT NULL, PRIMARY KEY (`id`))
SELECT id FROM hosts WHERE invalid = TRUE);
CREATE TABLE `planner_saved_objects` ( `id` int(11) NOT NULL auto_increment, `user_id` int(11) NOT NULL, `type` varchar(16) NOT NULL, `name` varchar(255) NOT NULL, `encoded_object` longtext NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `user_id` (`user_id`,`type`,`name`), KEY `planner_saved_objects_user_id` (`user_id`), CONSTRAINT `saved_objects_user_id_fk` FOREIGN KEY (`user_id`) REFERENCES `afe_users` (`id`))
CREATE TABLE `afe_jobs_dependency_labels` ( `id` int(11) NOT NULL AUTO_INCREMENT, `job_id` int(11) NOT NULL, `label_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `job_id` (`job_id`,`label_id`), KEY `jobs_dependency_labels_label_id_fk` (`label_id`), CONSTRAINT `jobs_dependency_labels_job_id_fk` FOREIGN KEY (`job_id`) REFERENCES `afe_jobs` (`id`) ON DELETE NO ACTION, CONSTRAINT `jobs_dependency_labels_label_id_fk` FOREIGN KEY (`label_id`) REFERENCES `afe_labels` (`id`) ON DELETE NO ACTION)
CREATE TABLE afe_parameterized_job_parameters ( id INT PRIMARY KEY AUTO_INCREMENT, parameterized_job_id INT NOT NULL, test_parameter_id INT NOT NULL, parameter_value TEXT NOT NULL, parameter_type ENUM('int', 'float', 'string'))
CREATE TABLE `planner_bugs` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `external_uid` varchar(255) NOT NULL UNIQUE)
CREATE TABLE `planner_test_jobs` ( `id` int(11) NOT NULL auto_increment, `plan_id` int(11) NOT NULL, `test_config_id` int(11) NOT NULL, `afe_job_id` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `planner_test_jobs_plan_id` (`plan_id`), KEY `planner_test_jobs_afe_job_id` (`afe_job_id`), KEY `planner_test_jobs_test_config_id` (`test_config_id`), CONSTRAINT `test_jobs_afe_job_id_fk` FOREIGN KEY (`afe_job_id`) REFERENCES `afe_jobs` (`id`), CONSTRAINT `test_jobs_plan_id_fk` FOREIGN KEY (`plan_id`) REFERENCES `planner_plans` (`id`), CONSTRAINT `test_jobs_test_config_id_fk` FOREIGN KEY (`test_config_id`) REFERENCES `planner_test_configs` (`id`))
CREATE TABLE `afe_atomic_groups` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(255) NOT NULL, `description` longtext, `max_number_of_machines` int(11) NOT NULL, `invalid` tinyint(1) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE planner_test_configs_skipped_hosts ( testconfig_id INT NOT NULL, host_id INT NOT NULL, PRIMARY KEY (testconfig_id, host_id))
CREATE TABLE `afe_parameterized_jobs_profilers` ( `id` int(11) NOT NULL AUTO_INCREMENT, `parameterized_job_id` int(11) NOT NULL, `profiler_id` int(11) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `afe_parameterized_jobs_profilers_unique` (`parameterized_job_id`,`profiler_id`), KEY `afe_parameterized_jobs_profilers_profile_ibfk` (`profiler_id`), CONSTRAINT `afe_parameterized_jobs_profilers_parameterized_job_ibfk` FOREIGN KEY (`parameterized_job_id`) REFERENCES `afe_parameterized_jobs` (`id`), CONSTRAINT `afe_parameterized_jobs_profilers_profile_ibfk` FOREIGN KEY (`profiler_id`) REFERENCES `afe_profilers` (`id`))
CREATE TABLE `profilers` ( `id` int(11) NOT NULL auto_increment, `name` varchar(255) NOT NULL, `description` longtext NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE `planner_test_control_files` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `the_hash` varchar(40) NOT NULL UNIQUE, `contents` longtext NOT NULL)
CREATE TABLE `afe_special_tasks` ( `id` int(11) NOT NULL AUTO_INCREMENT, `host_id` int(11) NOT NULL, `task` varchar(64) NOT NULL, `time_requested` datetime NOT NULL, `is_active` tinyint(1) NOT NULL DEFAULT '0', `is_complete` tinyint(1) NOT NULL DEFAULT '0', `time_started` datetime DEFAULT NULL, `queue_entry_id` int(11) DEFAULT NULL, `success` tinyint(1) NOT NULL DEFAULT '0', `requested_by_id` int(11) NOT NULL, PRIMARY KEY (`id`), KEY `special_tasks_host_id` (`host_id`), KEY `special_tasks_host_queue_entry_id` (`queue_entry_id`), KEY `special_tasks_requested_by_id` (`requested_by_id`), CONSTRAINT `special_tasks_requested_by_id` FOREIGN KEY (`requested_by_id`) REFERENCES `afe_users` (`id`) ON DELETE NO ACTION, CONSTRAINT `special_tasks_to_hosts_ibfk` FOREIGN KEY (`host_id`) REFERENCES `afe_hosts` (`id`), CONSTRAINT `special_tasks_to_host_queue_entries_ibfk` FOREIGN KEY (`queue_entry_id`) REFERENCES `afe_host_queue_entries` (`id`))
CREATE TABLE `tko_test_labels` ( `id` int(11) NOT NULL AUTO_INCREMENT, `name` varchar(80) NOT NULL, `description` longtext NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `tko_test_labels_unique` (`name`))
CREATE TABLE `planner_bugs` ( `id` int(11) NOT NULL auto_increment, `external_uid` varchar(255) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY `external_uid` (`external_uid`))
CREATE TABLE `planner_data_types` ( `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY, `name` varchar(255) NOT NULL, `db_table` varchar(255) NOT NULL)
CREATE INDEX recurring_run_owner_id ON `recurring_run` (`owner_id`);
