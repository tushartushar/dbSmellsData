CREATE TABLE `users_groups` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `user_id` int(11) unsigned NOT NULL, `group_id` mediumint(8) unsigned NOT NULL, PRIMARY KEY (`id`), KEY `fk_users_groups_users1_idx` (`user_id`), KEY `fk_users_groups_groups1_idx` (`group_id`), CONSTRAINT `uc_users_groups` UNIQUE (`user_id`, `group_id`), CONSTRAINT `fk_users_groups_users1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `fk_users_groups_groups1` FOREIGN KEY (`group_id`) REFERENCES `groups` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION)
CREATE TABLE groups ( id int NOT NULL IDENTITY(1,1), [name] varchar(20) NOT NULL, description varchar(100) NOT NULL, PRIMARY KEY(id), CONSTRAINT groups_check_id CHECK(id >= 0))
CREATE TABLE users_groups ( id int NOT NULL IDENTITY(1,1), user_id int NOT NULL, group_id int NOT NULL, PRIMARY KEY(id), CONSTRAINT uc_users_groups UNIQUE (user_id, group_id), CONSTRAINT users_groups_check_id CHECK(id >= 0), CONSTRAINT users_groups_check_group_id CHECK(group_id >= 0), CONSTRAINT users_groups_check_user_id CHECK(user_id >= 0))
CREATE TABLE `groups` ( `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT, `name` varchar(20) NOT NULL, `description` varchar(100) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE `users` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `ip_address` varchar(15) NOT NULL, `username` varchar(100) NOT NULL, `password` varchar(255) NOT NULL, `salt` varchar(255) DEFAULT NULL, `email` varchar(100) NOT NULL, `activation_code` varchar(40) DEFAULT NULL, `forgotten_password_code` varchar(40) DEFAULT NULL, `forgotten_password_time` int(11) unsigned DEFAULT NULL, `remember_code` varchar(40) DEFAULT NULL, `created_on` int(11) unsigned NOT NULL, `last_login` int(11) unsigned DEFAULT NULL, `active` tinyint(1) unsigned DEFAULT NULL, `first_name` varchar(50) DEFAULT NULL, `last_name` varchar(50) DEFAULT NULL, `company` varchar(100) DEFAULT NULL, `phone` varchar(20) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE login_attempts ( id int NOT NULL IDENTITY(1,1), ip_address varchar(15), login varchar(100) NOT NULL, time datetime, PRIMARY KEY(id), CONSTRAINT login_attempts_check_id CHECK(id >= 0))
CREATE TABLE `login_attempts` ( `id` int(11) unsigned NOT NULL AUTO_INCREMENT, `ip_address` varchar(15) NOT NULL, `login` varchar(100) NOT NULL, `time` int(11) unsigned DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE users ( id int NOT NULL IDENTITY(1,1), ip_address varchar(15) NOT NULL, username varchar(100) NOT NULL, password varchar(255) NOT NULL, salt varchar(255), email varchar(100) NOT NULL, activation_code varchar(40), forgotten_password_code varchar(40), forgotten_password_time int, remember_code varchar(40), created_on int NOT NULL, last_login int, active int, first_name varchar(50), last_name varchar(50), company varchar(100), phone varchar(20), PRIMARY KEY(id), CONSTRAINT users_check_id CHECK(id >= 0), CONSTRAINT users_check_active CHECK(active >= 0))
