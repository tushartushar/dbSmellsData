CREATE TABLE {groups} ( `id` int(9) NOT NULL AUTO_INCREMENT, `name` char(64) DEFAULT NULL, `special` tinyint(1) DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE {groups_users} ( `group_id` int(9) NOT NULL, `user_id` int(9) NOT NULL, PRIMARY KEY (`group_id`,`user_id`), UNIQUE KEY `user_id` (`user_id`,`group_id`))
CREATE TABLE sessions	(		session_id VARCHAR(127) NOT NULL,		last_activity INT(10) UNSIGNED NOT NULL,		data TEXT NOT NULL,		PRIMARY KEY (session_id)	)
CREATE TABLE {(\w+)
CREATE TABLE {server_add_files} ( `id` int(9) NOT NULL auto_increment, `task_id` int(9) NOT NULL, `file` varchar(255) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS {groups_users} ( `group_id` int(9) NOT NULL, `user_id` int(9) NOT NULL, PRIMARY KEY (`group_id`, `user_id`), UNIQUE KEY(`user_id`, `group_id`))
CREATE TABLE {server_add_entries} ( `id` int(9) NOT NULL auto_increment, `checked` boolean default 0, `is_directory` boolean default 0, `item_id` int(9), `parent_id` int(9), `path` varchar(255) NOT NULL, `task_id` int(9) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE {user_access_keys} ( `id` int(9) NOT NULL auto_increment, `user_id` int(9) NOT NULL, `access_key` char(32) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY(`access_key`), UNIQUE KEY(`user_id`))
CREATE TABLE {vars} ( `id` int(9) NOT NULL auto_increment, `module_name` varchar(64) NOT NULL, `name` varchar(64) NOT NULL, `value` text, PRIMARY KEY (`id`), UNIQUE KEY(`module_name`, `name`))
CREATE TABLE {failed_logins} ( `id` int(9) NOT NULL auto_increment, `count` int(9) NOT NULL, `name` varchar(255) NOT NULL, `time` int(9) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS {subscriptions} ( `id` int(9) NOT NULL auto_increment, `item_id` int(9) NOT NULL, `user_id` int(9) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY (`item_id`, `user_id`), UNIQUE KEY (`user_id`, `item_id`))
CREATE TABLE {access_caches} ( `id` int(9) NOT NULL auto_increment, `item_id` int(9), PRIMARY KEY (`id`), KEY (`item_id`))
CREATE TABLE {vars} ( `id` int(9) NOT NULL AUTO_INCREMENT, `module_name` varchar(64) NOT NULL, `name` varchar(64) NOT NULL, `value` text, PRIMARY KEY (`id`), UNIQUE KEY `module_name` (`module_name`,`name`))
CREATE TABLE {comments} ( `author_id` int(9) DEFAULT NULL, `created` int(9) NOT NULL, `guest_email` varchar(128) DEFAULT NULL, `guest_name` varchar(128) DEFAULT NULL, `guest_url` varchar(255) DEFAULT NULL, `id` int(9) NOT NULL AUTO_INCREMENT, `item_id` int(9) NOT NULL, `server_http_accept_charset` varchar(64) DEFAULT NULL, `server_http_accept_encoding` varchar(64) DEFAULT NULL, `server_http_accept_language` varchar(64) DEFAULT NULL, `server_http_accept` varchar(128) DEFAULT NULL, `server_http_connection` varchar(64) DEFAULT NULL, `server_http_host` varchar(64) DEFAULT NULL, `server_http_referer` varchar(255) DEFAULT NULL, `server_http_user_agent` varchar(128) DEFAULT NULL, `server_query_string` varchar(64) DEFAULT NULL, `server_remote_addr` varchar(40) DEFAULT NULL, `server_remote_host` varchar(255) DEFAULT NULL, `server_remote_port` varchar(16) DEFAULT NULL, `state` varchar(15) DEFAULT 'unpublished', `text` text, `updated` int(9) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE {modules} ( `id` int(9) NOT NULL auto_increment, `active` BOOLEAN default 0, `name` varchar(64) default NULL, `version` int(9) default NULL, `weight` int(9) default NULL, PRIMARY KEY (`id`), UNIQUE KEY(`name`), KEY (`weight`))
CREATE TABLE {messages} ( `id` int(9) NOT NULL AUTO_INCREMENT, `key` varchar(255) DEFAULT NULL, `severity` varchar(32) DEFAULT NULL, `value` text, PRIMARY KEY (`id`), UNIQUE KEY `key` (`key`))
CREATE TABLE IF NOT EXISTS {exif_records} ( `id` int(9) NOT NULL auto_increment, `item_id` INTEGER(9) NOT NULL, `key_count` INTEGER(9) default 0, `data` TEXT, `dirty` BOOLEAN default 1, PRIMARY KEY (`id`), KEY(`item_id`))
CREATE TABLE IF NOT EXISTS {items_tags} ( `id` int(9) NOT NULL auto_increment, `item_id` int(9) NOT NULL, `tag_id` int(9) NOT NULL, PRIMARY KEY (`id`), KEY(`tag_id`, `id`), KEY(`item_id`, `id`))
CREATE TABLE {caches} ( `id` int(9) NOT NULL AUTO_INCREMENT, `key` varchar(255) NOT NULL, `tags` varchar(255) DEFAULT NULL, `expiration` int(9) NOT NULL, `cache` longblob, PRIMARY KEY (`id`), UNIQUE KEY `key` (`key`), KEY `tags` (`tags`))
CREATE TABLE {items_tags} ( `id` int(9) NOT NULL AUTO_INCREMENT, `item_id` int(9) NOT NULL, `tag_id` int(9) NOT NULL, PRIMARY KEY (`id`), KEY `tag_id` (`tag_id`,`id`), KEY `item_id` (`item_id`,`id`))
CREATE TABLE {modules} ( `id` int(9) NOT NULL AUTO_INCREMENT, `active` tinyint(1) DEFAULT '0', `name` varchar(64) DEFAULT NULL, `version` int(9) DEFAULT NULL, `weight` int(9) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`), KEY `weight` (`weight`))
CREATE TABLE {tasks} ( `id` int(9) NOT NULL AUTO_INCREMENT, `callback` varchar(128) DEFAULT NULL, `context` text NOT NULL, `done` tinyint(1) DEFAULT '0', `name` varchar(128) DEFAULT NULL, `owner_id` int(9) DEFAULT NULL, `percent_complete` int(9) DEFAULT '0', `state` varchar(32) DEFAULT NULL, `status` varchar(255) DEFAULT NULL, `updated` int(9) DEFAULT NULL, PRIMARY KEY (`id`), KEY `owner_id` (`owner_id`))
CREATE TABLE IF NOT EXISTS {comments} ( `author_id` int(9) default NULL, `created` int(9) NOT NULL, `guest_email` varchar(128) default NULL, `guest_name` varchar(128) default NULL, `guest_url` varchar(255) default NULL, `id` int(9) NOT NULL auto_increment, `item_id` int(9) NOT NULL, `server_http_accept_charset` varchar(64) default NULL, `server_http_accept_encoding` varchar(64) default NULL, `server_http_accept_language` varchar(64) default NULL, `server_http_accept` varchar(128) default NULL, `server_http_connection` varchar(64) default NULL, `server_http_host` varchar(64) default NULL, `server_http_referer` varchar(255) default NULL, `server_http_user_agent` varchar(128) default NULL, `server_query_string` varchar(64) default NULL, `server_remote_addr` varchar(40) default NULL, `server_remote_host` varchar(255) default NULL, `server_remote_port` varchar(16) default NULL, `state` varchar(15) default 'unpublished', `text` text, `updated` int(9) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS {tags} ( `id` int(9) NOT NULL auto_increment, `name` varchar(128) NOT NULL, `count` int(10) unsigned NOT NULL DEFAULT 0, PRIMARY KEY (`id`), UNIQUE KEY(`name`))
CREATE TABLE {graphics_rules} ( `id` int(9) NOT NULL auto_increment, `active` BOOLEAN default 0, `args` varchar(255) default NULL, `module_name` varchar(64) NOT NULL, `operation` varchar(64) NOT NULL, `priority` int(9) NOT NULL, `target` varchar(32) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE {access_intents} ( `id` int(9) NOT NULL AUTO_INCREMENT, `item_id` int(9) DEFAULT NULL, `view_1` binary(1) DEFAULT NULL, `view_full_1` binary(1) DEFAULT NULL, `edit_1` binary(1) DEFAULT NULL, `add_1` binary(1) DEFAULT NULL, `view_2` binary(1) DEFAULT NULL, `view_full_2` binary(1) DEFAULT NULL, `edit_2` binary(1) DEFAULT NULL, `add_2` binary(1) DEFAULT NULL, PRIMARY KEY (`id`))
CREATE TABLE {outgoing_translations} ( `id` int(9) NOT NULL auto_increment, `base_revision` int(9) DEFAULT NULL, `key` char(32) NOT NULL, `locale` char(10) NOT NULL, `message` text NOT NULL, `translation` text, PRIMARY KEY (`id`), UNIQUE KEY(`key`, `locale`), KEY `locale_key` (`locale`, `key`))
CREATE TABLE {tags} ( `id` int(9) NOT NULL AUTO_INCREMENT, `name` varchar(128) NOT NULL, `count` int(10) unsigned NOT NULL DEFAULT '0', PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE {themes} ( `id` int(9) NOT NULL AUTO_INCREMENT, `name` varchar(64) DEFAULT NULL, `version` int(9) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE IF NOT EXISTS {groups} ( `id` int(9) NOT NULL auto_increment, `name` char(64) default NULL, `special` BOOLEAN default 0, PRIMARY KEY (`id`), UNIQUE KEY(`name`))
CREATE TABLE IF NOT EXISTS {test} ( `id` int(9) NOT NULL auto_increment, `name` varchar(32) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY(`name`))
CREATE TABLE IF NOT EXISTS {watermarks} ( `id` int(9) NOT NULL auto_increment, `name` varchar(32) NOT NULL, `width` int(9) NOT NULL, `height` int(9) NOT NULL, `active` boolean default 0, `position` boolean default 0, `mime_type` varchar(64) default NULL, PRIMARY KEY (`id`), UNIQUE KEY(`name`))
CREATE TABLE {caches} ( `id` varchar(255) NOT NULL, `tags` varchar(255), `expiration` int(9) NOT NULL, `cache` text, PRIMARY KEY (`id`), KEY (`tags`))
CREATE TABLE IF NOT EXISTS {g2_maps} ( `id` int(9) NOT NULL auto_increment, `g2_id` int(9) NOT NULL, `g3_id` int(9) NOT NULL, `g2_url` varchar(255) default NULL, `resource_type` varchar(64) default NULL, PRIMARY KEY (`id`), KEY `g2_url` (`g2_url`), KEY `g2_id` (`g2_id`))
CREATE TABLE {access_caches} ( `id` int(9) NOT NULL AUTO_INCREMENT, `item_id` int(9) DEFAULT NULL, `view_full_1` binary(1) NOT NULL DEFAULT '0', `edit_1` binary(1) NOT NULL DEFAULT '0', `add_1` binary(1) NOT NULL DEFAULT '0', `view_full_2` binary(1) NOT NULL DEFAULT '0', `edit_2` binary(1) NOT NULL DEFAULT '0', `add_2` binary(1) NOT NULL DEFAULT '0', PRIMARY KEY (`id`), KEY `item_id` (`item_id`))
CREATE TABLE {tasks} ( `id` int(9) NOT NULL auto_increment, `callback` varchar(128) default NULL, `context` text NOT NULL, `done` boolean default 0, `name` varchar(128) default NULL, `owner_id` int(9) default NULL, `percent_complete` int(9) default 0, `state` varchar(32) default NULL, `status` varchar(255) default NULL, `updated` int(9) default NULL, PRIMARY KEY (`id`), KEY (`owner_id`))
CREATE TABLE {incoming_translations} ( `id` int(9) NOT NULL auto_increment, `key` char(32) NOT NULL, `locale` char(10) NOT NULL, `message` text NOT NULL, `revision` int(9) DEFAULT NULL, `translation` text, PRIMARY KEY (`id`), UNIQUE KEY(`key`, `locale`), KEY `locale_key` (`locale`, `key`))
CREATE TABLE {users} ( `id` int(9) NOT NULL AUTO_INCREMENT, `name` varchar(32) NOT NULL, `full_name` varchar(255) NOT NULL, `password` varchar(64) NOT NULL, `login_count` int(10) unsigned NOT NULL DEFAULT '0', `last_login` int(10) unsigned NOT NULL DEFAULT '0', `email` varchar(64) DEFAULT NULL, `admin` tinyint(1) DEFAULT '0', `guest` tinyint(1) DEFAULT '0', `hash` char(32) DEFAULT NULL, `url` varchar(255) DEFAULT NULL, `locale` char(10) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`), UNIQUE KEY `hash` (`hash`))
CREATE TABLE {incoming_translations} ( `id` int(9) NOT NULL AUTO_INCREMENT, `key` char(32) NOT NULL, `locale` char(10) NOT NULL, `message` text NOT NULL, `revision` int(9) DEFAULT NULL, `translation` text, PRIMARY KEY (`id`), UNIQUE KEY `key` (`key`,`locale`), KEY `locale_key` (`locale`,`key`))
CREATE TABLE {themes} ( `id` int(9) NOT NULL auto_increment, `name` varchar(64) default NULL, `version` int(9) default NULL, PRIMARY KEY (`id`), UNIQUE KEY(`name`))
CREATE TABLE {sessions} ( `session_id` varchar(127) NOT NULL, `data` text NOT NULL, `last_activity` int(10) unsigned NOT NULL, PRIMARY KEY (`session_id`))
CREATE TABLE {logs} ( `id` int(9) NOT NULL AUTO_INCREMENT, `category` varchar(64) DEFAULT NULL, `html` varchar(255) DEFAULT NULL, `message` text, `referer` varchar(255) DEFAULT NULL, `severity` int(9) DEFAULT '0', `timestamp` int(9) DEFAULT '0', `url` varchar(255) DEFAULT NULL, `user_id` int(9) DEFAULT '0', PRIMARY KEY (`id`))
CREATE TABLE {sessions} ( `session_id` varchar(127) NOT NULL, `data` text NOT NULL, `last_activity` int(10) UNSIGNED NOT NULL, PRIMARY KEY (`session_id`))
CREATE TABLE {server_add_entries} ( `id` int(9) NOT NULL auto_increment, `checked` boolean default 0, `is_directory` boolean default 0, `item_id` int(9), `parent_id` int(9), `path` varchar(255) NOT NULL, `task_id` int(9) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE {access_intents} ( `id` int(9) NOT NULL auto_increment, `item_id` int(9), PRIMARY KEY (`id`))
CREATE TABLE {permissions} ( `id` int(9) NOT NULL AUTO_INCREMENT, `display_name` varchar(64) DEFAULT NULL, `name` varchar(64) DEFAULT NULL, PRIMARY KEY (`id`), UNIQUE KEY `name` (`name`))
CREATE TABLE {permissions} ( `id` int(9) NOT NULL auto_increment, `display_name` varchar(64) default NULL, `name` varchar(64) default NULL, PRIMARY KEY (`id`), UNIQUE KEY(`name`))
CREATE TABLE IF NOT EXISTS {users} ( `id` int(9) NOT NULL auto_increment, `name` varchar(32) NOT NULL, `full_name` varchar(255) NOT NULL, `password` varchar(64) NOT NULL, `login_count` int(10) unsigned NOT NULL DEFAULT 0, `last_login` int(10) unsigned NOT NULL DEFAULT 0, `email` varchar(64) default NULL, `admin` BOOLEAN default 0, `guest` BOOLEAN default 0, `hash` char(32) default NULL, `url` varchar(255) default NULL, `locale` char(10) default NULL, PRIMARY KEY (`id`), UNIQUE KEY(`hash`), UNIQUE KEY(`name`))
CREATE TABLE {failed_auths} ( `id` int(9) NOT NULL AUTO_INCREMENT, `count` int(9) NOT NULL, `name` varchar(255) NOT NULL, `time` int(9) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE {search_records} ( `id` int(9) NOT NULL auto_increment, `item_id` int(9), `dirty` boolean default 1, `data` LONGTEXT default NULL, PRIMARY KEY (`id`), KEY(`item_id`), FULLTEXT INDEX (`data`))
CREATE TABLE {failed_auths} ( `id` int(9) NOT NULL auto_increment, `count` int(9) NOT NULL, `name` varchar(255) NOT NULL, `time` int(9) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE IF NOT EXISTS `g_test` ( `id` int(9) NOT NULL auto_increment, `name` varchar(32) NOT NULL, PRIMARY KEY (`id`), UNIQUE KEY(`name`))
SELECT COUNT(*) FROM [GalleryDerivative] WHERE [GalleryDerivative::derivativeType] = ?
CREATE TABLE IF NOT EXISTS {pending_notifications} ( `id` int(9) NOT NULL auto_increment, `locale` char(10) default NULL, `email` varchar(128) NOT NULL, `subject` varchar(255) NOT NULL, `text` text, PRIMARY KEY (`id`))
CREATE TABLE {graphics_rules} ( `id` int(9) NOT NULL AUTO_INCREMENT, `active` tinyint(1) DEFAULT '0', `args` varchar(255) DEFAULT NULL, `module_name` varchar(64) NOT NULL, `operation` varchar(64) NOT NULL, `priority` int(9) NOT NULL, `target` varchar(32) NOT NULL, PRIMARY KEY (`id`))
CREATE TABLE {logs} ( `id` int(9) NOT NULL auto_increment, `category` varchar(64) default NULL, `html` varchar(255) default NULL, `message` text default NULL, `referer` varchar(255) default NULL, `severity` int(9) default 0, `timestamp` int(9) default 0, `url` varchar(255) default NULL, `user_id` int(9) default 0, PRIMARY KEY (`id`))
CREATE TABLE {messages} ( `id` int(9) NOT NULL auto_increment, `key` varchar(255) default NULL, `severity` varchar(32) default NULL, `value` text default NULL, PRIMARY KEY (`id`), UNIQUE KEY(`key`))
CREATE TABLE {search_records} ( `id` int(9) NOT NULL AUTO_INCREMENT, `item_id` int(9) DEFAULT NULL, `dirty` tinyint(1) DEFAULT '1', `data` longtext, PRIMARY KEY (`id`), KEY `item_id` (`item_id`), FULLTEXT KEY `data` (`data`))
CREATE TABLE {caches} ( `id` int(9) NOT NULL auto_increment, `key` varchar(255) NOT NULL, `tags` varchar(255), `expiration` int(9) NOT NULL, `cache` longblob, PRIMARY KEY (`id`), UNIQUE KEY (`key`), KEY (`tags`))
CREATE TABLE {outgoing_translations} ( `id` int(9) NOT NULL AUTO_INCREMENT, `base_revision` int(9) DEFAULT NULL, `key` char(32) NOT NULL, `locale` char(10) NOT NULL, `message` text NOT NULL, `translation` text, PRIMARY KEY (`id`), UNIQUE KEY `key` (`key`,`locale`), KEY `locale_key` (`locale`,`key`))
